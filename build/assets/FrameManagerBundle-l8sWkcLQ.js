const __vite__mapDeps = (
  i,
  m = __vite__mapDeps,
  d = m.f ||
    (m.f = [
      "assets/MonacoEditor-BnsLKTuc.js",
      "assets/react-CV3HRGEF.js",
      "assets/common-5dK6VpSw.js",
      "assets/react-4-pFdlfx.css",
      "assets/monaco-DSyTyO5T.js",
      "assets/monaco-Cjcdkwd9.css",
      "assets/index-CIdel1P5.js",
      "assets/index-qQxd8I_f.css",
      "assets/Editor-CzeXhx9-.js",
      "assets/mermaid-BthQq5t5.js",
      "assets/excalidraw-Dj3WmK_c.js",
      "assets/excalidraw-Bnx8hZwR.css",
      "assets/codemirror-CUbsYH-3.js",
      "assets/Editor-l1VffD-u.css",
      "assets/Artplayer-B5_AvCvT.js",
      "assets/SettingForm-B_4-_WPw.js",
      "assets/DarkThemeSwitcher-CgNG2IV_.js",
      "assets/StorageSummary-_giPRPOL.js",
      "assets/Artplayer-CsrbgM3u.css",
      "assets/Epub-DOMSbPbt.js",
      "assets/Excalidraw-Bo992XcZ.js",
      "assets/Excalidraw-DYQS9-B6.css",
    ]),
) => i.map((i) => d[i]);
import {
  g as rt,
  a as lt,
  s as U,
  P as Ct,
  c as ge,
  m as qe,
  b as yn,
  u as ct,
  d as We,
  e as dt,
  f as ke,
  B as oa,
  h as ws,
  T as ee,
  i as ia,
  M as ra,
  r as la,
  j as X,
  k as ca,
  l as da,
  n as gt,
  S as vn,
  o as fe,
  p as pa,
  q as N,
  t as C,
  v as W,
  w as ua,
  x as Ms,
  y as te,
  G as as,
  D as re,
  z as oe,
  A as ie,
  C as Ft,
  E as Re,
  F as os,
  H as ha,
  I as kn,
  J as ae,
  K as St,
  L as Ae,
  N as xa,
  O as _s,
  Q as ma,
  R as Ge,
  U as Je,
  V as Ke,
  W as pt,
  X as je,
  Y as ue,
  Z as ut,
  _ as wt,
  $ as As,
  a0 as Se,
  a1 as fa,
  a2 as ga,
  a3 as Ds,
  a4 as ja,
  a5 as Cn,
  a6 as Ue,
  a7 as ba,
  a8 as Pe,
  a9 as F,
  aa as ya,
  ab as va,
  ac as zs,
  ad as ka,
  ae as ne,
  af as Tt,
  ag as Fe,
  ah as Ca,
  ai as _e,
  aj as he,
  ak as is,
  al as Sn,
  am as rs,
  an as wn,
  ao as Sa,
  ap as pe,
  aq as wa,
  ar as Y,
  as as Ye,
  at as Ve,
  au as Ma,
  av as _a,
  aw as Ps,
  ax as Mt,
  ay as Aa,
  az as Da,
  aA as vt,
  aB as za,
  aC as J,
  aD as Pa,
  aE as _t,
  aF as La,
  aG as It,
  aH as Fa,
  aI as Ta,
  aJ as Mn,
  aK as Ia,
  aL as ls,
  aM as Ea,
  aN as be,
  aO as Q,
  aP as G,
  aQ as _n,
  aR as Et,
  aS as ze,
  aT as Oa,
  aU as Wa,
  aV as Ra,
  aW as Ba,
  aX as Ha,
  aY as Na,
  aZ as Va,
  a_ as Ua,
  a$ as Ut,
  b0 as $t,
  b1 as ve,
  b2 as $a,
  b3 as qa,
  b4 as Ls,
  b5 as Fs,
  b6 as Ga,
  b7 as ht,
  b8 as An,
  b9 as de,
  ba as Dn,
  bb as Ja,
  bc as cs,
  bd as Ka,
  be as Yt,
  bf as ot,
  bg as ds,
  bh as zn,
  bi as At,
  bj as Dt,
  bk as Te,
  bl as Ze,
  bm as Be,
  bn as me,
  bo as Za,
  bp as Ya,
  bq as Ot,
  br as Wt,
  bs as Le,
  bt as Rt,
  bu as Qa,
  bv as Pn,
  bw as Xa,
  bx as ps,
  by as eo,
  bz as to,
  bA as Ie,
  bB as so,
  bC as no,
  bD as Ts,
  bE as ao,
  bF as Qt,
  bG as oo,
  bH as Is,
  bI as zt,
  bJ as Es,
  bK as us,
  bL as Bt,
  bM as io,
  bN as ro,
  bO as Ln,
  bP as He,
  bQ as De,
  bR as xt,
  bS as Fn,
  bT as lo,
  bU as co,
  bV as po,
  bW as uo,
  bX as ho,
  bY as xo,
  bZ as mo,
  b_ as le,
  b$ as fo,
  c0 as Os,
  c1 as Ws,
  c2 as go,
  c3 as jo,
  c4 as bo,
  c5 as yo,
  c6 as hs,
  c7 as vo,
  c8 as ko,
  c9 as Rs,
  ca as Bs,
  cb as Co,
  cc as qt,
  cd as Hs,
  ce as So,
  cf as xs,
  cg as Tn,
  ch as wo,
  ci as ms,
  cj as Mo,
  ck as Ns,
  cl as _o,
  cm as Qe,
  cn as Ao,
  co as Pt,
  cp as Vs,
  cq as Us,
  cr as Do,
  cs as zo,
  ct as $,
  cu as Po,
  cv as Lo,
  cw as Fo,
  cx as To,
  cy as $s,
  cz as fs,
  cA as In,
  cB as gs,
  cC as it,
  cD as Io,
  cE as qs,
  cF as En,
  cG as Eo,
  cH as Oo,
  cI as Wo,
  cJ as On,
  cK as K,
  cL as kt,
  cM as Gs,
  cN as Ro,
  cO as Bo,
  cP as Xt,
  cQ as Ho,
  cR as No,
  cS as js,
  cT as Vo,
  cU as Uo,
  cV as $o,
  cW as Lt,
  cX as qo,
  cY as Go,
  cZ as Jo,
  c_ as Ko,
  c$ as Zo,
  d0 as Yo,
  d1 as Qo,
  d2 as Z,
  d3 as jt,
  d4 as Wn,
  d5 as Rn,
  d6 as Xo,
  d7 as ei,
  d8 as es,
  d9 as ti,
  da as si,
  db as Js,
  dc as Bn,
  dd as ni,
  de as ai,
  df as ts,
  dg as Hn,
  dh as ss,
  di as oi,
  dj as ii,
  dk as ri,
  dl as li,
  dm as ci,
  dn as di,
  dp as pi,
  dq as Ht,
  dr as Nn,
  ds as ui,
  dt as Ks,
  du as hi,
  dv as xi,
  dw as mi,
  dx as fi,
  dy as gi,
  dz as ji,
  dA as bi,
  dB as Me,
  dC as yi,
  dD as Zs,
  dE as Ys,
  dF as vi,
  dG as ki,
  dH as Ci,
  dI as Qs,
  dJ as Si,
  dK as wi,
  dL as Mi,
  dM as _i,
  dN as Ai,
  dO as Di,
  dP as zi,
  dQ as Ee,
  dR as Xs,
  dS as Pi,
  dT as Li,
  dU as Gt,
  dV as Fi,
  dW as Ti,
  dX as ns,
  dY as Ii,
  dZ as Ei,
  d_ as Oi,
} from "./index-CIdel1P5.js";
import {
  r as a,
  j as e,
  g as O,
  n as $e,
  S as bs,
  C as ys,
  M as Wi,
  F as Ri,
  v as mt,
  e as Bi,
  Q as Vn,
  U as Un,
  B as $n,
  z as Hi,
  W as Ni,
  V as Vi,
  p as Ui,
  N as $i,
  O as qi,
  q as vs,
  l as qn,
} from "./react-CV3HRGEF.js";
import { F as Gi, C as Ji, A as Ki } from "./SettingForm-B_4-_WPw.js";
import { L as Zi, D as Yi } from "./DarkThemeSwitcher-CgNG2IV_.js";
import {
  S as Qi,
  T as Xi,
  A as en,
  E as er,
  D as tr,
  P as sr,
  a as nr,
  b as ar,
  c as or,
  d as ir,
} from "./StorageSummary-_giPRPOL.js";
import { _ as ft } from "./common-5dK6VpSw.js";
function rr(t) {
  return rt("MuiAppBar", t);
}
lt("MuiAppBar", [
  "root",
  "positionFixed",
  "positionAbsolute",
  "positionSticky",
  "positionStatic",
  "positionRelative",
  "colorDefault",
  "colorPrimary",
  "colorSecondary",
  "colorInherit",
  "colorTransparent",
  "colorError",
  "colorInfo",
  "colorSuccess",
  "colorWarning",
]);
const lr = (t) => {
    const { color: s, position: i, classes: n } = t,
      o = { root: ["root", `color${ge(s)}`, `position${ge(i)}`] };
    return dt(o, rr, n);
  },
  tn = (t, s) => (t ? `${t == null ? void 0 : t.replace(")", "")}, ${s})` : s),
  cr = U(Ct, {
    name: "MuiAppBar",
    slot: "Root",
    overridesResolver: (t, s) => {
      const { ownerState: i } = t;
      return [s.root, s[`position${ge(i.position)}`], s[`color${ge(i.color)}`]];
    },
  })(
    qe(({ theme: t }) => ({
      display: "flex",
      flexDirection: "column",
      width: "100%",
      boxSizing: "border-box",
      flexShrink: 0,
      variants: [
        {
          props: { position: "fixed" },
          style: {
            position: "fixed",
            zIndex: (t.vars || t).zIndex.appBar,
            top: 0,
            left: "auto",
            right: 0,
            "@media print": { position: "absolute" },
          },
        },
        {
          props: { position: "absolute" },
          style: { position: "absolute", zIndex: (t.vars || t).zIndex.appBar, top: 0, left: "auto", right: 0 },
        },
        {
          props: { position: "sticky" },
          style: { position: "sticky", zIndex: (t.vars || t).zIndex.appBar, top: 0, left: "auto", right: 0 },
        },
        { props: { position: "static" }, style: { position: "static" } },
        { props: { position: "relative" }, style: { position: "relative" } },
        { props: { color: "inherit" }, style: { "--AppBar-color": "inherit" } },
        {
          props: { color: "default" },
          style: {
            "--AppBar-background": t.vars ? t.vars.palette.AppBar.defaultBg : t.palette.grey[100],
            "--AppBar-color": t.vars ? t.vars.palette.text.primary : t.palette.getContrastText(t.palette.grey[100]),
            ...t.applyStyles("dark", {
              "--AppBar-background": t.vars ? t.vars.palette.AppBar.defaultBg : t.palette.grey[900],
              "--AppBar-color": t.vars ? t.vars.palette.text.primary : t.palette.getContrastText(t.palette.grey[900]),
            }),
          },
        },
        ...Object.entries(t.palette)
          .filter(yn(["contrastText"]))
          .map(([s]) => ({
            props: { color: s },
            style: {
              "--AppBar-background": (t.vars ?? t).palette[s].main,
              "--AppBar-color": (t.vars ?? t).palette[s].contrastText,
            },
          })),
        {
          props: (s) => s.enableColorOnDark === !0 && !["inherit", "transparent"].includes(s.color),
          style: { backgroundColor: "var(--AppBar-background)", color: "var(--AppBar-color)" },
        },
        {
          props: (s) => s.enableColorOnDark === !1 && !["inherit", "transparent"].includes(s.color),
          style: {
            backgroundColor: "var(--AppBar-background)",
            color: "var(--AppBar-color)",
            ...t.applyStyles("dark", {
              backgroundColor: t.vars ? tn(t.vars.palette.AppBar.darkBg, "var(--AppBar-background)") : null,
              color: t.vars ? tn(t.vars.palette.AppBar.darkColor, "var(--AppBar-color)") : null,
            }),
          },
        },
        {
          props: { color: "transparent" },
          style: {
            "--AppBar-background": "transparent",
            "--AppBar-color": "inherit",
            backgroundColor: "var(--AppBar-background)",
            color: "var(--AppBar-color)",
            ...t.applyStyles("dark", { backgroundImage: "none" }),
          },
        },
      ],
    })),
  ),
  Gn = a.forwardRef(function (s, i) {
    const n = ct({ props: s, name: "MuiAppBar" }),
      { className: o, color: p = "primary", enableColorOnDark: r = !1, position: l = "fixed", ...c } = n,
      d = { ...n, color: p, position: l, enableColorOnDark: r },
      h = lr(d);
    return e.jsx(cr, {
      square: !0,
      component: "header",
      ownerState: d,
      elevation: 4,
      className: We(h.root, o, l === "fixed" && "mui-fixed"),
      ref: i,
      ...c,
    });
  }),
  dr = ke(
    e.jsx("path", {
      d: "M6 10c-1.1 0-2 .9-2 2s.9 2 2 2 2-.9 2-2-.9-2-2-2zm12 0c-1.1 0-2 .9-2 2s.9 2 2 2 2-.9 2-2-.9-2-2-2zm-6 0c-1.1 0-2 .9-2 2s.9 2 2 2 2-.9 2-2-.9-2-2-2z",
    }),
    "MoreHoriz",
  ),
  pr = U(oa)(
    qe(({ theme: t }) => ({
      display: "flex",
      marginLeft: `calc(${t.spacing(1)} * 0.5)`,
      marginRight: `calc(${t.spacing(1)} * 0.5)`,
      ...(t.palette.mode === "light"
        ? { backgroundColor: t.palette.grey[100], color: t.palette.grey[700] }
        : { backgroundColor: t.palette.grey[700], color: t.palette.grey[100] }),
      borderRadius: 2,
      "&:hover, &:focus": {
        ...(t.palette.mode === "light"
          ? { backgroundColor: t.palette.grey[200] }
          : { backgroundColor: t.palette.grey[600] }),
      },
      "&:active": {
        boxShadow: t.shadows[0],
        ...(t.palette.mode === "light"
          ? { backgroundColor: ws(t.palette.grey[200], 0.12) }
          : { backgroundColor: ws(t.palette.grey[600], 0.12) }),
      },
    })),
  ),
  ur = U(dr)({ width: 24, height: 16 });
function hr(t) {
  const { slots: s = {}, slotProps: i = {}, ...n } = t,
    o = t;
  return e.jsx("li", {
    children: e.jsx(pr, {
      focusRipple: !0,
      ...n,
      ownerState: o,
      children: e.jsx(ur, { as: s.CollapsedIcon, ownerState: o, ...i.collapsedIcon }),
    }),
  });
}
function xr(t) {
  return rt("MuiBreadcrumbs", t);
}
const mr = lt("MuiBreadcrumbs", ["root", "ol", "li", "separator"]),
  fr = (t) => {
    const { classes: s } = t;
    return dt({ root: ["root"], li: ["li"], ol: ["ol"], separator: ["separator"] }, xr, s);
  },
  gr = U(ee, {
    name: "MuiBreadcrumbs",
    slot: "Root",
    overridesResolver: (t, s) => [{ [`& .${mr.li}`]: s.li }, s.root],
  })({}),
  jr = U("ol", { name: "MuiBreadcrumbs", slot: "Ol", overridesResolver: (t, s) => s.ol })({
    display: "flex",
    flexWrap: "wrap",
    alignItems: "center",
    padding: 0,
    margin: 0,
    listStyle: "none",
  }),
  br = U("li", { name: "MuiBreadcrumbs", slot: "Separator", overridesResolver: (t, s) => s.separator })({
    display: "flex",
    userSelect: "none",
    marginLeft: 8,
    marginRight: 8,
  });
function yr(t, s, i, n) {
  return t.reduce(
    (o, p, r) => (
      r < t.length - 1
        ? (o = o.concat(
            p,
            e.jsx(br, { "aria-hidden": !0, className: s, ownerState: n, children: i }, `separator-${r}`),
          ))
        : o.push(p),
      o
    ),
    [],
  );
}
const vr = a.forwardRef(function (s, i) {
  const n = ct({ props: s, name: "MuiBreadcrumbs" }),
    {
      children: o,
      className: p,
      component: r = "nav",
      slots: l = {},
      slotProps: c = {},
      expandText: d = "Show path",
      itemsAfterCollapse: h = 1,
      itemsBeforeCollapse: u = 1,
      maxItems: x = 8,
      separator: f = "/",
      ...m
    } = n,
    [g, y] = a.useState(!1),
    k = {
      ...n,
      component: r,
      expanded: g,
      expandText: d,
      itemsAfterCollapse: h,
      itemsBeforeCollapse: u,
      maxItems: x,
      separator: f,
    },
    b = fr(k),
    v = ia({ elementType: l.CollapsedIcon, externalSlotProps: c.collapsedIcon, ownerState: k }),
    A = a.useRef(null),
    M = (I) => {
      const V = () => {
        y(!0);
        const P = A.current.querySelector("a[href],button,[tabindex]");
        P && P.focus();
      };
      return u + h >= I.length
        ? I
        : [
            ...I.slice(0, u),
            e.jsx(
              hr,
              {
                "aria-label": d,
                slots: { CollapsedIcon: l.CollapsedIcon },
                slotProps: { collapsedIcon: v },
                onClick: V,
              },
              "ellipsis",
            ),
            ...I.slice(I.length - h, I.length),
          ];
    },
    S = a.Children.toArray(o)
      .filter((I) => a.isValidElement(I))
      .map((I, V) => e.jsx("li", { className: b.li, children: I }, `child-${V}`));
  return e.jsx(gr, {
    ref: i,
    component: r,
    color: "textSecondary",
    className: We(b.root, p),
    ownerState: k,
    ...m,
    children: e.jsx(jr, {
      className: b.ol,
      ref: A,
      ownerState: k,
      children: yr(g || (x && S.length <= x) ? S : M(S), b.separator, f, k),
    }),
  });
});
function kr(t) {
  return rt("MuiDrawer", t);
}
lt("MuiDrawer", [
  "root",
  "docked",
  "paper",
  "anchorLeft",
  "anchorRight",
  "anchorTop",
  "anchorBottom",
  "paperAnchorLeft",
  "paperAnchorRight",
  "paperAnchorTop",
  "paperAnchorBottom",
  "paperAnchorDockedLeft",
  "paperAnchorDockedRight",
  "paperAnchorDockedTop",
  "paperAnchorDockedBottom",
  "modal",
]);
const Jn = (t, s) => {
    const { ownerState: i } = t;
    return [s.root, (i.variant === "permanent" || i.variant === "persistent") && s.docked, s.modal];
  },
  Cr = (t) => {
    const { classes: s, anchor: i, variant: n } = t,
      o = {
        root: ["root", `anchor${ge(i)}`],
        docked: [(n === "permanent" || n === "persistent") && "docked"],
        modal: ["modal"],
        paper: ["paper", `paperAnchor${ge(i)}`, n !== "temporary" && `paperAnchorDocked${ge(i)}`],
      };
    return dt(o, kr, s);
  },
  Sr = U(ra, { name: "MuiDrawer", slot: "Root", overridesResolver: Jn })(
    qe(({ theme: t }) => ({ zIndex: (t.vars || t).zIndex.drawer })),
  ),
  wr = U("div", {
    shouldForwardProp: la,
    name: "MuiDrawer",
    slot: "Docked",
    skipVariantsResolver: !1,
    overridesResolver: Jn,
  })({ flex: "0 0 auto" }),
  Mr = U(Ct, {
    name: "MuiDrawer",
    slot: "Paper",
    overridesResolver: (t, s) => {
      const { ownerState: i } = t;
      return [
        s.paper,
        s[`paperAnchor${ge(i.anchor)}`],
        i.variant !== "temporary" && s[`paperAnchorDocked${ge(i.anchor)}`],
      ];
    },
  })(
    qe(({ theme: t }) => ({
      overflowY: "auto",
      display: "flex",
      flexDirection: "column",
      height: "100%",
      flex: "1 0 auto",
      zIndex: (t.vars || t).zIndex.drawer,
      WebkitOverflowScrolling: "touch",
      position: "fixed",
      top: 0,
      outline: 0,
      variants: [
        { props: { anchor: "left" }, style: { left: 0 } },
        { props: { anchor: "top" }, style: { top: 0, left: 0, right: 0, height: "auto", maxHeight: "100%" } },
        { props: { anchor: "right" }, style: { right: 0 } },
        {
          props: { anchor: "bottom" },
          style: { top: "auto", left: 0, bottom: 0, right: 0, height: "auto", maxHeight: "100%" },
        },
        {
          props: ({ ownerState: s }) => s.anchor === "left" && s.variant !== "temporary",
          style: { borderRight: `1px solid ${(t.vars || t).palette.divider}` },
        },
        {
          props: ({ ownerState: s }) => s.anchor === "top" && s.variant !== "temporary",
          style: { borderBottom: `1px solid ${(t.vars || t).palette.divider}` },
        },
        {
          props: ({ ownerState: s }) => s.anchor === "right" && s.variant !== "temporary",
          style: { borderLeft: `1px solid ${(t.vars || t).palette.divider}` },
        },
        {
          props: ({ ownerState: s }) => s.anchor === "bottom" && s.variant !== "temporary",
          style: { borderTop: `1px solid ${(t.vars || t).palette.divider}` },
        },
      ],
    })),
  ),
  Kn = { left: "right", right: "left", top: "down", bottom: "up" };
function _r(t) {
  return ["left", "right"].includes(t);
}
function Ar({ direction: t }, s) {
  return t === "rtl" && _r(s) ? Kn[s] : s;
}
const Dr = a.forwardRef(function (s, i) {
  const n = ct({ props: s, name: "MuiDrawer" }),
    o = X(),
    p = ca(),
    r = { enter: o.transitions.duration.enteringScreen, exit: o.transitions.duration.leavingScreen },
    {
      anchor: l = "left",
      BackdropProps: c,
      children: d,
      className: h,
      elevation: u = 16,
      hideBackdrop: x = !1,
      ModalProps: { BackdropProps: f, ...m } = {},
      onClose: g,
      open: y = !1,
      PaperProps: k = {},
      SlideProps: b,
      TransitionComponent: v,
      transitionDuration: A = r,
      variant: M = "temporary",
      slots: S = {},
      slotProps: I = {},
      ...V
    } = n,
    P = a.useRef(!1);
  a.useEffect(() => {
    P.current = !0;
  }, []);
  const D = Ar({ direction: p ? "rtl" : "ltr" }, l),
    T = { ...n, anchor: l, elevation: u, open: y, variant: M, ...V },
    R = Cr(T),
    _ = {
      slots: { transition: v, ...S },
      slotProps: {
        paper: k,
        transition: b,
        ...I,
        backdrop: da(I.backdrop || { ...c, ...f }, { transitionDuration: A }),
      },
    },
    [j, w] = gt("root", {
      ref: i,
      elementType: Sr,
      className: We(R.root, R.modal, h),
      shouldForwardComponentProp: !0,
      ownerState: T,
      externalForwardedProps: { ..._, ...V, ...m },
      additionalProps: {
        open: y,
        onClose: g,
        hideBackdrop: x,
        slots: { backdrop: _.slots.backdrop },
        slotProps: { backdrop: _.slotProps.backdrop },
      },
    }),
    [L, B] = gt("paper", {
      elementType: Mr,
      shouldForwardComponentProp: !0,
      className: We(R.paper, k.className),
      ownerState: T,
      externalForwardedProps: _,
      additionalProps: { elevation: M === "temporary" ? u : 0, square: !0 },
    }),
    [q, E] = gt("docked", {
      elementType: wr,
      ref: i,
      className: We(R.root, R.docked, h),
      ownerState: T,
      externalForwardedProps: _,
      additionalProps: V,
    }),
    [H, se] = gt("transition", {
      elementType: vn,
      ownerState: T,
      externalForwardedProps: _,
      additionalProps: { in: y, direction: Kn[D], timeout: A, appear: P.current },
    }),
    Ce = e.jsx(L, { ...B, children: d });
  if (M === "permanent") return e.jsx(q, { ...E, children: Ce });
  const ye = e.jsx(H, { ...se, children: Ce });
  return M === "persistent" ? e.jsx(q, { ...E, children: ye }) : e.jsx(j, { ...w, children: ye });
});
function zr(t) {
  return rt("MuiIcon", t);
}
lt("MuiIcon", [
  "root",
  "colorPrimary",
  "colorSecondary",
  "colorAction",
  "colorError",
  "colorDisabled",
  "fontSizeInherit",
  "fontSizeSmall",
  "fontSizeMedium",
  "fontSizeLarge",
]);
const Pr = (t) => {
    const { color: s, fontSize: i, classes: n } = t,
      o = { root: ["root", s !== "inherit" && `color${ge(s)}`, `fontSize${ge(i)}`] };
    return dt(o, zr, n);
  },
  Lr = U("span", {
    name: "MuiIcon",
    slot: "Root",
    overridesResolver: (t, s) => {
      const { ownerState: i } = t;
      return [s.root, i.color !== "inherit" && s[`color${ge(i.color)}`], s[`fontSize${ge(i.fontSize)}`]];
    },
  })(
    qe(({ theme: t }) => ({
      userSelect: "none",
      width: "1em",
      height: "1em",
      overflow: "hidden",
      display: "inline-block",
      textAlign: "center",
      flexShrink: 0,
      variants: [
        { props: { fontSize: "inherit" }, style: { fontSize: "inherit" } },
        { props: { fontSize: "small" }, style: { fontSize: t.typography.pxToRem(20) } },
        { props: { fontSize: "medium" }, style: { fontSize: t.typography.pxToRem(24) } },
        { props: { fontSize: "large" }, style: { fontSize: t.typography.pxToRem(36) } },
        { props: { color: "action" }, style: { color: (t.vars || t).palette.action.active } },
        { props: { color: "disabled" }, style: { color: (t.vars || t).palette.action.disabled } },
        { props: { color: "inherit" }, style: { color: void 0 } },
        ...Object.entries(t.palette)
          .filter(yn())
          .map(([s]) => ({ props: { color: s }, style: { color: (t.vars || t).palette[s].main } })),
      ],
    })),
  ),
  Oe = a.forwardRef(function (s, i) {
    const n = ct({ props: s, name: "MuiIcon" }),
      {
        baseClassName: o = "material-icons",
        className: p,
        color: r = "inherit",
        component: l = "span",
        fontSize: c = "medium",
        ...d
      } = n,
      h = { ...n, baseClassName: o, color: r, component: l, fontSize: c },
      u = Pr(h);
    return e.jsx(Lr, {
      as: l,
      className: We(o, "notranslate", u.root, p),
      ownerState: h,
      "aria-hidden": !0,
      ref: i,
      ...d,
    });
  });
Oe.muiName = "Icon";
function Fr(t) {
  return rt("MuiToolbar", t);
}
lt("MuiToolbar", ["root", "gutters", "regular", "dense"]);
const Tr = (t) => {
    const { classes: s, disableGutters: i, variant: n } = t;
    return dt({ root: ["root", !i && "gutters", n] }, Fr, s);
  },
  Ir = U("div", {
    name: "MuiToolbar",
    slot: "Root",
    overridesResolver: (t, s) => {
      const { ownerState: i } = t;
      return [s.root, !i.disableGutters && s.gutters, s[i.variant]];
    },
  })(
    qe(({ theme: t }) => ({
      position: "relative",
      display: "flex",
      alignItems: "center",
      variants: [
        {
          props: ({ ownerState: s }) => !s.disableGutters,
          style: {
            paddingLeft: t.spacing(2),
            paddingRight: t.spacing(2),
            [t.breakpoints.up("sm")]: { paddingLeft: t.spacing(3), paddingRight: t.spacing(3) },
          },
        },
        { props: { variant: "dense" }, style: { minHeight: 48 } },
        { props: { variant: "regular" }, style: t.mixins.toolbar },
      ],
    })),
  ),
  Zn = a.forwardRef(function (s, i) {
    const n = ct({ props: s, name: "MuiToolbar" }),
      { className: o, component: p = "div", disableGutters: r = !1, variant: l = "regular", ...c } = n,
      d = { ...n, component: p, disableGutters: r, variant: l },
      h = Tr(d);
    return e.jsx(Ir, { as: p, className: We(h.root, o), ref: i, ownerState: d, ...c });
  }),
  Er = ke(
    e.jsx("path", {
      d: "m5.58 16.89 5.77-4.07c.56-.4.56-1.24 0-1.63L5.58 7.11C4.91 6.65 4 7.12 4 7.93v8.14c0 .81.91 1.28 1.58.82M13 7.93v8.14c0 .81.91 1.28 1.58.82l5.77-4.07c.56-.4.56-1.24 0-1.63l-5.77-4.07c-.67-.47-1.58 0-1.58.81",
    }),
    "FastForwardRounded",
  ),
  Or = ke(
    e.jsx("path", {
      d: "M11 16.07V7.93c0-.81-.91-1.28-1.58-.82l-5.77 4.07c-.56.4-.56 1.24 0 1.63l5.77 4.07c.67.47 1.58 0 1.58-.81m1.66-3.25 5.77 4.07c.66.47 1.58-.01 1.58-.82V7.93c0-.81-.91-1.28-1.58-.82l-5.77 4.07c-.57.4-.57 1.24 0 1.64",
    }),
    "FastRewindRounded",
  ),
  Wr = ke(e.jsx("path", { d: "M3 18h18v-2H3zm0-5h18v-2H3zm0-7v2h18V6z" }), "Menu"),
  Rr = ke(
    e.jsx("path", {
      d: "M8 19c1.1 0 2-.9 2-2V7c0-1.1-.9-2-2-2s-2 .9-2 2v10c0 1.1.9 2 2 2m6-12v10c0 1.1.9 2 2 2s2-.9 2-2V7c0-1.1-.9-2-2-2s-2 .9-2 2",
    }),
    "PauseRounded",
  ),
  Br = ke(
    e.jsx("path", {
      d: "M8 6.82v10.36c0 .79.87 1.27 1.54.84l8.14-5.18c.62-.39.62-1.29 0-1.69L9.54 5.98C8.87 5.55 8 6.03 8 6.82",
    }),
    "PlayArrowRounded",
  ),
  Hr = ke(
    e.jsx("path", {
      d: "M18.5 12c0-1.77-1.02-3.29-2.5-4.03v8.05c1.48-.73 2.5-2.25 2.5-4.02M5 10v4c0 .55.45 1 1 1h3l3.29 3.29c.63.63 1.71.18 1.71-.71V6.41c0-.89-1.08-1.34-1.71-.71L9 9H6c-.55 0-1 .45-1 1",
    }),
    "VolumeDownRounded",
  ),
  Nr = ke(
    e.jsx("path", {
      d: "M3 10v4c0 .55.45 1 1 1h3l3.29 3.29c.63.63 1.71.18 1.71-.71V6.41c0-.89-1.08-1.34-1.71-.71L7 9H4c-.55 0-1 .45-1 1m13.5 2c0-1.77-1.02-3.29-2.5-4.03v8.05c1.48-.73 2.5-2.25 2.5-4.02M14 4.45v.2c0 .38.25.71.6.85C17.18 6.53 19 9.06 19 12s-1.82 5.47-4.4 6.5c-.36.14-.6.47-.6.85v.2c0 .63.63 1.07 1.21.85C18.6 19.11 21 15.84 21 12s-2.4-7.11-5.79-8.4c-.58-.23-1.21.22-1.21.85",
    }),
    "VolumeUpRounded",
  );
fe.extend(pa);
const Vr = () => {
    const { t } = O(),
      s = N(),
      [i, n] = a.useState(!1),
      [o, p] = a.useState(!1),
      r = C((S) => S.fileManager[0].deleteFileModalOpen),
      l = C((S) => S.fileManager[0].deleteFileModalSelected),
      c = C((S) => S.fileManager[0].deleteFileModalPromiseId),
      d = C((S) => S.fileManager[0].deleteFileModalLoading),
      h = a.useMemo(() => (l ? l.some((S) => S.metadata && S.metadata[W.restore_uri]) : !1), [l]),
      u = a.useCallback(() => {
        var S;
        s(ua({ index: 0, value: [!1, l, void 0, !1] })), c && ((S = Ms[c]) == null || S.reject("cancel"));
      }, [s, l, c]),
      x = l && l.length == 1 && !h && !o,
      f = l && l.length > 1 && !h && !o,
      m = l && l.length == 1 && (h || o),
      g = l && l.length > 1 && (h || o),
      y = a.useCallback(() => {
        var S;
        c && ((S = Ms[c]) == null || S.resolve({ unlink: i, skip_soft_delete: m || g ? !0 : o }));
      }, [c, i, o, m, g]),
      k = te.currentUserGroupPermission(),
      b = !h,
      v = (o || h) && k.enabled(as.advance_delete),
      A = v || b,
      M = a.useMemo(() => te.currentUserGroup(), [r]);
    return e.jsx(re, {
      title: t("application:modals.deleteTitle"),
      showActions: !0,
      loading: d,
      showCancel: !0,
      onAccept: y,
      dialogProps: { open: r ?? !1, onClose: u, fullWidth: !0, maxWidth: "xs" },
      children: e.jsx(oe, {
        children: e.jsxs(ie, {
          spacing: 2,
          children: [
            e.jsxs(Ft, {
              children: [
                (x || m) &&
                  e.jsx($e, {
                    i18nKey: x ? "modals.deleteOneDescription" : "modals.deleteOneDescriptionHard",
                    ns: "application",
                    values: { name: l[0].name },
                    components: [e.jsx("strong", {}, 0)],
                  }),
                (f || g) &&
                  t(
                    f
                      ? "application:modals.deleteMultipleDescription"
                      : "application:modals.deleteMultipleDescriptionHard",
                    { num: l.length },
                  ),
                e.jsx(Re, {
                  in: x || f,
                  children: e.jsx(os, {
                    sx: { mt: 1 },
                    severity: "info",
                    children: e.jsx($e, {
                      i18nKey: "application:modals.trashRetention",
                      ns: "application",
                      values: { num: ha(fe.duration(((M == null ? void 0 : M.trash_retention) ?? 0) * 1e3)) },
                      components: [e.jsx("strong", {}, 0)],
                    }),
                  }),
                }),
              ],
            }),
            A &&
              e.jsx(kn, {
                defaultExpanded: i || o,
                title: t("application:modals.advanceOptions"),
                children: e.jsxs(Gi, {
                  children: [
                    e.jsx(Re, {
                      in: b,
                      children: e.jsx(ae, {
                        title: t("application:modals.skipSoftDeleteDes"),
                        children: e.jsx(St, {
                          control: e.jsx(Ae, { size: "small", onChange: (S) => p(S.target.checked), checked: o }),
                          label: t("application:modals.skipSoftDelete"),
                        }),
                      }),
                    }),
                    e.jsx(Re, {
                      in: v,
                      children: e.jsx(ae, {
                        title: t("application:modals.unlinkOnlyDes"),
                        children: e.jsx(St, {
                          control: e.jsx(Ae, { size: "small", onChange: (S) => n(S.target.checked), checked: i }),
                          label: t("application:modals.unlinkOnly"),
                        }),
                      }),
                    }),
                  ],
                }),
              }),
          ],
        }),
      }),
    });
  },
  Ur = (t) => {
    const { t: s } = O();
    return e.jsx(Ge, {
      component: Je,
      children: e.jsxs(Ke, {
        sx: { width: "100%" },
        size: "small",
        children: [
          e.jsx(pt, {
            children: e.jsxs(je, {
              children: [e.jsx(ue, { children: s("common:object") }), e.jsx(ue, { children: s("common:error") })],
            }),
          }),
          e.jsx(ut, {
            children: Object.keys(t.errors).map((i) =>
              e.jsxs(
                je,
                {
                  hover: !0,
                  sx: { "&:last-child td, &:last-child th": { border: 0 } },
                  children: [
                    e.jsxs(ue, {
                      component: "th",
                      scope: "row",
                      children: [
                        t.files[i] && e.jsx(wt, { sx: { maxWidth: "250px" }, file: t.files[i] }),
                        !t.files[i] && !i.startsWith(As) && i,
                        !t.files[i] &&
                          i.startsWith(As) &&
                          e.jsx(wt, { sx: { maxWidth: "250px" }, simplifiedFile: { type: Se.file, path: i } }),
                      ],
                    }),
                    e.jsx(ue, { children: t.errors[i].message }),
                  ],
                },
                i,
              ),
            ),
          }),
        ],
      }),
    });
  },
  $r = () => {
    const { t } = O(),
      s = N(),
      i = C((c) => c.globalState.aggregatedErrorDialogOpen),
      n = C((c) => c.globalState.aggregatedErrorFile),
      o = C((c) => c.globalState.aggregatedError),
      p = a.useCallback(() => {
        s(xa());
      }, [s]),
      [r, l] = a.useMemo(() => {
        if (!o) return [void 0, void 0];
        let c = new _s(o);
        const d = {};
        return (
          Object.keys(o.aggregated_error ?? {}).forEach((h) => {
            var x;
            const u = (x = o.aggregated_error) == null ? void 0 : x[h];
            u && (d[h] = new _s(u));
          }),
          [c, d]
        );
      }, [o]);
    return e.jsx(re, {
      title: t("application:modals.errorDetailsTitle"),
      dialogProps: { open: i ?? !1, onClose: p, fullWidth: !0, maxWidth: "sm" },
      children: e.jsx(oe, {
        children: e.jsxs(ie, {
          spacing: 2,
          children: [
            e.jsx(Ft, { children: r && r.message }),
            n && l && e.jsx(Ur, { errors: l, files: n }),
            r &&
              r.cid &&
              e.jsx(ma, {
                variant: "caption",
                children: e.jsx("code", { children: t("common:requestID", { id: r.cid }) }),
              }),
          ],
        }),
      }),
    });
  },
  qr = () => {
    const { t } = O(),
      s = N(),
      [i, n] = a.useState(""),
      o = a.useRef(null),
      p = a.useRef(null);
    a.useContext(fa);
    const r = C((g) => g.fileManager[0].renameFileModalOpen),
      l = C((g) => g.fileManager[0].renameFileModalSelected),
      c = C((g) => g.fileManager[0].renameFileModalPromiseId),
      d = C((g) => g.fileManager[0].renameFileModalLoading),
      h = C((g) => g.fileManager[0].renameFileModalError),
      u = a.useCallback(() => {
        var g;
        s(ga({ index: 0, value: void 0 })), c && ((g = Ds[c]) == null || g.reject("cancel"));
      }, [s, l, c]),
      x = a.useCallback(
        (g) => {
          var y;
          g && g.preventDefault(), c && s(ja(0, (y = Ds[c]) == null ? void 0 : y.resolve, i));
        },
        [c, i],
      ),
      f = a.useCallback(() => {
        o.current && o.current.reportValidity() && x();
      }, [o, x]);
    a.useEffect(() => {
      l && r && n(l.name);
    }, [l, r]),
      a.useEffect(() => {
        if (l && r && p.current) {
          const g = l.type == Se.folder ? 0 : l.name.lastIndexOf(".");
          p.current.setSelectionRange(0, g > 0 ? g : l.name.length);
        }
      }, [p.current, r]);
    const m = a.useCallback(
      (g) => {
        n(g.target.value), h && s(Cn({ index: 0, value: void 0 }));
      },
      [s, n, h],
    );
    return e.jsx(re, {
      title: t("application:fileManager.rename"),
      showActions: !0,
      loading: d,
      showCancel: !0,
      onAccept: f,
      dialogProps: { open: r ?? !1, onClose: u, fullWidth: !0, maxWidth: "sm", disableRestoreFocus: !0 },
      children: e.jsx(oe, {
        children: e.jsxs(ie, {
          spacing: 2,
          children: [
            e.jsx(Ft, {
              children: e.jsx($e, {
                i18nKey: "modals.renameDescription",
                ns: "application",
                values: { name: l == null ? void 0 : l.name },
                components: [e.jsx("strong", {}, 0)],
              }),
            }),
            e.jsx("form", {
              ref: o,
              onSubmit: x,
              children: e.jsx(Ue, {
                inputRef: p,
                variant: "filled",
                autoFocus: !0,
                error: !!h,
                helperText: h,
                margin: "dense",
                label: t("application:modals.newName"),
                type: "text",
                value: i,
                onChange: m,
                fullWidth: !0,
                required: !0,
              }),
            }),
          ],
        }),
      }),
    });
  };
function sn(t) {
  const { children: s, value: i, index: n, ...o } = t;
  return e.jsx("div", {
    role: "tabpanel",
    hidden: i !== n,
    id: `simple-tabpanel-${n}`,
    "aria-labelledby": `simple-tab-${n}`,
    ...o,
    children: i === n && s,
  });
}
const nn = U(ba)(({ theme: t }) => ({
    minWidth: 0,
    minHeight: 0,
    fontSize: t.typography.h6.fontSize,
    padding: "8px 10px",
  })),
  an = U(Pe)(({ theme: t }) => ({ minWidth: 0, padding: "0px 4px", fontSize: t.typography.h6.fontSize })),
  on = U(F)({ display: "flex", flexWrap: "wrap" }),
  Gr = () => {
    const { t } = O(),
      s = N();
    X();
    const [i, n] = a.useState(0),
      [o, p] = a.useState(!1),
      r = C((m) => m.globalState.changeIconDialogOpen),
      l = C((m) => m.globalState.changeIconDialogFile),
      c = C((m) => m.siteConfig.emojis.config.emoji_preset),
      d = C((m) => m.siteConfig.emojis.loaded),
      h = a.useMemo(() => {
        if (!c) return {};
        try {
          return JSON.parse(c);
        } catch (m) {
          console.warn("failed to parse emoji setting", m);
        }
        return {};
      }, [c]),
      u = (m, g) => {
        n(g);
      };
    a.useEffect(() => {
      r && d != ya.Loaded && s(va("emojis"));
    }, [r]);
    const x = a.useCallback(() => {
        o || s(zs());
      }, [s, o]),
      f = a.useCallback(
        (m) => async (g) => {
          if ((g && g.preventDefault(), !!l)) {
            p(!0);
            try {
              await s(ka(ne.main, l, m));
            } catch {
            } finally {
              p(!1), s(zs());
            }
          }
        },
        [s, l, p],
      );
    return e.jsx(re, {
      title: t("application:fileManager.customizeIcon"),
      showActions: !0,
      loading: o,
      showCancel: !0,
      hideOk: !0,
      dialogProps: { open: r ?? !1, onClose: x, fullWidth: !0, maxWidth: "sm" },
      secondaryAction: e.jsx(Tt, {
        onClick: f(),
        loading: o,
        color: "primary",
        children: e.jsx("span", { children: t("application:modals.resetToDefault") }),
      }),
      children: e.jsx(oe, {
        children: e.jsx(Fe, {
          children: e.jsxs(F, {
            sx: { width: "100%" },
            children: [
              e.jsx(F, {
                sx: { borderBottom: 1, borderColor: "divider" },
                children: e.jsx(Ca, {
                  sx: { minHeight: 0 },
                  value: i,
                  variant: "scrollable",
                  scrollButtons: "auto",
                  onChange: u,
                  children: d
                    ? Object.keys(h).map((m) => e.jsx(nn, { label: m }, m))
                    : e.jsx(nn, { label: e.jsx(_e, { sx: { minWidth: "20px" } }) }),
                }),
              }),
              e.jsx(F, {
                sx: { maxHeight: "200px", overflowY: "auto" },
                children: d
                  ? Object.keys(h).map((m, g) =>
                      e.jsx(sn, {
                        value: i,
                        index: g,
                        children: e.jsx(on, { children: h[m].map((y) => e.jsx(an, { onClick: f(y), children: y })) }),
                      }),
                    )
                  : e.jsx(sn, {
                      value: i,
                      index: 0,
                      children: e.jsx(on, {
                        children: [...Array(50).keys()].map(() =>
                          e.jsx(an, { disabled: !0, children: e.jsx(_e, { sx: { minWidth: "20px" } }) }),
                        ),
                      }),
                    }),
              }),
            ],
          }),
        }),
      }),
    });
  };
function Jr(t) {
  return e.jsx(he, {
    ...t,
    children: e.jsx("path", {
      d: "M13.25 7a1 1 0 1 1-2 0a1 1 0 0 1 2 0M11.5 9.75v5a.75.75 0 0 0 1.5 0v-5a.75.75 0 0 0-1.5 0M4 4.5A2.5 2.5 0 0 1 6.5 2H18a2.5 2.5 0 0 1 2.5 2.5v14.25a.75.75 0 0 1-.75.75H5.5a1 1 0 0 0 1 1h13.25a.75.75 0 0 1 0 1.5H6.5A2.5 2.5 0 0 1 4 19.5zM19 18V4.5a1 1 0 0 0-1-1H6.5a1 1 0 0 0-1 1V18z",
    }),
  });
}
const Kr = ke(
    e.jsx("path", {
      d: "M4.5 11a8.5 8.5 0 1 1 8.188 8.494a6.47 6.47 0 0 1-.68 1.457c.327.033.658.049.992.049c5.523 0 10-4.477 10-10S18.523 1 13 1S3 5.477 3 11c0 .334.016.665.048.991a6.51 6.51 0 0 1 1.458-.68A8.65 8.65 0 0 1 4.5 11m8.493-5.352a.75.75 0 0 0-1.493.102v6l.007.102a.75.75 0 0 0 .743.648h4l.102-.007A.75.75 0 0 0 16.25 11H13V5.75zM1 17.5a5.5 5.5 0 0 1 5-5.477v5.77l-1.646-1.647a.5.5 0 0 0-.708.708l2.5 2.5a.5.5 0 0 0 .708 0l2.5-2.5a.5.5 0 0 0-.708-.708L7 17.793v-5.77A5.5 5.5 0 1 1 1 17.5m8.5 3A.5.5 0 0 0 9 20H4a.5.5 0 0 0 0 1h5a.5.5 0 0 0 .5-.5",
    }),
    "ClockArrowDownload",
  ),
  Xe = U(is)(() => ({
    border: "0px solid rgba(0, 0, 0, .125)",
    boxShadow: "none",
    "&:not(:last-child)": { borderBottom: 0 },
    "&:before": { display: "none" },
    ".Mui-expanded": { margin: "0 0", minHeight: 0 },
    "&.Mui-expanded": { margin: "0 0", minHeight: 0 },
  })),
  et = U(Sn)(({ theme: t }) => ({
    padding: 0,
    "& .MuiAccordionSummary-content": { margin: 0, display: "initial", "&.Mui-expanded": { margin: "0 0" } },
    "&.Mui-expanded": {
      borderRadius: "12px 12px 0 0",
      backgroundColor: t.palette.mode == "light" ? "rgba(0, 0, 0, 0.06)" : "rgba(255, 255, 255, 0.09)",
      minHeight: "0px!important",
    },
  })),
  tt = U(rs)(({ theme: t }) => ({
    padding: 24,
    backgroundColor: t.palette.mode == "light" ? "rgba(0, 0, 0, 0.06)" : "rgba(255, 255, 255, 0.09)",
    borderRadius: "0 0 12px 12px",
    fontSize: t.typography.body2.fontSize,
    color: t.palette.text.secondary,
  })),
  st = U(wn)(() => ({})),
  ks = [
    { value: 300, label: "modals.5minutes" },
    { value: 3600, label: "modals.1hour" },
    { value: 24 * 3600, label: "modals.1day" },
    { value: 7 * 24 * 3600, label: "modals.7days" },
    { value: 30 * 24 * 3600, label: "modals.30days" },
  ],
  Cs = [
    { value: 1, label: "1" },
    { value: 2, label: "2" },
    { value: 3, label: "3" },
    { value: 4, label: "4" },
    { value: 5, label: "5" },
    { value: 20, label: "20" },
    { value: 50, label: "50" },
    { value: 100, label: "100" },
  ],
  rn = (t) => (typeof t == "number" || (typeof t == "string" && t.trim() !== "")) && !isNaN(t),
  ln = Aa(),
  Zr = ({ setting: t, file: s, editing: i, onSettingChange: n }) => {
    const { t: o } = O(),
      [p, r] = a.useState(void 0),
      l = (d) => (h, u) => {
        r(u ? d : void 0);
      },
      c = (d) => () => {
        t[d] || l(d)(null, !0), n({ ...t, [d]: !t[d] });
      };
    return e.jsxs(Sa, {
      sx: { padding: 0 },
      children: [
        e.jsxs(Xe, {
          expanded: p === "is_private",
          onChange: l("is_private"),
          children: [
            e.jsx(et, {
              "aria-controls": "panel1a-content",
              id: "panel1a-header",
              children: e.jsxs(st, {
                children: [
                  e.jsx(pe, { children: e.jsx(wa, {}) }),
                  e.jsx(Y, { primary: o("application:modals.privateShare") }),
                  e.jsx(Ye, {
                    children: e.jsx(Ae, { disabled: i, checked: !!t.is_private, onChange: c("is_private") }),
                  }),
                ],
              }),
            }),
            e.jsxs(tt, {
              sx: { display: "flex", flexDirection: "column", alignItems: "center" },
              children: [
                e.jsx(ee, { variant: "body2", children: o("application:modals.privateShareDes") }),
                t.is_private &&
                  e.jsxs(ie, {
                    sx: { mt: 1, width: "100%" },
                    children: [
                      !i &&
                        e.jsx(St, {
                          control: e.jsx(Ae, {
                            size: "small",
                            checked: t.use_custom_password,
                            onChange: () => {
                              n({ ...t, use_custom_password: !t.use_custom_password });
                            },
                          }),
                          label: o("application:modals.useCustomPassword"),
                        }),
                      e.jsx(Re, {
                        in: t.use_custom_password,
                        children: e.jsx(Ve, {
                          variant: "standard",
                          fullWidth: !0,
                          sx: { mt: 1 },
                          children: e.jsx(Ue, {
                            label: o("application:modals.sharePassword"),
                            disabled: i,
                            slotProps: { htmlInput: { maxLength: 32 } },
                            value: t.password ?? "",
                            onChange: (d) => {
                              const h = d.target.value.trim();
                              !/^[a-zA-Z0-9]*$/.test(h) || h.length > 32 || n({ ...t, password: h });
                            },
                            required: !0,
                          }),
                        }),
                      }),
                    ],
                  }),
              ],
            }),
          ],
        }),
        (s == null ? void 0 : s.type) == Se.folder &&
          e.jsxs(e.Fragment, {
            children: [
              e.jsxs(Xe, {
                expanded: p === "share_view",
                onChange: l("share_view"),
                children: [
                  e.jsx(et, {
                    "aria-controls": "panel1a-content",
                    id: "panel1a-header",
                    children: e.jsxs(st, {
                      children: [
                        e.jsx(pe, { children: e.jsx(Ma, {}) }),
                        e.jsx(Y, { primary: o("application:modals.shareView") }),
                        e.jsx(Ye, { children: e.jsx(Ae, { checked: t.share_view, onChange: c("share_view") }) }),
                      ],
                    }),
                  }),
                  e.jsx(tt, { children: o("application:modals.shareViewDes") }),
                ],
              }),
              e.jsxs(Xe, {
                expanded: p === "show_readme",
                onChange: l("show_readme"),
                children: [
                  e.jsx(et, {
                    "aria-controls": "panel1a-content",
                    id: "panel1a-header",
                    children: e.jsxs(st, {
                      children: [
                        e.jsx(pe, { children: e.jsx(Jr, {}) }),
                        e.jsx(Y, { primary: o("application:modals.showReadme") }),
                        e.jsx(Ye, { children: e.jsx(Ae, { checked: t.show_readme, onChange: c("show_readme") }) }),
                      ],
                    }),
                  }),
                  e.jsx(tt, {
                    children: e.jsx($e, { i18nKey: "application:modals.showReadmeDes", components: [e.jsx(Ji, {})] }),
                  }),
                ],
              }),
            ],
          }),
        e.jsxs(Xe, {
          expanded: p === "expires",
          onChange: l("expires"),
          children: [
            e.jsx(et, {
              "aria-controls": "panel1a-content",
              id: "panel1a-header",
              children: e.jsxs(st, {
                children: [
                  e.jsx(pe, { children: e.jsx(_a, {}) }),
                  e.jsx(Y, { primary: o("modals.expireAutomatically") }),
                  e.jsx(Ye, { children: e.jsx(Ae, { checked: t.expires, onChange: c("expires") }) }),
                ],
              }),
            }),
            e.jsxs(tt, {
              sx: { display: "flex", alignItems: "center" },
              children: [
                e.jsx(ee, { children: o("application:modals.expirePrefix") }),
                e.jsx(Ve, {
                  variant: "standard",
                  style: { marginRight: 10, marginLeft: 10 },
                  children: e.jsx(Ps, {
                    value: t.expires_val,
                    filterOptions: (d, h) => {
                      const u = ln(d, h),
                        { inputValue: x } = h,
                        f = parseInt(x) * 60;
                      return (
                        x !== "" &&
                          rn(x) &&
                          parseInt(x) > 0 &&
                          f != 300 &&
                          u.push({ inputValue: x, value: f, label: x + " " + o("application:modals.minutes") }),
                        u
                      );
                    },
                    onChange: (d, h) => {
                      let u = 0,
                        x = "";
                      typeof h == "string"
                        ? ((u = parseInt(h)), (x = h + " " + o("application:modals.minutes")))
                        : ((u = (h == null ? void 0 : h.value) ?? 0), (x = (h == null ? void 0 : h.label) ?? "")),
                        n({ ...t, expires_val: { value: u, label: x } });
                    },
                    freeSolo: !0,
                    getOptionLabel: (d) => (typeof d == "string" ? d : o(d.label)),
                    disableClearable: !0,
                    options: ks,
                    renderInput: (d) => e.jsx(Mt, { sx: { width: 150 }, ...d, variant: "standard" }),
                  }),
                }),
                e.jsx(ee, { children: o("application:modals.expireSuffix") }),
              ],
            }),
          ],
        }),
        (s == null ? void 0 : s.type) == Se.file &&
          e.jsxs(Xe, {
            expanded: p === "downloads",
            onChange: l("downloads"),
            children: [
              e.jsx(et, {
                "aria-controls": "panel1a-content",
                id: "panel1a-header",
                children: e.jsxs(st, {
                  children: [
                    e.jsx(pe, { children: e.jsx(Kr, {}) }),
                    e.jsx(Y, { primary: o("application:modals.expireAfterDownload") }),
                    e.jsx(Ye, { children: e.jsx(Ae, { checked: t.downloads, onChange: c("downloads") }) }),
                  ],
                }),
              }),
              e.jsxs(tt, {
                sx: { display: "flex", alignItems: "center" },
                children: [
                  e.jsx(ee, { children: o("application:modals.expirePrefix") }),
                  e.jsx(Ve, {
                    variant: "standard",
                    style: { marginRight: 10, marginLeft: 10 },
                    children: e.jsx(Ps, {
                      value: t.downloads_val,
                      filterOptions: (d, h) => {
                        const u = ln(d, h),
                          { inputValue: x } = h,
                          f = parseInt(x);
                        return (
                          x !== "" &&
                            rn(x) &&
                            parseInt(x) > 0 &&
                            !u.find((m) => m.value == f) &&
                            u.push({ inputValue: x, value: f, label: x }),
                          u
                        );
                      },
                      onChange: (d, h) => {
                        let u = 0,
                          x = "";
                        typeof h == "string"
                          ? ((u = parseInt(h)), (x = h))
                          : ((u = (h == null ? void 0 : h.value) ?? 0), (x = (h == null ? void 0 : h.label) ?? "")),
                          n({ ...t, downloads_val: { value: u, label: x } });
                      },
                      freeSolo: !0,
                      getOptionLabel: (d) =>
                        typeof d == "string" ? d : o("application:modals.downloadLimitOptions", { num: d.label }),
                      disableClearable: !0,
                      options: Cs,
                      renderInput: (d) => e.jsx(Mt, { sx: { width: 200 }, ...d, variant: "standard" }),
                    }),
                  }),
                  e.jsx(ee, { children: o("application:modals.expireSuffix") }),
                ],
              }),
            ],
          }),
      ],
    });
  },
  cn = { expires_val: ks[2], downloads_val: Cs[0] },
  Yr = (t, s) => {
    const i = {
      is_private: t.is_private,
      password: t.password,
      use_custom_password: !0,
      share_view: t.share_view,
      show_readme: t.show_readme,
      downloads: t.remain_downloads != null && t.remain_downloads > 0,
      expires_val: ks[2],
      downloads_val: Cs[0],
    };
    if (
      (i.downloads &&
        (i.downloads_val = { value: t.remain_downloads ?? 0, label: (t.remain_downloads ?? 0).toString() }),
      t.expires != null)
    )
      if (fe(t.expires).isBefore(fe())) i.expires = !1;
      else {
        i.expires = !0;
        const p = fe(t.expires).diff(fe(), "second");
        i.expires_val = { value: p, label: Math.round(p / 60) + " " + s("application:modals.minutes") };
      }
    return i;
  },
  Qr = () => {
    const { t } = O(),
      s = N();
    X();
    const [i, n] = a.useState(!1),
      [o, p] = a.useState(cn),
      [r, l] = a.useState(""),
      [c, d] = a.useState(!0),
      h = a.useMemo(() => {
        const b = r.lastIndexOf("/s/"),
          v = r.substring(b + 3).split("/"),
          A = v.length == 2 ? v[1] : void 0;
        return { shareLink: A ? r.substring(0, r.lastIndexOf("/")) : r, password: A };
      }, [r]),
      u = C((b) => b.globalState.shareLinkDialogOpen),
      x = C((b) => b.globalState.shareLinkDialogFile),
      f = C((b) => b.globalState.shareLinkDialogShare);
    a.useEffect(() => {
      u && (p(f ? Yr(f, t) : cn), l(""), d(!0));
    }, [u]);
    const m = a.useCallback(() => {
        i || s(Da());
      }, [s, i]),
      g = a.useCallback(
        async (b) => {
          if ((b && b.preventDefault(), !!x)) {
            if (r) {
              vt(r);
              return;
            }
            n(!0);
            try {
              const v = await s(za(ne.main, x, o, f == null ? void 0 : f.id));
              l(v);
            } catch {
            } finally {
              n(!1);
            }
          }
        },
        [s, x, r, f, n, o, l],
      ),
      y = a.useMemo(() => (c ? r : r.substring(0, r.lastIndexOf("/"))), [c, r]),
      k = a.useMemo(() => {
        if (!c) return r.substring(r.lastIndexOf("/") + 1);
      }, [c, r]);
    return e.jsx(e.Fragment, {
      children: e.jsx(re, {
        title: t(`application:modals.${f ? "edit" : "create"}ShareLink`),
        showActions: !0,
        loading: i,
        showCancel: !0,
        hideOk: !!r,
        onAccept: g,
        dialogProps: { open: u ?? !1, onClose: m, fullWidth: !0, maxWidth: "xs" },
        cancelText: r ? t("common:close") : void 0,
        secondaryAction: r
          ? navigator.share &&
            e.jsx(ae, {
              title: t("application:modals.sendLink"),
              children: e.jsx(J, {
                onClick: () => Pa((x == null ? void 0 : x.name) ?? "", y),
                children: e.jsx(Qi, {}),
              }),
            })
          : void 0,
        children: e.jsx(oe, {
          sx: { pb: 0 },
          children: e.jsx(Fe, {
            children: e.jsx(bs, {
              children: e.jsx(
                ys,
                {
                  addEndListener: (b, v) => b.addEventListener("transitionend", v, !1),
                  classNames: "fade",
                  children: e.jsxs(F, {
                    children: [
                      !r && e.jsx(Zr, { editing: !!f, onSettingChange: p, setting: o, file: x }),
                      r &&
                        e.jsxs(ie, {
                          spacing: 1,
                          children: [
                            e.jsx(Ue, {
                              variant: "filled",
                              inputProps: { readonly: !0 },
                              label: t("modals.shareLink"),
                              fullWidth: !0,
                              value: y ?? "",
                              onFocus: (b) => b.target.select(),
                              slotProps: {
                                input: {
                                  endAdornment: e.jsx(J, {
                                    onClick: () => vt(y),
                                    size: "small",
                                    sx: { marginRight: -1 },
                                    children: e.jsx(_t, {}),
                                  }),
                                },
                              },
                            }),
                            h.password &&
                              e.jsxs(e.Fragment, {
                                children: [
                                  e.jsx(Re, {
                                    in: !c,
                                    children: e.jsx(Ue, {
                                      variant: "filled",
                                      inputProps: { readonly: !0 },
                                      label: t("modals.sharePassword"),
                                      fullWidth: !0,
                                      value: k ?? "",
                                      onFocus: (b) => b.target.select(),
                                      slotProps: {
                                        input: {
                                          endAdornment: e.jsx(J, {
                                            onClick: () => vt(k ?? ""),
                                            size: "small",
                                            sx: { marginRight: -1 },
                                            children: e.jsx(_t, {}),
                                          }),
                                        },
                                      },
                                    }),
                                  }),
                                  e.jsx(ae, {
                                    enterDelay: 100,
                                    title: t("application:modals.includePasswordInShareLinkDes"),
                                    children: e.jsx(St, {
                                      sx: { mt: "0!important" },
                                      control: e.jsx(Ae, {
                                        disableRipple: !0,
                                        sx: { pl: 0 },
                                        size: "small",
                                        checked: c,
                                        onChange: () => {
                                          d(!c);
                                        },
                                      }),
                                      label: t("application:modals.includePasswordInShareLink"),
                                    }),
                                  }),
                                ],
                              }),
                          ],
                        }),
                    ],
                  }),
                },
                `${r}`,
              ),
            }),
          }),
        }),
      }),
    });
  },
  Xr = () => {
    var I, V;
    const { t } = O(),
      s = N(),
      [i, n] = a.useState(null),
      [o, p] = a.useState(null),
      [r, l] = a.useState(void 0),
      [c, d] = a.useState(!1),
      h = C((P) => P.globalState.versionControlDialogOpen),
      u = C((P) => P.globalState.versionControlDialogFile),
      x = C((P) => P.globalState.versionControlHighlight),
      f = C((P) => {
        var D, z, T;
        return (T = (z = (D = P.siteConfig) == null ? void 0 : D.explorer) == null ? void 0 : z.config) == null
          ? void 0
          : T.show_encryption_status;
      }),
      m = a.useCallback(() => {
        c || s(La());
      }, [s, c]);
    a.useEffect(() => {
      u && h && (l(void 0), s(It({ uri: u.path, extended: !0 })).then((P) => l(P)));
    }, [u, h]);
    const g = a.useMemo(() => {
        var P, D;
        return (D = (P = r == null ? void 0 : r.extended_info) == null ? void 0 : P.entities) == null
          ? void 0
          : D.filter((z) => z.type == Fa.version);
      }, [(I = r == null ? void 0 : r.extended_info) == null ? void 0 : I.entities]),
      y = a.useMemo(
        () => x && (r == null ? void 0 : r.extended_info) && !(g != null && g.some((P) => P.id == x)),
        [x, (V = r == null ? void 0 : r.extended_info) == null ? void 0 : V.entities],
      ),
      k = () => {
        n(null);
      },
      b = (P, D) => {
        n(P.currentTarget), p(D);
      },
      v = a.useCallback(() => {
        !u || !o || (s(Ta(u, o.id)), n(null));
      }, [u, o, s]),
      A = a.useCallback(() => {
        !u || !o || (s(Mn(ne.main, u, o.size, o.id)), n(null));
      }, [u, o, s]),
      M = a.useCallback(() => {
        !u ||
          !o ||
          (d(!0),
          s(Ia(ne.main, u, o.id))
            .then(() => {
              l((P) => (P ? { ...P, primary_entity: o.id } : void 0));
            })
            .finally(() => {
              d(!1);
            }),
          n(null));
      }, [u, o, d, s]),
      S = a.useCallback(() => {
        !u ||
          !o ||
          (s(ls(t("fileManager.deleteVersionWarning"))).then(() => {
            d(!0),
              s(Ea({ uri: u.path, version: o.id }))
                .then(() => {
                  l((P) => {
                    var D;
                    return P
                      ? {
                          ...P,
                          extended_info: P.extended_info
                            ? {
                                ...P.extended_info,
                                entities:
                                  (D = P.extended_info.entities) == null ? void 0 : D.filter((z) => z.id !== o.id),
                              }
                            : void 0,
                        }
                      : void 0;
                  });
                })
                .finally(() => {
                  d(!1);
                });
          }),
          n(null));
      }, [t, u, o, d, s]);
    return e.jsxs(e.Fragment, {
      children: [
        e.jsxs(be, {
          anchorEl: i,
          open: !!i,
          onClose: k,
          slotProps: { paper: { sx: { minWidth: 150 } } },
          children: [
            e.jsx(Q, { onClick: A, dense: !0, children: e.jsx(Y, { children: t("application:fileManager.open") }) }),
            e.jsx(Q, {
              onClick: v,
              dense: !0,
              children: e.jsx(Y, { children: t("application:fileManager.download") }),
            }),
            (u == null ? void 0 : u.owned) &&
              (o == null ? void 0 : o.id) !== (r == null ? void 0 : r.primary_entity) &&
              e.jsx(Q, {
                onClick: M,
                dense: !0,
                children: e.jsx(Y, { children: t("application:fileManager.setAsCurrent") }),
              }),
            (u == null ? void 0 : u.owned) &&
              (o == null ? void 0 : o.id) !== (r == null ? void 0 : r.primary_entity) &&
              e.jsx(Q, {
                onClick: S,
                dense: !0,
                children: e.jsx(Y, { children: t("application:fileManager.delete") }),
              }),
          ],
        }),
        e.jsx(re, {
          title: t("application:fileManager.manageVersions"),
          loading: c,
          dialogProps: { open: h ?? !1, onClose: m, fullWidth: !0, maxWidth: "sm" },
          children: e.jsx(oe, {
            children: e.jsxs(Fe, {
              children: [
                y &&
                  e.jsx(os, {
                    severity: "warning",
                    sx: { mb: 2 },
                    children: t("application:fileManager.versionNotFound"),
                  }),
                e.jsxs(Ge, {
                  component: Je,
                  children: [
                    e.jsxs(Ke, {
                      sx: { width: "100%" },
                      size: "small",
                      children: [
                        e.jsx(pt, {
                          children: e.jsxs(je, {
                            children: [
                              e.jsx(G, { children: t("fileManager.actions") }),
                              e.jsx(G, { children: t("fileManager.createdAt") }),
                              e.jsx(G, { children: t("fileManager.size") }),
                              e.jsx(G, { children: t("fileManager.createdBy") }),
                              e.jsx(G, { children: t("application:fileManager.storagePolicy") }),
                              f && e.jsx(G, { children: t("application:fileManager.encryption") }),
                            ],
                          }),
                        }),
                        e.jsxs(ut, {
                          children: [
                            !r &&
                              e.jsxs(je, {
                                hover: !0,
                                sx: { "&:last-child td, &:last-child th": { border: 0 } },
                                children: [
                                  e.jsx(G, {
                                    component: "th",
                                    scope: "row",
                                    children: e.jsx(_e, { variant: "text", width: 100 }),
                                  }),
                                  e.jsx(G, { children: e.jsx(_e, { variant: "text", width: 30 }) }),
                                ],
                              }),
                            g &&
                              g.map((P) => {
                                var D;
                                return e.jsxs(je, {
                                  selected: P.id === (r == null ? void 0 : r.primary_entity),
                                  sx: {
                                    boxShadow: (z) =>
                                      x == P.id ? `inset 0 0 0 2px ${z.palette.primary.light}` : "none",
                                    "&:last-child td, &:last-child th": { border: 0 },
                                  },
                                  hover: !0,
                                  children: [
                                    e.jsx(G, {
                                      component: "th",
                                      scope: "row",
                                      children: e.jsx(J, {
                                        disabled: c,
                                        onClick: (z) => b(z, P),
                                        size: "small",
                                        children: e.jsx(_n, { fontSize: "small" }),
                                      }),
                                    }),
                                    e.jsx(G, { children: e.jsx(Et, { variant: "body2", datetime: P.created_at }) }),
                                    e.jsx(G, { children: ze(P.size) }),
                                    e.jsx(ue, {
                                      children: e.jsx(Oa, {
                                        sx: { width: 20, height: 20 },
                                        textProps: { variant: "body2" },
                                        user: P.created_by ?? Wa,
                                      }),
                                    }),
                                    e.jsx(G, { children: (D = P.storage_policy) == null ? void 0 : D.name }),
                                    f &&
                                      e.jsx(G, {
                                        children: e.jsx(Ra, {
                                          flexWrap: !1,
                                          status: {
                                            status: P.encrypted_with ? "full" : "none",
                                            cipher: P.encrypted_with ? [P.encrypted_with] : [],
                                          },
                                        }),
                                      }),
                                  ],
                                });
                              }),
                          ],
                        }),
                      ],
                    }),
                    !g &&
                      r &&
                      e.jsx(F, {
                        sx: { p: 1, width: "100%", textAlign: "center" },
                        children: e.jsx(ee, {
                          variant: "caption",
                          color: "text.secondary",
                          children: t("application:setting.listEmpty"),
                        }),
                      }),
                  ],
                }),
              ],
            }),
          }),
        }),
      ],
    });
  },
  el = () => {
    var b, v, A;
    const { t } = O(),
      s = N(),
      [i, n] = a.useState(null),
      [o, p] = a.useState(null),
      [r, l] = a.useState(void 0),
      [c, d] = a.useState(!1),
      h = C((M) => M.globalState.manageShareDialogOpen),
      u = C((M) => M.globalState.manageShareDialogFile),
      x = a.useCallback(() => {
        c || s(Ba());
      }, [s, c]);
    a.useEffect(() => {
      u && h && (u.extended_info ? l(u) : (l(void 0), s(It({ uri: u.path, extended: !0 })).then((M) => l(M))));
    }, [u, h]);
    const f = () => {
        n(null);
      },
      m = (M, S) => {
        M.stopPropagation(), n(M.currentTarget), p(S);
      },
      g = () => {
        s(Ua({ open: !0, file: u, share: o ?? void 0 })), n(null);
      },
      y = a.useCallback((M) => {
        window.open(M.url, "_blank");
      }, []),
      k = a.useCallback(() => {
        !u ||
          !o ||
          (s(ls(t("fileManager.deleteShareWarning"))).then(() => {
            d(!0),
              s(Ha(o.id))
                .then(() => {
                  l((M) => {
                    var S;
                    return M
                      ? {
                          ...M,
                          extended_info: M.extended_info
                            ? {
                                ...M.extended_info,
                                shares: (S = M.extended_info.shares) == null ? void 0 : S.filter((I) => I.id !== o.id),
                              }
                            : void 0,
                        }
                      : void 0;
                  });
                })
                .finally(() => {
                  d(!1);
                });
          }),
          n(null));
      }, [t, u, o, d, s]);
    return e.jsxs(e.Fragment, {
      children: [
        e.jsxs(be, {
          anchorEl: i,
          open: !!i,
          onClose: f,
          slotProps: { paper: { sx: { minWidth: 150 } } },
          children: [
            e.jsx(Q, {
              dense: !0,
              children: e.jsx(Y, {
                onClick: g,
                children: t(`fileManager.${o != null && o.expired ? "editAndReactivate" : "edit"}`),
              }),
            }),
            e.jsx(Q, { dense: !0, children: e.jsx(Y, { onClick: k, children: t("fileManager.delete") }) }),
          ],
        }),
        e.jsx(re, {
          title: t("application:fileManager.manageShares"),
          loading: c,
          dialogProps: { open: h ?? !1, onClose: x, fullWidth: !0, maxWidth: "md" },
          children: e.jsx(oe, {
            children: e.jsx(Fe, {
              children: e.jsxs(Ge, {
                component: Je,
                children: [
                  e.jsxs(Ke, {
                    sx: { width: "100%" },
                    size: "small",
                    children: [
                      e.jsx(pt, {
                        children: e.jsxs(je, {
                          children: [
                            e.jsx(G, { children: t("fileManager.actions") }),
                            e.jsx(G, { children: t("fileManager.createdAt") }),
                            e.jsx(G, { children: t("fileManager.expires") }),
                            e.jsx(G, { children: t("application:share.statistics") }),
                            e.jsx(G, { children: t("modals.privateShare") }),
                          ],
                        }),
                      }),
                      e.jsxs(ut, {
                        children: [
                          !r &&
                            e.jsxs(je, {
                              hover: !0,
                              sx: { "&:last-child td, &:last-child th": { border: 0 } },
                              children: [
                                e.jsx(G, {
                                  component: "th",
                                  scope: "row",
                                  children: e.jsx(_e, { variant: "text", width: 100 }),
                                }),
                                e.jsx(G, { children: e.jsx(_e, { variant: "text", width: 30 }) }),
                              ],
                            }),
                          ((b = r == null ? void 0 : r.extended_info) == null ? void 0 : b.shares) &&
                            ((v = r == null ? void 0 : r.extended_info) == null
                              ? void 0
                              : v.shares.map((M) =>
                                  e.jsxs(je, {
                                    sx: {
                                      "&:last-child td, &:last-child th": { border: 0 },
                                      cursor: "pointer",
                                      td: { color: (S) => (M.expired ? S.palette.text.disabled : void 0) },
                                    },
                                    onClick: () => y(M),
                                    hover: !0,
                                    children: [
                                      e.jsx(G, {
                                        component: "th",
                                        scope: "row",
                                        children: e.jsx(J, {
                                          disabled: c,
                                          onClick: (S) => m(S, M),
                                          size: "small",
                                          children: e.jsx(_n, { fontSize: "small" }),
                                        }),
                                      }),
                                      e.jsx(G, {
                                        children: e.jsx(Et, { variant: "body2", datetime: M.created_at ?? "" }),
                                      }),
                                      e.jsx(ue, {
                                        children: M.expired
                                          ? t("application:share.expired")
                                          : e.jsx(e.Fragment, {
                                              children:
                                                M.remain_downloads != null || M.expires
                                                  ? e.jsx(Na, {
                                                      expires: M.expires,
                                                      remain_downloads: M.remain_downloads,
                                                    })
                                                  : t("application:fileManager.permanentValid"),
                                            }),
                                      }),
                                      e.jsx(ue, { children: e.jsx(Va, { shareInfo: M }) }),
                                      e.jsx(G, { children: t(`fileManager.${M.is_private ? "yes" : "no"}`) }),
                                    ],
                                  }),
                                )),
                        ],
                      }),
                    ],
                  }),
                  r &&
                    !((A = r == null ? void 0 : r.extended_info) != null && A.shares) &&
                    e.jsx(F, {
                      sx: { p: 1, width: "100%", textAlign: "center" },
                      children: e.jsx(ee, {
                        variant: "caption",
                        color: "text.secondary",
                        children: t("application:setting.listEmpty"),
                      }),
                    }),
                ],
              }),
            }),
          }),
        }),
      ],
    });
  },
  tl = () => {
    const { t } = O(),
      s = N(),
      i = C((c) => c.globalState.staleVersionDialogOpen),
      n = C((c) => c.globalState.staleVersionUri),
      o = C((c) => c.globalState.staleVersionPromiseId),
      p = a.useCallback(() => {
        var c;
        s(Ut()), o && ((c = $t[o]) == null || c.reject("cancel"));
      }, [s, o]),
      r = a.useCallback(
        (c) => {
          var d;
          c && c.preventDefault(), o && ((d = $t[o]) == null || d.resolve({ overwrite: !0 }), s(Ut()));
        },
        [o, name],
      ),
      l = a.useCallback(async () => {
        var c;
        if (n)
          try {
            const d = new ve(n).elements().pop();
            if (d && o) {
              const h = await s($a(d)),
                u = new ve(h.uri).join(h.name);
              (c = $t[o]) == null || c.resolve({ overwrite: !1, saveAs: u.toString() }), s(Ut());
            }
          } catch {
            return;
          }
      }, [s, o, n]);
    return e.jsx(re, {
      title: t("application:modals.versionConflict"),
      showActions: !0,
      okText: t("application:modals.overwrite"),
      showCancel: !0,
      onAccept: r,
      secondaryAction: e.jsx(Pe, { variant: "contained", onClick: l, color: "primary", children: t("modals.saveAs") }),
      dialogProps: { open: i ?? !1, onClose: p, fullWidth: !0, maxWidth: "sm" },
      children: e.jsx(oe, {
        sx: { pb: 0 },
        children: e.jsx(ie, {
          spacing: 2,
          children: e.jsxs(Ft, {
            children: [
              t("modals.conflictDes1"),
              e.jsx("ul", {
                children: e.jsx($e, {
                  i18nKey: "modals.conflictDes2",
                  ns: "application",
                  components: [e.jsx("li", {}, 0), e.jsx("li", {}, 1)],
                }),
              }),
            ],
          }),
        }),
      }),
    });
  },
  sl = () => {
    const { t } = O(),
      s = N(),
      [i, n] = qa(),
      o = C((u) => u.globalState.saveAsDialogOpen),
      p = C((u) => u.globalState.saveAsInitialName),
      r = C((u) => u.globalState.saveAsPromiseId),
      [l, c] = a.useState("");
    a.useEffect(() => {
      o && c(p ?? "");
    }, [o]);
    const d = a.useCallback(() => {
        var u;
        s(Ls()), r && ((u = Fs[r]) == null || u.reject("cancel"));
      }, [s, r]),
      h = a.useCallback(
        (u) => {
          var f;
          u && u.preventDefault();
          const x = i && i.path ? i.path : n;
          s(Ls()), r && x && ((f = Fs[r]) == null || f.resolve({ uri: x, name: l }));
        },
        [r, i, l, n],
      );
    return e.jsxs(re, {
      title: t("application:modals.saveAs"),
      showActions: !0,
      secondaryFullWidth: !0,
      onAccept: h,
      secondaryAction: e.jsx(F, {
        sx: { display: "flex", alignItems: "flex-end" },
        children: e.jsx(Ue, {
          variant: "filled",
          autoFocus: !0,
          margin: "dense",
          onChange: (u) => c(u.target.value),
          label: t("modals.fileName"),
          type: "text",
          value: l,
          fullWidth: !0,
          required: !0,
        }),
      }),
      denseAction: !0,
      dialogProps: {
        open: o ?? !1,
        onClose: d,
        fullWidth: !0,
        maxWidth: "lg",
        disableRestoreFocus: !0,
        PaperProps: { sx: { height: "100%" } },
      },
      children: [
        e.jsx(oe, { sx: { display: "flex" }, children: e.jsx(Ga, { disableSharedWithMe: !0, disableTrash: !0 }) }),
        e.jsx(ht, {}),
      ],
    });
  },
  nl = ke(
    e.jsx("path", {
      d: "M4.5 5.75c0-.69.56-1.25 1.25-1.25h2a.75.75 0 0 0 0-1.5h-2A2.75 2.75 0 0 0 3 5.75v2a.75.75 0 0 0 1.5 0zm0 12.5c0 .69.56 1.25 1.25 1.25h2a.75.75 0 0 1 0 1.5h-2A2.75 2.75 0 0 1 3 18.25v-2a.75.75 0 0 1 1.5 0zM18.25 4.5c.69 0 1.25.56 1.25 1.25v2a.75.75 0 0 0 1.5 0v-2A2.75 2.75 0 0 0 18.25 3h-2a.75.75 0 0 0 0 1.5zm1.25 13.75c0 .69-.56 1.25-1.25 1.25h-2a.75.75 0 0 0 0 1.5h2A2.75 2.75 0 0 0 21 18.25v-2a.75.75 0 0 0-1.5 0z",
    }),
    "FullScreenMaximize",
  ),
  al = ke(
    e.jsx("path", {
      d: "M8.5 3.75a.75.75 0 0 0-1.5 0v2.5a.75.75 0 0 1-.75.75h-2.5a.75.75 0 0 0 0 1.5h2.5A2.25 2.25 0 0 0 8.5 6.25zm0 16.5a.75.75 0 0 1-1.5 0v-2.5a.75.75 0 0 0-.75-.75h-2.5a.75.75 0 0 1 0-1.5h2.5a2.25 2.25 0 0 1 2.25 2.25zM16.25 3a.75.75 0 0 0-.75.75v2.5a2.25 2.25 0 0 0 2.25 2.25h2.5a.75.75 0 0 0 0-1.5h-2.5a.75.75 0 0 1-.75-.75v-2.5a.75.75 0 0 0-.75-.75m-.75 17.25a.75.75 0 0 0 1.5 0v-2.5a.75.75 0 0 1 .75-.75h2.5a.75.75 0 0 0 0-1.5h-2.5a2.25 2.25 0 0 0-2.25 2.25z",
    }),
    "FullScreenMinimize",
  ),
  xe = ({ minHeight: t = "calc(100vh - 200px)" }) =>
    e.jsx(F, {
      sx: {
        width: "100%",
        height: "100%",
        border: "none",
        minHeight: t,
        display: "flex",
        justifyContent: "center",
        alignItems: "center",
      },
      children: e.jsx(An, {}),
    }),
  we = (t) => {
    var l;
    const { t: s } = O(),
      i = X(),
      n = de(i.breakpoints.down("sm")),
      [o, p] = a.useState(t.fullScreen || n),
      r = a.useCallback(() => {
        t.dialogProps.onClose && t.dialogProps.onClose({}, "backdropClick");
      }, [t.dialogProps.onClose]);
    return e.jsxs(Dn, {
      fullScreen: o,
      ...t.dialogProps,
      onClose: t.loading ? void 0 : t.dialogProps.onClose,
      children: [
        e.jsxs(F, {
          children: [
            e.jsxs(Ja, {
              sx: { py: "8px", px: "14px" },
              id: "draggable-dialog-title",
              children: [
                t.actions && t.actions,
                e.jsxs(F, {
                  sx: { display: "flex", alignItems: "center", minWidth: 0 },
                  children: [
                    e.jsx(cs, {
                      variant: "default",
                      file: t.file,
                      sx: { px: 0, py: 0, pt: 0.5, mr: 1 },
                      fontSize: "small",
                    }),
                    e.jsx(Ka, { variant: "subtitle2", children: (l = t.file) == null ? void 0 : l.name }),
                    t.readOnly && e.jsx(Yt, { size: "small", sx: { ml: 1 }, label: s("fileManager.readOnly") }),
                  ],
                }),
                e.jsxs(F, {
                  sx: { display: "flex" },
                  children: [
                    t.fullScreenToggle &&
                      e.jsx(J, {
                        onClick: () => {
                          t.toggleFullScreen ? t.toggleFullScreen() : p((c) => !c);
                        },
                        children: o ? e.jsx(al, { fontSize: "small" }) : e.jsx(nl, { fontSize: "small" }),
                      }),
                    e.jsx(J, { disabled: t.loading, onClick: r, children: e.jsx(ot, { fontSize: "small" }) }),
                  ],
                }),
              ],
            }),
            e.jsx(ht, {}),
          ],
        }),
        t.children,
      ],
    });
  },
  bt = [
    { ext: "png", display: "PNG" },
    { ext: "jpg", display: "JPEG", quality: !0 },
    { ext: "webp", display: "WebP", quality: !0 },
    { ext: "pdf", display: "PDF" },
    { ext: "svg", display: "SVG" },
    { ext: "gif", display: "GIF" },
    { ext: "mp4", display: "MP4" },
    { ext: "dds", display: "DDS" },
    { ext: "tiff", display: "TIFF" },
    { ext: "tga", display: "TGA" },
    { ext: "bmp", display: "BMP" },
    { ext: "ico", display: "ICO" },
    { ext: "dxf", display: "DXF" },
    { ext: "raw", display: "RAW" },
    { ext: "emf", display: "EMF" },
    { ext: "ppm", display: "PPM" },
  ],
  ol = ({ onSaveSubmit: t, onClose: s, ...i }) => {
    const { t: n } = O(),
      [o, p] = a.useState(bt[0]),
      [r, l] = a.useState(0.9),
      c = (u) => {
        p(bt.find((x) => x.ext === u.target.value) ?? bt[0]);
      },
      d = (u, x) => {
        l(x);
      },
      h = () => {
        t(o.ext, o.quality ? r : void 0), s && s({}, "backdropClick");
      };
    return e.jsx(re, {
      title: n("application:modals.saveAsOtherFormat"),
      showActions: !0,
      showCancel: !0,
      onAccept: h,
      dialogProps: { fullWidth: !0, onClose: s, maxWidth: "xs", ...i },
      children: e.jsx(oe, {
        children: e.jsx(Fe, {
          children: e.jsxs(ie, {
            spacing: 2,
            children: [
              e.jsxs(Ve, {
                variant: "filled",
                sx: { width: "100%" },
                children: [
                  e.jsx(ds, { children: n("fileManager.format") }),
                  e.jsx(zn, {
                    value: o.ext,
                    onChange: c,
                    children: bt.map((u) => e.jsx(At, { value: u.ext, children: u.display }, u.ext)),
                  }),
                ],
              }),
              o.quality &&
                e.jsx(kn, {
                  title: n("modals.quality"),
                  children: e.jsx(Dt, {
                    size: "small",
                    valueLabelDisplay: "auto",
                    min: 0.01,
                    step: 0.01,
                    max: 1,
                    value: r,
                    onChange: d,
                  }),
                }),
            ],
          }),
        }),
      }),
    });
  },
  il = "https://www.photopea.com",
  rl =
    "https://www.photopea.com#%7B%22environment%22%3A%7B%22customIO%22%3A%7B%22save%22%3A%22app.echoToOE(%5C%22SAVE%5C%22)%3B%22%2C%22saveAsPSD%22%3A%22app.echoToOE(%5C%22SAVEPSD%5C%22)%3B%22%7D%7D%7D",
  ll = "SAVE",
  cl = "SAVEPSD",
  dl = function (t, s) {
    var i = new Uint8Array(t.byteLength + s.byteLength);
    return i.set(new Uint8Array(t), 0), i.set(new Uint8Array(s), t.byteLength), i.buffer;
  },
  Jt = { started: 1, saveAs: 2 },
  pl = () => {
    const { t } = O(),
      s = N(),
      i = C((z) => z.globalState.photopeaViewer),
      n = Te(i != null && i.file ? [i == null ? void 0 : i.file] : []),
      [o, p] = a.useState(!1),
      [r, l] = a.useState(!1),
      [c, d] = a.useState(null),
      [h, u] = a.useState(!1),
      x = a.useRef(""),
      f = a.useRef(),
      [m, g] = a.useState(void 0),
      y = a.useRef(0),
      k = a.useRef(0),
      b = a.useRef(void 0),
      v = a.useRef(new ArrayBuffer(0)),
      A = a.useRef(!1);
    a.useEffect(
      () => (
        window.addEventListener("message", S),
        () => {
          window.removeEventListener("message", S);
        }
      ),
      [],
    ),
      a.useEffect(() => {
        !i ||
          !i.open ||
          ((A.current = Ze(n)),
          l(!1),
          (b.current = i),
          (v.current = new ArrayBuffer(0)),
          (y.current = 0),
          (k.current = 0),
          g(void 0),
          s(Be({ uris: [me(i.file)], entity: i.version }))
            .then((z) => {
              (x.current = z.urls[0].url), g(rl);
            })
            .catch(() => {
              I();
            }));
      }, [i]);
    const M = (z, T) => {
        var R, _;
        d(null),
          !(!f.current || !A.current) &&
            (p(!0),
            z ||
              ((z = Le(((R = b.current) == null ? void 0 : R.file.name) ?? "") ?? "jpg"), z == "psd" && (z += ":true")),
            (_ = f.current.contentWindow) == null || _.postMessage(`app.activeDocument.saveToOE("${z}")`, "*"),
            (k.current = T ? Jt.saveAs : Jt.started));
      },
      S = (z) => {
        var T, R, _, j, w;
        z.origin == il &&
          (console.log(z),
          z.data == "done"
            ? (y.current == 0
                ? (R = (T = f.current) == null ? void 0 : T.contentWindow) == null ||
                  R.postMessage(`app.open("${x.current}","",false)`, "*")
                : y.current == 2
                  ? ((w = (_ = f.current) == null ? void 0 : _.contentWindow) == null ||
                      w.postMessage(
                        `app.activeDocument.name="${
                          ((j = b.current) == null ? void 0 : j.file.name.replace(/"/g, '\\"')) ?? ""
                        }"`,
                        "*",
                      ),
                    l(!0))
                  : k.current > 0 &&
                    b.current &&
                    (s(Za(v.current, b.current.file, b.current.version, k.current == Jt.saveAs)), p(!1)),
              y.current++)
            : z.data == ll
              ? M()
              : z.data == cl
                ? M("psd:true", !0)
                : z.data instanceof ArrayBuffer && k.current && (v.current = dl(v.current, z.data)));
      },
      I = a.useCallback(() => {
        s(Ya());
      }, [s]);
    a.useCallback((z) => (f.current = z.currentTarget), []);
    const V = a.useCallback(
        (z) => {
          d(z.currentTarget);
        },
        [s],
      ),
      P = () => {
        u(!0), d(null);
      },
      D = (z, T) => {
        T && (z += `:${T}`), M(z, !0);
      };
    return e.jsxs(e.Fragment, {
      children: [
        e.jsx(ol, { onSaveSubmit: D, open: h, onClose: () => u(!1) }),
        e.jsxs(we, {
          file: i == null ? void 0 : i.file,
          loading: o,
          readOnly: !A.current,
          actions: A.current
            ? e.jsxs(Ot, {
                disabled: o || !r,
                disableElevation: !0,
                variant: "contained",
                children: [
                  e.jsx(Pe, { onClick: () => M(), variant: "contained", children: t("fileManager.save") }),
                  e.jsx(Pe, { size: "small", onClick: V, children: e.jsx(Wt, { sx: { fontSize: "12px!important" } }) }),
                ],
              })
            : void 0,
          fullScreenToggle: !0,
          dialogProps: { open: !!(i && i.open), onClose: I, fullWidth: !0, maxWidth: "lg" },
          children: [
            e.jsxs(be, {
              anchorEl: c,
              open: !!c,
              onClose: () => d(null),
              slotProps: { paper: { sx: { minWidth: 150 } } },
              children: [
                e.jsx(Q, {
                  dense: !0,
                  onClick: () => M(void 0, !0),
                  children: e.jsx(Y, { children: t("modals.saveAs") }),
                }),
                e.jsx(Q, { onClick: P, dense: !0, children: e.jsx(Y, { children: t("modals.saveAsOtherFormat") }) }),
              ],
            }),
            !m && e.jsx(xe, {}),
            m &&
              e.jsx(F, {
                ref: f,
                sx: { width: "100%", height: "100%", border: "none", minHeight: "calc(100vh - 200px)" },
                component: "iframe",
                title: "ms",
                src: m,
                allowFullScreen: !0,
              }),
          ],
        }),
      ],
    });
  },
  ul = ({ replacedSrc: t, viewerState: s, onSubmit: i }) => {
    const n = a.useRef(null);
    return (
      a.useEffect(() => {
        var o;
        (o = n.current) == null || o.submit(), i();
      }, [s]),
      e.jsxs("form", {
        ref: n,
        id: "office_form",
        name: "office_form",
        target: "office_frame",
        action: t,
        method: "post",
        children: [
          e.jsx("input", { name: "access_token", value: s.session.access_token, type: "hidden" }),
          e.jsx("input", { name: "access_token_ttl", value: s.session.expires, type: "hidden" }),
        ],
      })
    );
  },
  hl = () => {
    const { t } = O(),
      s = N(),
      i = X(),
      n = C((k) => k.globalState.wopiViewer),
      o = Te(n != null && n.file ? [n == null ? void 0 : n.file] : []),
      p = Ze(o),
      [r, l] = a.useState(!1),
      [c, d] = a.useState(!1),
      [h, u] = a.useState(null);
    a.useRef(null);
    const x = a.useRef(!1),
      f = a.useMemo(() => {
        var k;
        return n != null && n.src
          ? n.src
              .replace("lng", ((k = Rt.resolvedLanguage) == null ? void 0 : k.toLowerCase()) ?? "")
              .replace("darkmode", i.palette.mode === "dark" ? "2" : "1")
          : "";
      }, [n == null ? void 0 : n.src, i]),
      m = (k) => {
        console.log("Received PostMessage from " + k.origin, k.data);
        let b;
        try {
          b = JSON.parse(k.data);
        } catch {
          return;
        }
        n != null &&
          n.file &&
          (b.MessageId === "UI_Sharing" || b.MessageId === "UI_Share"
            ? s(Pn(ne.main, n == null ? void 0 : n.file))
            : b.MessageId == "UI_FileVersions" && s(Xa({ open: !0, file: n.file })));
      };
    a.useEffect(() => {
      if (!n || !n.open) {
        x.current = !1;
        return;
      }
      return (
        window.addEventListener("message", m, !1),
        () => {
          window.removeEventListener("message", m, !1);
        }
      );
    }, [n == null ? void 0 : n.open]);
    const g = a.useCallback(() => {
      s(Qa());
    }, [s]);
    a.useCallback(
      (k) => {
        u(k.currentTarget);
      },
      [s],
    );
    const y = a.useCallback(() => {
      x.current && d(!0);
    }, []);
    return e.jsx(e.Fragment, {
      children: e.jsxs(we, {
        file: n == null ? void 0 : n.file,
        loading: r,
        readOnly: !p,
        fullScreenToggle: !0,
        dialogProps: { open: !!(n && n.open), onClose: g, fullWidth: !0, maxWidth: "lg" },
        children: [
          e.jsx(be, {
            anchorEl: h,
            open: !!h,
            onClose: () => u(null),
            slotProps: { paper: { sx: { minWidth: 150 } } },
            children: e.jsx(Q, { dense: !0, children: e.jsx(Y, { children: t("modals.saveAs") }) }),
          }),
          n &&
            e.jsx(ul, {
              onSubmit: () => {
                x.current = !0;
              },
              viewerState: n,
              replacedSrc: f,
            }),
          !c && e.jsx(xe, {}),
          e.jsx(F, {
            onLoad: y,
            component: "iframe",
            id: "office_frame",
            name: "office_frame",
            sandbox:
              "allow-scripts allow-same-origin allow-forms allow-popups allow-top-navigation allow-popups-to-escape-sandbox allow-downloads allow-modals",
            allow: "clipboard-read *; clipboard-write *",
            allowFullScreen: !0,
            sx: { width: "100%", height: c ? "100%" : 0, border: "none", minHeight: c ? "calc(100vh - 200px)" : 0 },
          }),
        ],
      }),
    });
  },
  xl = [
    "ibm866",
    "iso8859_2",
    "iso8859_3",
    "iso8859_4",
    "iso8859_5",
    "iso8859_6",
    "iso8859_7",
    "iso8859_8",
    "iso8859_8I",
    "iso8859_10",
    "iso8859_13",
    "iso8859_14",
    "iso8859_15",
    "iso8859_16",
    "koi8r",
    "koi8u",
    "macintosh",
    "windows874",
    "windows1250",
    "windows1251",
    "windows1252",
    "windows1253",
    "windows1254",
    "windows1255",
    "windows1256",
    "windows1257",
    "windows1258",
    "macintoshcyrillic",
    "gbk",
    "gb18030",
    "big5",
    "eucjp",
    "iso2022jp",
    "shiftjis",
    "euckr",
    "utf16be",
    "utf16le",
  ],
  Ne = " ",
  ml = U(ps)(({ theme: t }) => ({ "&.MuiInputAdornment-positionStart": { marginTop: "0!important" } })),
  Yn = ({
    value: t,
    onChange: s,
    label: i,
    size: n = "medium",
    variant: o = "outlined",
    fullWidth: p = !1,
    showIcon: r = !0,
    SelectProps: l,
  }) => {
    const { t: c } = O(),
      d = X(),
      h = de(d.breakpoints.down("sm")),
      u = i || c("modals.selectEncoding"),
      x = n == "small" ? to : zn,
      f = n == "small" ? ml : ps;
    return e.jsxs(Ve, {
      variant: o,
      fullWidth: p,
      size: n,
      children: [
        n != "small" && e.jsx(ds, { children: u }),
        e.jsxs(x, {
          variant: o,
          size: n,
          startAdornment: r && !h && e.jsx(f, { position: "start", sx: { mt: 0 }, children: e.jsx(eo, {}) }),
          label: u,
          value: t,
          onChange: (m) => s(m.target.value),
          ...l,
          children: [
            e.jsx(At, { value: Ne, children: e.jsx("em", { children: c("modals.defaultEncoding") }) }),
            xl.map((m) => e.jsx(At, { value: m, children: m }, m)),
          ],
        }),
      ],
    });
  },
  fl = () => {
    var R;
    const { t } = O(),
      s = N();
    X();
    const { enqueueSnackbar: i } = Ie(),
      n = C((_) => _.globalState.archiveViewer),
      [o, p] = a.useState(!1),
      [r, l] = a.useState([]),
      [c, d] = a.useState(""),
      [h, u] = a.useState([]),
      [x, f] = a.useState(""),
      [m, g] = a.useState(33),
      [y, k] = a.useState(Ne),
      b = a.useMemo(() => {
        var _;
        return Le(((_ = n == null ? void 0 : n.file) == null ? void 0 : _.name) ?? "") === "zip";
      }, [(R = n == null ? void 0 : n.file) == null ? void 0 : R.name]),
      v = a.useMemo(() => {
        if (!r) return [];
        if (!c) return r.filter((B) => !B.name.includes("/"));
        const _ = c.endsWith("/") ? c : c + "/",
          j = r.filter((B) => B.name.startsWith(_) && B.name !== c),
          w = new Set(),
          L = [];
        return (
          j.forEach((B) => {
            const q = B.name.substring(_.length),
              E = q.indexOf("/");
            if (E === -1) w.has(q) || (w.add(q), L.push({ ...B, name: q }));
            else {
              const H = q.substring(0, E);
              w.has(H) || (w.add(H), L.push({ name: H, size: 0, updated_at: B.updated_at, is_directory: !0 }));
            }
          }),
          L
        );
      }, [r, c]),
      A = a.useMemo(() => (x ? v.filter((_) => _.name.toLowerCase().includes(x.toLowerCase())) : v), [v, x]),
      M = a.useMemo(() => (c ? c.split("/").filter(Boolean) : []), [c]),
      S = (_) => (_ && typeof _ == "string" && _.startsWith("/") ? _.slice(1) : _);
    a.useEffect(() => {
      if (!n || !n.open) {
        k(Ne);
        return;
      }
      p(!0),
        l([]),
        d(""),
        u([]),
        f(""),
        s(so({ uri: me(n.file), entity: n.version, text_encoding: y !== Ne ? y : void 0 }))
          .then((_) => {
            if (_.files) {
              const j = [],
                w = new Set();
              _.files
                .filter((L) => L.is_directory)
                .forEach((L) => {
                  const B = S(L.name);
                  j.push({ ...L, name: B }), w.add(B);
                }),
                _.files
                  .filter((L) => !L.is_directory)
                  .forEach((L) => {
                    const B = S(L.name);
                    j.push({ ...L, name: B });
                    const q = B.split("/");
                    for (let E = 1; E < q.length; E++) {
                      const H = q.slice(0, E).join("/");
                      w.has(H) ||
                        (w.add(H), j.push({ name: H, size: 0, updated_at: "1970-01-01T00:00:00Z", is_directory: !0 }));
                    }
                  }),
                j.sort((L, B) =>
                  L.is_directory && !B.is_directory
                    ? -1
                    : !L.is_directory && B.is_directory
                      ? 1
                      : L.name.localeCompare(B.name),
                ),
                l(j);
            }
          })
          .catch(() => {
            I();
          })
          .finally(() => {
            p(!1);
          });
    }, [n, y]);
    const I = a.useCallback(() => {
        s(no());
      }, [s]),
      V = a.useCallback(
        (_) => {
          d(c ? c + "/" + _ : _), u([]);
        },
        [c],
      ),
      P = a.useCallback(
        (_) => {
          if (_ === -1) d("");
          else {
            const j = M.slice(0, _ + 1).join("/");
            d(j);
          }
          u([]);
        },
        [M],
      ),
      D = a.useCallback(
        (_) => {
          const j = c ? c + "/" + _ : _;
          u((w) => (w.includes(j) ? w.filter((L) => L !== j) : [...w, j]));
        },
        [c],
      );
    a.useCallback(() => {
      const _ = A.map((w) => (c ? c + "/" + w.name : w.name)),
        j = _.every((w) => h.includes(w));
      u(j ? (w) => w.filter((L) => !_.includes(L)) : (w) => [...new Set([...w, ..._])]);
    }, [A, h, c]);
    const z = a.useCallback(() => {
        h.length !== 0 && s(Ts({ open: !0, file: n == null ? void 0 : n.file, mask: h, encoding: y }));
      }, [h, t, i, y]),
      T = a.useCallback(() => {
        n != null && n.file && s(Ts({ open: !0, file: n == null ? void 0 : n.file, encoding: y }));
      }, [n == null ? void 0 : n.file, y]);
    return e.jsx(e.Fragment, {
      children: e.jsx(we, {
        file: n == null ? void 0 : n.file,
        loading: o,
        dialogProps: { open: !!(n && n.open), onClose: I, fullWidth: !0, maxWidth: "lg" },
        children: e.jsx(Fe, {
          children: e.jsxs("div", {
            children: [
              o && e.jsx(xe, {}),
              !o &&
                e.jsxs(F, {
                  sx: { p: 2 },
                  children: [
                    e.jsx(F, {
                      sx: { mb: 2 },
                      children: e.jsxs(vr, {
                        separator: e.jsx(ao, { fontSize: "small" }),
                        children: [
                          e.jsxs(Qt, {
                            component: "button",
                            variant: "body2",
                            color: "inherit",
                            onClick: () => P(-1),
                            sx: {
                              display: "flex",
                              alignItems: "center",
                              textDecoration: "none",
                              "&:hover": { textDecoration: "underline" },
                            },
                            children: [e.jsx(oo, { fontSize: "small", sx: { mr: 0.5 } }), t("fileManager.rootFolder")],
                          }),
                          M.map((_, j) =>
                            j === M.length - 1
                              ? e.jsxs(
                                  ee,
                                  {
                                    variant: "body2",
                                    color: "text.primary",
                                    sx: { display: "flex", alignItems: "center" },
                                    children: [e.jsx(Is, { fontSize: "small", sx: { mr: 0.5 } }), _],
                                  },
                                  j,
                                )
                              : e.jsxs(
                                  Qt,
                                  {
                                    component: "button",
                                    variant: "body2",
                                    color: "inherit",
                                    onClick: () => P(j),
                                    sx: {
                                      display: "flex",
                                      alignItems: "center",
                                      textDecoration: "none",
                                      "&:hover": { textDecoration: "underline" },
                                    },
                                    children: [e.jsx(Is, { fontSize: "small", sx: { mr: 0.5 } }), _],
                                  },
                                  j,
                                ),
                          ),
                        ],
                      }),
                    }),
                    A.length > 0
                      ? e.jsx(Ge, {
                          component: Je,
                          children: e.jsx(Wi, {
                            style: { height: Math.min(m, 400), overflow: "auto" },
                            totalListHeightChanged: (_) => {
                              g(_ + 0.5);
                            },
                            components: { Table: (_) => e.jsx(Ke, { ..._, size: "small" }) },
                            data: A,
                            itemContent: (_, j) => {
                              const w = c ? c + "/" + j.name : j.name,
                                L = h.includes(w);
                              return e.jsxs(e.Fragment, {
                                children: [
                                  e.jsx(ue, {
                                    sx: { width: 50, padding: "4px 8px" },
                                    children: e.jsx(zt, { checked: L, onChange: () => D(j.name), size: "small" }),
                                  }),
                                  e.jsx(ue, {
                                    sx: { minWidth: 300, width: "100%", padding: "4px 8px" },
                                    children: e.jsxs(ee, {
                                      variant: "body2",
                                      sx: { display: "flex", alignItems: "center" },
                                      children: [
                                        e.jsx(cs, {
                                          sx: { px: 0, py: 0, mr: 1, height: "20px" },
                                          variant: "small",
                                          iconProps: { fontSize: "small" },
                                          file: { type: j.is_directory ? Se.folder : Se.file, name: j.name },
                                        }),
                                        j.is_directory
                                          ? e.jsx(ee, {
                                              component: "button",
                                              variant: "inherit",
                                              onClick: () => V(j.name),
                                              sx: {
                                                color: "primary.main",
                                                fontWeight: 500,
                                                textDecoration: "none",
                                                background: "none",
                                                border: "none",
                                                cursor: "pointer",
                                                padding: 0,
                                                "&:hover": { textDecoration: "underline" },
                                              },
                                              children: Es(j.name),
                                            })
                                          : e.jsx(ee, {
                                              variant: "inherit",
                                              sx: { color: "inherit", fontWeight: 400 },
                                              children: Es(j.name),
                                            }),
                                      ],
                                    }),
                                  }),
                                  e.jsx(ue, {
                                    sx: { minWidth: 100, padding: "4px 8px" },
                                    children: e.jsx(ee, {
                                      variant: "body2",
                                      noWrap: !0,
                                      children: j.is_directory ? "-" : ze(j.size),
                                    }),
                                  }),
                                  e.jsx(ue, {
                                    sx: { minWidth: 120, padding: "4px 8px" },
                                    children: e.jsx(ee, {
                                      variant: "body2",
                                      noWrap: !0,
                                      children: j.updated_at
                                        ? e.jsx(Et, { variant: "inherit", datetime: j.updated_at })
                                        : "-",
                                    }),
                                  }),
                                ],
                              });
                            },
                          }),
                        })
                      : e.jsx(ee, {
                          variant: "body2",
                          color: "text.secondary",
                          align: "center",
                          sx: { py: 4 },
                          children: t("fileManager.nothingFound"),
                        }),
                    !(n != null && n.version) &&
                      e.jsxs(F, {
                        sx: {
                          mt: 2,
                          display: "flex",
                          flexWrap: "wrap",
                          gap: 1,
                          justifyContent: "space-between",
                          alignItems: "flex-end",
                        },
                        children: [
                          e.jsxs(F, {
                            sx: { display: "flex", flexWrap: "wrap", gap: 1 },
                            children: [
                              e.jsx(Pe, {
                                variant: "contained",
                                onClick: T,
                                color: "primary",
                                children: t("fileManager.extractArchive"),
                              }),
                              h.length > 0 &&
                                e.jsx(us, {
                                  variant: "contained",
                                  onClick: z,
                                  children: t("fileManager.extractSelected"),
                                }),
                            ],
                          }),
                          b &&
                            e.jsx(F, {
                              children: e.jsx(Yn, {
                                value: y,
                                onChange: k,
                                size: "small",
                                variant: "filled",
                                fullWidth: !0,
                                showIcon: !0,
                                label: t("modals.selectEncoding"),
                              }),
                            }),
                        ],
                      }),
                  ],
                }),
            ],
          }),
        }),
      }),
    });
  },
  gl = a.lazy(() => ft(() => import("./MonacoEditor-BnsLKTuc.js"), __vite__mapDeps([0, 1, 2, 3, 4, 5, 6, 7]))),
  Qn = {
    md: "markdown",
    json: "json",
    php: "php",
    py: "python",
    bat: "bat",
    cpp: "cpp",
    c: "cpp",
    h: "cpp",
    cs: "csharp",
    css: "css",
    dockerfile: "dockerfile",
    go: "go",
    html: "html",
    ini: "ini",
    java: "java",
    js: "javascript",
    jsx: "javascript",
    less: "less",
    lua: "lua",
    sh: "shell",
    sql: "sql",
    xml: "xml",
    yaml: "yaml",
  },
  jl = [
    "utf-8",
    "ibm866",
    "iso-8859-2",
    "iso-8859-3",
    "iso-8859-4",
    "iso-8859-5",
    "iso-8859-6",
    "iso-8859-7",
    "iso-8859-8",
    "iso-8859-8i",
    "iso-8859-10",
    "iso-8859-13",
    "iso-8859-14",
    "iso-8859-15",
    "iso-8859-16",
    "koi8-r",
    "koi8-u",
    "macintosh",
    "windows-874",
    "windows-1250",
    "windows-1251",
    "windows-1252",
    "windows-1253",
    "windows-1254",
    "windows-1255",
    "windows-1256",
    "windows-1257",
    "windows-1258",
    "x-mac-cyrillic",
    "gbk",
    "gb18030",
    "hz-gb-2312",
    "big5",
    "euc-jp",
    "iso-2022-jp",
    "shift-jis",
    "euc-kr",
    "iso-2022-kr",
    "utf-16be",
    "utf-16le",
  ],
  bl = Array.from(new Set(Object.values(Qn))).sort(),
  yl = () => {
    const { t } = O(),
      s = N(),
      i = X(),
      n = C((_) => _.globalState.codeViewer),
      o = Te(n != null && n.file ? [n == null ? void 0 : n.file] : []),
      p = Ze(o),
      [r, l] = a.useState(!1),
      [c, d] = a.useState(""),
      [h, u] = a.useState(!1),
      [x, f] = a.useState(!0),
      [m, g] = a.useState(null),
      [y, k] = a.useState(null),
      [b, v] = a.useState(null),
      [A, M] = a.useState("off"),
      S = a.useRef(() => {}),
      I = a.useCallback(
        (_) => {
          !n ||
            !n.open ||
            (u(!1),
            k(null),
            s(Bt(n.file, n.version))
              .then((j) => {
                d(new TextDecoder(_).decode(j)), u(!0);
              })
              .catch(() => {
                V();
              }));
        },
        [n],
      );
    a.useEffect(() => {
      !n || !n.open || (v(null), f(!0), v(Qn[Le(n.file.name) ?? ""] ?? ""), I());
    }, [n == null ? void 0 : n.open]);
    const V = a.useCallback(() => {
        s(io());
      }, [s]),
      P = a.useCallback(
        (_) => {
          g(_.currentTarget);
        },
        [s],
      ),
      D = a.useCallback(
        (_) => {
          k(_.currentTarget);
        },
        [s],
      ),
      z = a.useCallback(() => {
        k(null), M((_) => (_ == "off" ? "on" : "off"));
      }, []),
      T = a.useCallback(
        (_) => {
          n != null &&
            n.file &&
            (l(!0),
            s(ro(c, n.file, n.version, _))
              .then(() => {
                f(!0);
              })
              .finally(() => {
                l(!1);
              }));
        },
        [c, n],
      ),
      R = a.useCallback((_) => {
        d(_), f(!1);
      }, []);
    return (
      a.useEffect(() => {
        S.current = () => {
          !x && p && T(!1);
        };
      }, [x, p, T]),
      Ri(
        ["Control+s", "Meta+s"],
        () => {
          S.current();
        },
        { preventDefault: !0 },
      ),
      e.jsxs(we, {
        file: n == null ? void 0 : n.file,
        loading: r,
        readOnly: !p,
        actions: e.jsxs(F, {
          sx: { display: "flex", gap: 1 },
          children: [
            p &&
              e.jsxs(Ot, {
                disabled: r || !h || x,
                disableElevation: !0,
                variant: "contained",
                children: [
                  e.jsx(Tt, {
                    loading: r,
                    variant: "contained",
                    onClick: () => T(!1),
                    children: e.jsx("span", { children: t("fileManager.save") }),
                  }),
                  e.jsx(Pe, { size: "small", onClick: P, children: e.jsx(Wt, { sx: { fontSize: "12px!important" } }) }),
                ],
              }),
            e.jsx(J, { onClick: D, children: e.jsx(Ln, { fontSize: "small" }) }),
          ],
        }),
        fullScreenToggle: !0,
        dialogProps: { open: !!(n && n.open), onClose: V, fullWidth: !0, maxWidth: "lg" },
        children: [
          e.jsx(be, {
            anchorEl: m,
            open: !!m,
            onClose: () => g(null),
            slotProps: { paper: { sx: { minWidth: 150 } } },
            children: e.jsx(Q, {
              onClick: () => T(!0),
              dense: !0,
              children: e.jsx(Y, { children: t("modals.saveAs") }),
            }),
          }),
          e.jsxs(be, {
            anchorEl: y,
            open: !!y,
            onClose: () => k(null),
            slotProps: { paper: { sx: { minWidth: 200 } } },
            children: [
              e.jsx(He, {
                popupId: "lng",
                title: t("application:fileManager.charset"),
                children: jl.map((_) => e.jsx(Q, { onClick: () => I(_), children: e.jsx(Y, { children: _ }) }, _)),
              }),
              e.jsx(He, {
                popupId: "lng",
                title: t("application:fileManager.textType"),
                children: bl.map((_) =>
                  e.jsxs(
                    Q,
                    {
                      onClick: () => v(_),
                      children: [e.jsx(Y, { children: _ }), _ == b && e.jsx(pe, { children: e.jsx(De, {}) })],
                    },
                    _,
                  ),
                ),
              }),
              e.jsx(xt, {}),
              e.jsxs(Q, {
                onClick: z,
                dense: !0,
                children: [
                  e.jsx(Y, { children: t("fileManager.wordWrap") }),
                  A === "on" && e.jsx(pe, { sx: { minWidth: "0!important" }, children: e.jsx(De, {}) }),
                ],
              }),
            ],
          }),
          !h && e.jsx(xe, {}),
          h &&
            e.jsx(a.Suspense, {
              fallback: e.jsx(xe, {}),
              children: e.jsx(F, {
                sx: { width: "100%", height: "100%", minHeight: "calc(100vh - 200px)" },
                children: e.jsx(gl, {
                  onSave: S,
                  theme: i.palette.mode === "dark" ? "vs-dark" : "vs",
                  options: { readOnly: !p, wordWrap: A, automaticLayout: !0 },
                  value: c,
                  language: b ?? "",
                  onChange: (_) => R(_),
                }),
              }),
            }),
        ],
      })
    );
  },
  vl = "https://embed.diagrams.net",
  kl = (t, s, i, n) => {
    const o = Le(s.name),
      p = new URLSearchParams({
        embed: "1",
        embedRT: "1",
        configure: "1",
        libraries: "1",
        spin: "1",
        proto: "json",
        keepmodified: "1",
        p: "nxtcld",
        lang: Rt.t("fileManager.drawioLng"),
        dark: n ? "1" : "0",
      });
    return o == "dwb" && p.set("ui", "sketch"), i && p.set("chrome", "0"), (t ?? vl) + "?" + p.toString();
  },
  Cl = async (t, s, i, n, o, p) => {
    switch (s.funtionName) {
      case "getCurrentUser":
        const r = te.currentUser();
        nt(t, s, [
          r ? { displayName: r == null ? void 0 : r.user.nickname, uid: r == null ? void 0 : r.user.id } : null,
        ]);
        break;
      case "saveFile":
        try {
          const l = await i(Fn(s.functionArgs[2], n.file, !1));
          l && nt(t, s, [{ etag: l.primary_entity, size: l.size }]);
        } catch (l) {
          nt(t, s, null, `${l}`);
        }
        break;
      case "getFileInfo":
        try {
          const l = await i(It({ uri: n.file.path }));
          l &&
            nt(t, s, [
              {
                id: l.id,
                size: l.size,
                writeable: o,
                name: l.name,
                etag: l.primary_entity,
                versionEnabled: !0,
                ver: 2,
                instanceId: p,
              },
            ]);
        } catch (l) {
          nt(t, s, null, `${l}`);
        }
        break;
    }
  },
  nt = (t, s, i, n) => {
    var o = { action: "remoteInvokeResponse", msgMarkers: s.msgMarkers };
    n ? (o.error = { errResp: n }) : i != null && (o.resp = i),
      console.log("Send remote invoke response PostMessage", o),
      t.postMessage(JSON.stringify(o), "*");
  },
  Sl = () => {
    const { t } = O(),
      s = N(),
      i = X(),
      n = C((v) => v.globalState.drawIOViewer),
      o = C((v) => v.siteConfig.basic.config.instance_id),
      p = Te(n != null && n.file ? [n == null ? void 0 : n.file] : []),
      r = a.useRef(!1),
      [l, c] = a.useState(!1),
      [d, h] = a.useState(""),
      [u, x] = a.useState(!1),
      f = a.useRef(),
      [m, g] = a.useState(null);
    a.useEffect(() => {
      if (!n) return;
      if (!n.open) {
        h("");
        return;
      }
      x(!1), (r.current = Ze(p) && !(n != null && n.version)), (f.current = void 0);
      const v = kl(n.host, n.file, !r.current, i.palette.mode == "dark");
      return (
        h(v),
        window.addEventListener("message", y, !1),
        () => {
          window.removeEventListener("message", y, !1);
        }
      );
    }, [n == null ? void 0 : n.open]);
    const y = async (v) => {
        var M, S, I, V, P, D, z, T, R, _;
        console.log("Received PostMessage from " + v.origin, v.data);
        let A;
        try {
          A = JSON.parse(v.data);
        } catch {
          return;
        }
        if (n != null && n.file)
          switch (A.event) {
            case "exit":
              k();
              break;
            case "configure":
              (S = (M = f.current) == null ? void 0 : M.contentWindow) == null ||
                S.postMessage(JSON.stringify({ action: "configure", config: {} }), "*");
              break;
            case "remoteInvoke":
              (I = f.current) != null &&
                I.contentWindow &&
                Cl((V = f.current) == null ? void 0 : V.contentWindow, A, s, n, r.current, o);
              break;
            case "save":
              try {
                s(Fn(A.xml, n.file, !1)),
                  (D = (P = f.current) == null ? void 0 : P.contentWindow) == null ||
                    D.postMessage(
                      JSON.stringify({
                        action: "status",
                        message: t("fileManager.saveSuccess", { time: lo(fe()) }),
                        modified: !1,
                      }),
                      "*",
                    );
              } catch {}
              break;
            case "init":
              try {
                const j = await s(Bt(n.file, n.version)),
                  w = new TextDecoder().decode(j);
                (T = (z = f.current) == null ? void 0 : z.contentWindow) == null ||
                  T.postMessage(
                    JSON.stringify({
                      action: "load",
                      autosave: r.current,
                      title: n.file.name,
                      xml: w,
                      desc: {
                        xml: w,
                        id: n.file.id,
                        size: j.byteLength,
                        etag: n.file.primary_entity,
                        writeable: r.current,
                        name: n.file.name,
                        versionEnabled: !0,
                        ver: 2,
                        instanceId: o ?? "",
                      },
                      disableAutoSave: !r.current,
                    }),
                    "*",
                  ),
                  r.current &&
                    ((_ = (R = f.current) == null ? void 0 : R.contentWindow) == null ||
                      _.postMessage(JSON.stringify({ action: "remoteInvokeReady" }), "*"));
              } catch {
                k();
              }
              break;
          }
      },
      k = a.useCallback(() => {
        s(co());
      }, [s]);
    a.useCallback(
      (v) => {
        g(v.currentTarget);
      },
      [s],
    );
    const b = a.useCallback((v) => {
      x(!0), (f.current = v.currentTarget);
    }, []);
    return e.jsxs(we, {
      file: n == null ? void 0 : n.file,
      loading: l,
      readOnly: !r.current,
      fullScreenToggle: !0,
      dialogProps: { open: !!(n && n.open), onClose: k, fullWidth: !0, maxWidth: "lg" },
      children: [
        e.jsx(be, {
          anchorEl: m,
          open: !!m,
          onClose: () => g(null),
          slotProps: { paper: { sx: { minWidth: 150 } } },
          children: e.jsx(Q, { dense: !0, children: e.jsx(Y, { children: t("modals.saveAs") }) }),
        }),
        (!u || !d) && e.jsx(xe, {}),
        d &&
          e.jsx(F, {
            onLoad: b,
            src: d,
            component: "iframe",
            sx: {
              width: "100%",
              height: u ? "100%" : 0,
              border: "none",
              minHeight: u ? "calc(100vh - 200px)" : 0,
              visibility: u ? "visible" : "hidden",
            },
          }),
      ],
    });
  },
  wl = a.lazy(() => ft(() => import("./Editor-CzeXhx9-.js"), __vite__mapDeps([8, 1, 2, 3, 9, 10, 11, 12, 6, 7, 13]))),
  Ml = () => {
    var _;
    const { t } = O(),
      s = N(),
      i = X(),
      n = C((j) => j.globalState.markdownViewer),
      o = Te(n != null && n.file ? [n == null ? void 0 : n.file] : []),
      p = Ze(o),
      [r, l] = a.useState(!1),
      [c, d] = a.useState(""),
      [h, u] = a.useState(""),
      [x, f] = a.useState(!1),
      [m, g] = a.useState(!0),
      [y, k] = a.useState(null),
      [b, v] = a.useState(null),
      A = a.useRef(() => {}),
      M = a.useCallback(() => {
        !n ||
          !n.open ||
          (f(!1),
          v(null),
          s(Bt(n.file, n.version))
            .then((j) => {
              const w = new TextDecoder().decode(j);
              d(w), u(w), f(!0);
            })
            .catch(() => {
              I();
            }));
      }, [n]);
    a.useEffect(() => {
      !n || !n.open || (g(!0), M());
    }, [n == null ? void 0 : n.open]);
    const S = a.useMemo(() => (n != null && n.open ? s(po()) : null), [n == null ? void 0 : n.open]),
      I = a.useCallback(() => {
        s(uo());
      }, [s]),
      V = a.useCallback(
        (j) => {
          k(j.currentTarget);
        },
        [s],
      ),
      P = a.useCallback(
        (j) => {
          n != null &&
            n.file &&
            (l(!0),
            s(ho(h, n.file, n.version, j))
              .then(() => {
                g(!0);
              })
              .finally(() => {
                l(!1);
              }));
        },
        [h, n],
      ),
      D = a.useCallback((j) => {
        u(j), g(!1);
      }, []),
      z = a.useCallback(() => {
        !m && p && P(!1);
      }, [m, p, P]);
    a.useEffect(() => {
      A.current = () => {
        !m && p && P(!1);
      };
    }, [m, p, P]);
    const T = a.useCallback(
        (j) => {
          var w;
          return s(xo(j, ((w = n == null ? void 0 : n.file) == null ? void 0 : w.path) ?? ""));
        },
        [s, (_ = n == null ? void 0 : n.file) == null ? void 0 : _.path],
      ),
      R = a.useCallback(async (j) => s(mo(j)), [s]);
    return e.jsxs(we, {
      file: n == null ? void 0 : n.file,
      loading: r,
      readOnly: !p,
      actions: e.jsx(F, {
        sx: { display: "flex", gap: 1 },
        children:
          p &&
          e.jsxs(Ot, {
            disabled: r || !x || m,
            disableElevation: !0,
            variant: "contained",
            children: [
              e.jsx(Tt, {
                loading: r,
                variant: "contained",
                onClick: () => P(!1),
                children: e.jsx("span", { children: t("fileManager.save") }),
              }),
              e.jsx(Pe, { size: "small", onClick: V, children: e.jsx(Wt, { sx: { fontSize: "12px!important" } }) }),
            ],
          }),
      }),
      fullScreenToggle: !0,
      dialogProps: { open: !!(n && n.open), onClose: I, fullWidth: !0, maxWidth: "lg" },
      children: [
        e.jsx(be, {
          anchorEl: y,
          open: !!y,
          onClose: () => k(null),
          slotProps: { paper: { sx: { minWidth: 150 } } },
          children: e.jsx(Q, { onClick: () => P(!0), dense: !0, children: e.jsx(Y, { children: t("modals.saveAs") }) }),
        }),
        !x && e.jsx(xe, {}),
        x &&
          e.jsx(a.Suspense, {
            fallback: e.jsx(xe, {}),
            children: e.jsx(wl, {
              value: h,
              readOnly: !p,
              darkMode: i.palette.mode === "dark",
              initialValue: c,
              onChange: (j) => D(j),
              onSaveShortcut: z,
              imagePreviewHandler: T,
              imageAutocompleteSuggestions: S,
              imageUploadHandler: R,
            }),
          }),
      ],
    });
  };
function _l(t) {
  return e.jsx(he, {
    ...t,
    children: e.jsx("path", {
      d: "M2 7.25A3.25 3.25 0 0 1 5.25 4h13.5A3.25 3.25 0 0 1 22 7.25v9.5A3.25 3.25 0 0 1 18.75 20H5.25A3.25 3.25 0 0 1 2 16.75zM5.25 5.5A1.75 1.75 0 0 0 3.5 7.25v9.5c0 .966.784 1.75 1.75 1.75h13.5a1.75 1.75 0 0 0 1.75-1.75v-9.5a1.75 1.75 0 0 0-1.75-1.75zM5 13.25a.75.75 0 0 1 .75-.75h7.5a.75.75 0 0 1 0 1.5h-7.5a.75.75 0 0 1-.75-.75m10.75-.75a.75.75 0 0 0 0 1.5h2.5a.75.75 0 0 0 0-1.5zM5 16.25a.75.75 0 0 1 .75-.75h3.5a.75.75 0 0 1 0 1.5h-3.5a.75.75 0 0 1-.75-.75m6.75-.75a.75.75 0 0 0 0 1.5h6.5a.75.75 0 0 0 0-1.5z",
    }),
  });
}
const Al = ke(
    e.jsx("path", {
      d: "M20.063 8.445a3.218 3.218 0 0 1-.002 4.551l-7.123 7.112a2.251 2.251 0 0 1-.943.562l-4.293 1.29a1 1 0 0 1-1.24-1.264l1.362-4.228c.11-.34.3-.65.552-.903l7.133-7.121a3.22 3.22 0 0 1 4.554.002m-3.494 1.06l-7.133 7.12a.75.75 0 0 0-.184.301l-1.07 3.323l3.382-1.015a.749.749 0 0 0 .314-.188L19 11.936a1.718 1.718 0 1 0-2.431-2.432M8.15 2.37l.05.105l3.253 8.249l-1.157 1.155L9.556 10H5.443l-.995 2.52a.75.75 0 0 1-.876.454l-.098-.031a.75.75 0 0 1-.452-.876l.03-.098l3.754-9.495a.75.75 0 0 1 1.345-.104m-.648 2.422L6.036 8.5h2.928z",
    }),
    "TextEditStyle",
  ),
  Dl = ({ onSaveSubmit: t, onClose: s, open: i, ...n }) => {
    const { t: o } = O(),
      p = X(),
      [r, l] = a.useState({}),
      c = (h, u) => {
        l((x) => ({ ...x, fontSize: u }));
      };
    a.useEffect(() => {
      i && l(te.getWithFallback(le.SubtitleStyle));
    }, [i]);
    const d = () => {
      t(r), s && s({}, "backdropClick");
    };
    return e.jsx(re, {
      title: o("application:fileManager.subtitleStyles"),
      showActions: !0,
      showCancel: !0,
      onAccept: d,
      dialogProps: { fullWidth: !0, onClose: s, open: i, maxWidth: "sm", ...n },
      children: e.jsx(oe, {
        children: e.jsxs(ie, {
          spacing: 2,
          direction: "row",
          children: [
            e.jsxs(F, {
              children: [
                e.jsx(ee, { variant: "body2", gutterBottom: !0, children: o("fileManager.color") }),
                e.jsx(fo, {
                  presetColors: !1,
                  style: {
                    border: "none",
                    boxShadow: "none",
                    padding: 0,
                    margin: 0,
                    background: p.palette.background.default + "!important",
                  },
                  disableAlpha: !0,
                  color: r.fontColor ?? "#fff",
                  onChange: (h) => {
                    l((u) => ({ ...u, fontColor: h.hex }));
                  },
                }),
              ],
            }),
            e.jsxs(F, {
              sx: { flexGrow: 1 },
              children: [
                e.jsx(ee, { variant: "body2", gutterBottom: !0, children: o("fileManager.fontSize") }),
                e.jsx(Dt, {
                  size: "small",
                  valueLabelDisplay: "auto",
                  min: 5,
                  step: 1,
                  max: 50,
                  value: r.fontSize ?? 20,
                  onChange: c,
                }),
                e.jsx(F, {
                  children: e.jsx(ee, {
                    sx: {
                      textAlign: "center",
                      textShadow:
                        "#000 1px 0 1px,#000 0 1px 1px,#000 -1px 0 1px,#000 0 -1px 1px,#000 1px 1px 1px,#000 -1px -1px 1px,#000 1px -1px 1px,#000 -1px 1px 1px",
                      fontSize: `${r.fontSize ?? 20}px`,
                      color: r.fontColor ?? "#fff",
                    },
                    children: o("fileManager.testSubtitleStyle"),
                  }),
                }),
              ],
            }),
          ],
        }),
      }),
    });
  },
  zl = a.lazy(() => ft(() => import("./Artplayer-B5_AvCvT.js"), __vite__mapDeps([14, 1, 2, 3, 6, 7, 15, 16, 17, 18]))),
  at = "https://cloudreve_masked/",
  Pl = 5 * 1e3,
  Ll = () => {
    var T, R, _;
    const { t } = O(),
      s = N(),
      i = X(),
      n = de(i.breakpoints.down("sm")),
      o = C((j) => j.globalState.videoViewer);
    a.useState(!1);
    const [p, r] = a.useState(null),
      [l, c] = a.useState(null),
      d = a.useRef(void 0),
      [h, u] = a.useState([]),
      [x, f] = a.useState(null),
      [m, g] = a.useState(!1),
      y = a.useRef(null),
      k = a.useMemo(() => te.getWithFallback(le.SubtitleStyle), []),
      b = a.useCallback(
        async (j) => {
          if (p) {
            if ((c(null), !j)) {
              f(null), (p.subtitle.show = !1);
              return;
            }
            f(j);
            try {
              const w = await s(Be({ uris: [me(j)] }));
              p.subtitle.switch(w.urls[0].url, { type: Le(j.name) ?? "" }), (p.subtitle.show = !0);
            } catch (w) {
              console.error(w);
              return;
            }
          }
        },
        [p],
      ),
      v = a.useCallback(() => {
        if (!(o != null && o.file)) return;
        const j = s(Os());
        u(j), j.length > 0 && j[0].name.startsWith(Ws(o.file.name) + ".") && b(j[0]);
      }, [o == null ? void 0 : o.file, b]),
      A = a.useCallback(() => {
        if (!o || !o.file || !p) return;
        const j = !d.current;
        if (Le(o.file.name) === "m3u8") {
          const L = new ve(me(o.file)),
            B = `${at}${L.path()}`;
          p.switchUrl(B), v();
          return;
        }
        s(Be({ uris: [me(o.file)], entity: o.version }))
          .then((L) => {
            const B = p.currentTime;
            y.current = L.urls[0].url;
            let q = fe(L.expires).diff(fe(), "millisecond") - Pl;
            if (
              (q < 0 && (q = 2e3),
              (d.current = setTimeout(A, q)),
              p.switchUrl(L.urls[0].url).then(() => {
                p.currentTime = B;
              }),
              j)
            ) {
              const E = s(Os());
              u(E), E.length > 0 && E[0].name.startsWith(Ws(o.file.name) + ".") && b(E[0]);
            }
          })
          .catch((L) => {
            console.error(L), S();
          });
      }, [o == null ? void 0 : o.file, p, v]),
      M = a.useMemo(() => {
        var w;
        if (!o || !((w = o.file) != null && w.metadata)) return;
        const j = {};
        return (
          Object.keys(o.file.metadata).map((L) => {
            var B, q, E, H, se, Ce;
            if (L.startsWith("stream:chapter_")) {
              const ye = L.split("_")[1],
                Ss = L.replace(`stream:chapter_${ye}_`, "");
              switch ((j[ye] || (j[ye] = { start: 0, end: 0, title: "" }), Ss)) {
                case "start_time":
                  j[ye].start = parseFloat(
                    ((q = (B = o.file) == null ? void 0 : B.metadata) == null ? void 0 : q[L]) ?? "0",
                  );
                  break;
                case "end_time":
                  j[ye].end = parseFloat(
                    ((H = (E = o.file) == null ? void 0 : E.metadata) == null ? void 0 : H[L]) ?? "0",
                  );
                  break;
                case "name":
                  j[ye].title = ((Ce = (se = o.file) == null ? void 0 : se.metadata) == null ? void 0 : Ce[L]) ?? "";
                  break;
              }
            }
          }),
          Object.values(j).map((L) => ({ start: L.start, end: L.end, title: L.title }))
        );
      }, [o]);
    a.useEffect(() => {
      p &&
        (p.on("ready", () => {
          p.autoHeight(), p.autoSize();
        }),
        p.query(".art-video").addEventListener(
          "leavepictureinpicture",
          () => {
            p.pause();
          },
          !1,
        ),
        A());
    }, [p]),
      a.useEffect(() => {
        if (!o || !o.open) {
          d.current && (clearTimeout(d.current), (d.current = void 0));
          return;
        }
        r(null), u([]), f(null);
      }, [o == null ? void 0 : o.open]);
    const S = a.useCallback(() => {
        s(go());
      }, [s]),
      I = a.useCallback(
        (j) => {
          c(j.currentTarget);
        },
        [s],
      ),
      V = a.useCallback(() => {
        g(!0), c(null);
      }, []),
      P = a.useCallback(
        (j) => {
          te.set(le.SubtitleStyle, j),
            g(!1),
            p && p.subtitle.style({ color: j.fontColor ?? "#fff", fontSize: `${j.fontSize ?? 20}px` });
        },
        [p],
      ),
      D = a.useCallback(
        async (j, w) => {
          let L = "";
          if (w) {
            if (!y.current) return j;
            const B = new URL(y.current),
              q = new URL(j);
            if (B.origin != q.origin) return j;
            const E = B.pathname.split("/"),
              H = q.pathname.split("/");
            let se = 0;
            for (; se < E.length && se < H.length && E[se] === H[se]; ) se++;
            const Ce = H.slice(se).join("/");
            if (!(o != null && o.file)) return j;
            const ye = new ve(me(o == null ? void 0 : o.file));
            return (L = (se == 0 ? new ve(ye.base()) : ye.parent()).join(Ce).path()), `${at}${L}`;
          } else {
            if (j.startsWith("http://") || j.startsWith("https://") || !(o != null && o.file)) return j;
            const B = new ve(me(o == null ? void 0 : o.file));
            return (L = (j.startsWith("/") ? new ve(B.base()) : B.parent()).join(j).path()), `${at}${L}`;
          }
        },
        [o == null ? void 0 : o.file],
      ),
      z = a.useCallback(
        async (j) => {
          if (!(o != null && o.file) || !j.startsWith(at)) return j;
          j = j.replace(at, "");
          const w = new ve(me(o.file)),
            B = new ve(w.base()).join(...j.split("/"));
          try {
            return (await s(Be({ uris: [B.toString()] }))).urls[0].url;
          } catch (q) {
            return console.error(q), j;
          }
        },
        [s, o == null ? void 0 : o.file],
      );
    return e.jsxs(we, {
      file: o == null ? void 0 : o.file,
      actions: e.jsx(F, {
        sx: { display: "flex", gap: 1 },
        children: e.jsx(ae, {
          title: t("fileManager.subtitles"),
          children: e.jsx(J, { onClick: I, children: e.jsx(_l, { fontSize: "small" }) }),
        }),
      }),
      fullScreenToggle: !0,
      toggleFullScreen: () => p && (p.fullscreenWeb = !0),
      dialogProps: { open: !!(o && o.open), onClose: S, fullWidth: !0, maxWidth: "md" },
      children: [
        e.jsx(Dl, { onSaveSubmit: P, open: m, onClose: () => g(!1) }),
        e.jsxs(be, {
          anchorEl: l,
          open: !!l,
          onClose: () => c(null),
          slotProps: { paper: { sx: { minWidth: 150, maxWidth: 250 } } },
          children: [
            e.jsxs(Q, {
              dense: !0,
              onClick: () => V(),
              children: [
                e.jsxs(pe, { children: [e.jsx(Al, { fontSize: "small" }), " "] }),
                e.jsx(Y, { children: t("application:fileManager.subtitleStyles") }),
              ],
            }),
            e.jsx(xt, {}),
            h.length == 0 &&
              e.jsx(F, {
                sx: { p: 1 },
                children: e.jsx(ee, {
                  variant: "caption",
                  color: "text.secondary",
                  children: t("application:fileManager.noSubtitle"),
                }),
              }),
            h.length > 0 &&
              e.jsx(Q, {
                onClick: () => b(),
                dense: !0,
                children: e.jsx("em", {
                  children: e.jsx(Y, { primary: t("application:fileManager.disableSubtitle") }),
                }),
              }),
            h.map((j) =>
              e.jsx(
                ae,
                {
                  title: j.name,
                  children: e.jsxs(Q, {
                    onClick: () => b(j),
                    dense: !0,
                    children: [
                      e.jsx(Y, {
                        primary: j.name,
                        slotProps: {
                          primary: { sx: { textOverflow: "ellipsis", whiteSpace: "nowrap", overflow: "hidden" } },
                        },
                      }),
                      (x == null ? void 0 : x.id) == j.id &&
                        e.jsx(pe, { sx: { minWidth: "0!important" }, children: e.jsx(De, {}) }),
                    ],
                  }),
                },
                j.id,
              ),
            ),
          ],
        }),
        e.jsx(a.Suspense, {
          fallback: e.jsx(xe, { minHeight: "calc(100vh - 350px)" }),
          children: e.jsx(
            zl,
            {
              m3u8UrlTransform: D,
              getEntityUrl: z,
              sx: { width: "100%", height: "100%", minHeight: "calc(100vh - 350px)" },
              chapters: M,
              getInstance: (j) => r(j),
              option: {
                title: (T = o == null ? void 0 : o.file) == null ? void 0 : T.name,
                theme: i.palette.primary.main,
                id: (R = o == null ? void 0 : o.file) == null ? void 0 : R.path,
                autoPlayback: !0,
                subtitleOffset: !0,
                fastForward: !0,
                flip: !0,
                setting: !0,
                playbackRate: !0,
                aspectRatio: !0,
                hotkey: !0,
                pip: !n,
                fullscreen: !0,
                fullscreenWeb: !0,
                autoHeight: !0,
                whitelist: ["*"],
                moreVideoAttr: { "webkit-playsinline": !0, playsInline: !0 },
                subtitle: { style: { color: k.fontColor ?? "#fff", fontSize: `${k.fontSize ?? 20}px` } },
                plugins: [],
                lang: t("artPlayerLocaleCode", { ns: "common" }),
              },
            },
            (_ = o == null ? void 0 : o.file) == null ? void 0 : _.path,
          ),
        }),
      ],
    });
  },
  Fl = "/pdfviewer.html",
  Tl = () => {
    const t = N(),
      s = X(),
      i = C((c) => c.globalState.pdfViewer),
      [n, o] = a.useState(!1),
      [p, r] = a.useState("");
    a.useEffect(() => {
      !i ||
        !i.open ||
        (r(""),
        t(Be({ uris: [me(i.file)], entity: i.version }))
          .then((c) => {
            const d = new URLSearchParams();
            d.set("file", c.urls[0].url),
              d.set("lng", Rt.language),
              d.set("darkMode", s.palette.mode == "dark" ? "2" : "1"),
              r(`${Fl}?${d.toString()}`);
          })
          .catch(() => {
            l();
          }));
    }, [i]);
    const l = a.useCallback(() => {
      t(jo());
    }, [t]);
    return e.jsx(e.Fragment, {
      children: e.jsxs(we, {
        file: i == null ? void 0 : i.file,
        loading: n,
        fullScreenToggle: !0,
        dialogProps: { open: !!(i && i.open), onClose: l, fullWidth: !0, maxWidth: "lg" },
        children: [
          !p && e.jsx(xe, {}),
          p &&
            e.jsx(F, {
              onLoad: () => o(!1),
              src: p,
              sx: { width: "100%", height: n ? 0 : "100%", border: "none", minHeight: n ? 0 : "calc(100vh - 200px)" },
              component: "iframe",
            }),
        ],
      }),
    });
  },
  Il = () => {
    O();
    const t = N();
    X();
    const s = C((p) => p.globalState.customViewer),
      [i, n] = a.useState(!1);
    a.useEffect(() => {
      !s || !s.open || n(!0);
    }, [s]);
    const o = a.useCallback(() => {
      t(bo());
    }, [t]);
    return e.jsx(e.Fragment, {
      children: e.jsxs(we, {
        file: s == null ? void 0 : s.file,
        fullScreenToggle: !0,
        dialogProps: { open: !!(s && s.open), onClose: o, fullWidth: !0, maxWidth: "lg" },
        children: [
          i && e.jsx(xe, {}),
          s &&
            e.jsx(F, {
              onLoad: () => n(!1),
              src: s.url,
              sx: { width: "100%", height: i ? 0 : "100%", border: "none", minHeight: i ? 0 : "calc(100vh - 200px)" },
              component: "iframe",
            }),
        ],
      }),
    });
  },
  El = mt.lazy(() => ft(() => import("./Epub-DOMSbPbt.js"), __vite__mapDeps([19, 1, 2, 3, 6, 7]))),
  Ol = () => {
    O();
    const t = N();
    X();
    const s = C((h) => h.globalState.epubViewer),
      [i, n] = a.useState(!1),
      [o, p] = a.useState(""),
      [r, l] = a.useState(null),
      c = a.useCallback(
        (h) => {
          l(h), s != null && s.file && te.set(`${le.BookLocationPrefix}_${s.file.id}`, h);
        },
        [s == null ? void 0 : s.file],
      );
    a.useEffect(() => {
      if (!s || !s.open) {
        l(null);
        return;
      }
      p(""),
        t(Be({ uris: [me(s.file)], entity: s.version }))
          .then((h) => {
            p(h.urls[0].url);
            const u = te.get(`${le.BookLocationPrefix}_${s.file.id}`);
            u && l(u);
          })
          .catch(() => {
            d();
          });
    }, [s]);
    const d = a.useCallback(() => {
      t(yo());
    }, [t]);
    return e.jsx(e.Fragment, {
      children: e.jsxs(we, {
        file: s == null ? void 0 : s.file,
        loading: i,
        dialogProps: { open: !!(s && s.open), onClose: d, fullWidth: !0, fullScreen: !0, maxWidth: "lg" },
        children: [
          !o && e.jsx(xe, {}),
          o &&
            e.jsx(a.Suspense, {
              fallback: e.jsx(xe, {}),
              children: e.jsx(F, {
                sx: { width: "100%", height: "100%", minHeight: "calc(100vh - 200px)" },
                children: e.jsx(El, {
                  loadingView: e.jsx(xe, {}),
                  location: r,
                  locationChanged: c,
                  epubInitOptions: { openAs: "epub" },
                  showToc: !0,
                  url: o,
                }),
              }),
            }),
        ],
      }),
    });
  },
  Wl = a.lazy(() => ft(() => import("./Excalidraw-Bo992XcZ.js"), __vite__mapDeps([20, 1, 2, 3, 10, 9, 11, 6, 7, 21]))),
  Rl = mt.forwardRef(function (s, i) {
    return e.jsx(hs, { ref: i, ...s });
  }),
  Bl = () => {
    const { t } = O(),
      s = N(),
      i = X(),
      n = C((P) => P.globalState.excalidrawViewer),
      o = Te(n != null && n.file ? [n == null ? void 0 : n.file] : []),
      p = Ze(o),
      [r, l] = a.useState(!1),
      [c, d] = a.useState(""),
      [h, u] = a.useState(""),
      [x, f] = a.useState(!1),
      [m, g] = a.useState(!0),
      [y, k] = a.useState(null),
      b = a.useRef(() => {}),
      v = a.useCallback(() => {
        !n ||
          !n.open ||
          (f(!1),
          s(Bt(n.file, n.version))
            .then((P) => {
              const D = new TextDecoder().decode(P);
              d(D), u(D), f(!0);
            })
            .catch(() => {
              A();
            }));
      }, [n]);
    a.useEffect(() => {
      !n || !n.open || (g(!0), v());
    }, [n == null ? void 0 : n.open]);
    const A = a.useCallback(() => {
        s(vo());
      }, [s]),
      M = a.useCallback(
        (P) => {
          k(P.currentTarget);
        },
        [s],
      ),
      S = a.useCallback(
        (P) => {
          n != null &&
            n.file &&
            (l(!0),
            s(ko(h, n.file, n.version, P))
              .then(() => {
                g(!0);
              })
              .finally(() => {
                l(!1);
              }));
        },
        [h, n],
      ),
      I = a.useCallback((P) => {
        u(P), g(!1);
      }, []),
      V = a.useCallback(() => {
        !m && p && S(!1);
      }, [m, p, S]);
    return (
      a.useEffect(() => {
        b.current = () => {
          !m && p && S(!1);
        };
      }, [m, p, S]),
      e.jsxs(we, {
        file: n == null ? void 0 : n.file,
        loading: r,
        readOnly: !p,
        actions: e.jsx(F, {
          sx: { display: "flex", gap: 1 },
          children:
            p &&
            e.jsxs(Ot, {
              disabled: r || !x || m,
              disableElevation: !0,
              variant: "contained",
              children: [
                e.jsx(Tt, {
                  loading: r,
                  variant: "contained",
                  onClick: () => S(!1),
                  children: e.jsx("span", { children: t("fileManager.save") }),
                }),
                e.jsx(Pe, { size: "small", onClick: M, children: e.jsx(Wt, { sx: { fontSize: "12px!important" } }) }),
              ],
            }),
        }),
        fullScreenToggle: !0,
        dialogProps: { open: !!(n && n.open), onClose: A, fullWidth: !0, maxWidth: "lg", TransitionComponent: Rl },
        children: [
          e.jsx(be, {
            anchorEl: y,
            open: !!y,
            onClose: () => k(null),
            slotProps: { paper: { sx: { minWidth: 150 } } },
            children: e.jsx(Q, {
              onClick: () => S(!0),
              dense: !0,
              children: e.jsx(Y, { children: t("modals.saveAs") }),
            }),
          }),
          !x && e.jsx(xe, {}),
          x &&
            e.jsx(a.Suspense, {
              fallback: e.jsx(xe, {}),
              children: e.jsx(Wl, {
                language: Rt.language,
                value: h,
                initialValue: c,
                readOnly: !p,
                darkMode: i.palette.mode === "dark",
                onChange: (P) => I(P),
                onSaveShortcut: V,
              }),
            }),
        ],
      })
    );
  },
  Hl = () => {
    const { t } = O(),
      s = N(),
      [i, n] = a.useState(""),
      [o, p] = a.useState(""),
      [r, l] = a.useState(!1),
      c = a.useRef(null),
      d = a.useRef(null),
      h = C((v) => v.globalState.createNewDialogOpen),
      u = C((v) => v.globalState.createNewPromiseId),
      x = C((v) => v.globalState.createNewDialogType),
      f = C((v) => v.globalState.createNewDialogDefault),
      m = C((v) => v.globalState.createNewDialogFmIndex) ?? 0;
    a.useEffect(() => {
      h && n(f ?? "");
    }, [h]);
    const g = a.useCallback(() => {
        var v;
        s(Rs()), u && ((v = Bs[u]) == null || v.reject("cancel"));
      }, [s, u]),
      y = a.useCallback(
        (v) => {
          v && v.preventDefault(),
            l(!0),
            s(Co(m, i, x == qt.folder ? Se.folder : Se.file))
              .then((A) => {
                var M;
                u && ((M = Bs[u]) == null || M.resolve(A)), s(Rs());
              })
              .finally(() => {
                l(!1);
              });
        },
        [u, i],
      ),
      k = a.useCallback(() => {
        c.current && c.current.reportValidity() && y();
      }, [c, y]);
    a.useEffect(() => {
      if (h) {
        const v = i.lastIndexOf(".");
        setTimeout(() => d.current && d.current.setSelectionRange(0, v > 0 ? v : i.length), 200);
      }
    }, [h, d.current]);
    const b = a.useCallback(
      (v) => {
        n(v.target.value), o && s(Cn({ index: 0, value: void 0 }));
      },
      [s, n, o],
    );
    return e.jsx(re, {
      title: t(x == qt.folder ? "application:fileManager.newFolder" : "application:fileManager.newFile"),
      showActions: !0,
      loading: r,
      showCancel: !0,
      onAccept: k,
      dialogProps: { open: h ?? !1, onClose: g, fullWidth: !0, maxWidth: "sm", disableRestoreFocus: !0 },
      children: e.jsx(oe, {
        children: e.jsx(ie, {
          spacing: 2,
          children: e.jsx("form", {
            ref: c,
            onSubmit: y,
            children: e.jsx(Ue, {
              inputRef: d,
              variant: "filled",
              autoFocus: !0,
              error: !!o,
              helperText: o,
              margin: "dense",
              label: t(x == qt.folder ? "application:modals.folderName" : "application:modals.fileName"),
              type: "text",
              value: i,
              onChange: b,
              fullWidth: !0,
              required: !0,
            }),
          }),
        }),
      }),
    });
  },
  Nl = () => {
    const { t } = O(),
      s = N(),
      { enqueueSnackbar: i } = Ie(),
      n = X(),
      o = de(n.breakpoints.down("sm")),
      [p, r] = a.useState(!1),
      [l, c] = a.useState("archive.zip"),
      [d, h] = a.useState(""),
      u = C((y) => y.globalState.createArchiveDialogOpen),
      x = C((y) => y.globalState.createArchiveDialogFiles),
      f = C((y) => y.fileManager[ne.main].pure_path);
    a.useEffect(() => {
      u && h(f ?? "");
    }, [u]);
    const m = a.useCallback(() => {
        s(Hs());
      }, [s]),
      g = a.useCallback(() => {
        if (!x) return;
        r(!0);
        const y = new ve(d);
        s(So({ src: x == null ? void 0 : x.map((k) => me(k)), dst: y.join(l).toString() }))
          .then(() => {
            s(Hs()), i({ message: t("modals.taskCreated"), variant: "success", action: xs() });
          })
          .finally(() => {
            r(!1);
          });
      }, [x, l, d]);
    return e.jsx(re, {
      title: t("application:fileManager.createArchive"),
      showActions: !0,
      loading: p,
      showCancel: !0,
      disabled: !l,
      onAccept: g,
      dialogProps: { open: u ?? !1, onClose: m, fullWidth: !0, maxWidth: "sm", disableRestoreFocus: !0 },
      children: e.jsx(oe, {
        sx: { pt: 1 },
        children: e.jsxs(ie, {
          spacing: 3,
          children: [
            e.jsx(Tn, {
              icon: e.jsx(wo, {}),
              variant: "outlined",
              value: l,
              onChange: (y) => c(y.target.value),
              label: t("application:modals.zipFileName"),
              fullWidth: !0,
            }),
            e.jsx(ie, {
              spacing: 3,
              direction: o ? "column" : "row",
              children: e.jsx(ms, { onChange: h, path: d, label: t("modals.saveToTitle") }),
            }),
          ],
        }),
      }),
    });
  },
  Xn = ({ file: t, label: s }) =>
    e.jsx(Mo, {
      variant: "outlined",
      InputProps: { readOnly: !0, startAdornment: e.jsx(wt, { file: t, clickable: !1 }) },
      label: s,
      fullWidth: !0,
    }),
  Vl = () => {
    const { t } = O(),
      s = N(),
      { enqueueSnackbar: i } = Ie(),
      n = X(),
      o = de(n.breakpoints.down("sm")),
      [p, r] = a.useState(!1),
      [l, c] = a.useState(""),
      [d, h] = a.useState(Ne),
      [u, x] = a.useState("");
    a.useState(!1);
    const f = C((S) => S.globalState.extractArchiveDialogOpen),
      m = C((S) => S.globalState.extractArchiveDialogFile),
      g = C((S) => S.fileManager[ne.main].pure_path),
      y = C((S) => S.globalState.extractArchiveDialogMask),
      k = C((S) => S.globalState.extractArchiveDialogEncoding);
    a.useEffect(() => {
      h(k ?? Ne);
    }, [k]);
    const b = a.useMemo(() => Le((m == null ? void 0 : m.name) ?? "") === "zip", [m == null ? void 0 : m.name]),
      v = a.useMemo(() => {
        const S = Le((m == null ? void 0 : m.name) ?? "");
        return S === "zip" || S === "7z";
      }, [m == null ? void 0 : m.name]);
    a.useEffect(() => {
      f && c(g ?? "");
    }, [f]);
    const A = a.useCallback(() => {
        s(Ns());
      }, [s]),
      M = a.useCallback(() => {
        m &&
          (r(!0),
          s(
            _o({
              src: [me(m)],
              dst: l,
              encoding: b && d != Ne ? d : void 0,
              password: v && u ? u : void 0,
              file_mask: y ?? void 0,
            }),
          )
            .then(() => {
              s(Ns()), i({ message: t("modals.taskCreated"), variant: "success", action: xs() });
            })
            .finally(() => {
              r(!1);
            }));
      }, [m, d, l, v, b, u, y]);
    return e.jsx(re, {
      title: t("application:fileManager.extractArchive"),
      showActions: !0,
      loading: p,
      showCancel: !0,
      onAccept: M,
      dialogProps: { open: f ?? !1, onClose: A, fullWidth: !0, maxWidth: "sm", disableRestoreFocus: !0 },
      children: e.jsx(oe, {
        sx: { pt: 1 },
        children: e.jsxs(Qe, {
          container: !0,
          spacing: 3,
          children: [
            m &&
              e.jsx(Qe, {
                size: { xs: 12, md: b ? 6 : 12 },
                children: e.jsx(Xn, { file: m, label: t("modals.archiveFile") }),
              }),
            b &&
              e.jsx(Qe, {
                size: { xs: 12, md: 6 },
                children: e.jsx(Yn, { value: d, onChange: h, variant: "outlined", fullWidth: !0, showIcon: !o }),
              }),
            e.jsx(Qe, {
              size: { xs: 12 },
              children: e.jsx(ms, { onChange: c, path: l, variant: "extractTo", label: t("modals.decompressTo") }),
            }),
            v &&
              e.jsx(Qe, {
                size: { xs: 12 },
                children: e.jsx(Mt, {
                  slotProps: {
                    input: { startAdornment: !o && e.jsx(ps, { position: "start", children: e.jsx(Ao, {}) }) },
                  },
                  fullWidth: !0,
                  placeholder: t("application:modals.passwordDescription"),
                  label: t("modals.password"),
                  value: u,
                  onChange: (S) => x(S.target.value),
                }),
              }),
          ],
        }),
      }),
    });
  };
function Ul(t) {
  return e.jsx(he, {
    ...t,
    children: e.jsx("path", {
      d: "M9 7a1 1 0 0 1 .117 1.993L9 9H7a3 3 0 0 0-.176 5.995L7 15h2a1 1 0 0 1 .117 1.993L9 17H7a5 5 0 0 1-.217-9.995L7 7h2Zm8 0a5 5 0 0 1 .217 9.995L17 17h-2a1 1 0 0 1-.117-1.993L15 15h2a3 3 0 0 0 .176-5.995L17 9h-2a1 1 0 0 1-.117-1.993L15 7h2ZM7 11h10a1 1 0 0 1 .117 1.993L17 13H7a1 1 0 0 1-.117-1.993L7 11h10H7Z",
    }),
  });
}
const $l = () => {
    const { t } = O(),
      s = N(),
      { enqueueSnackbar: i } = Ie(),
      n = X(),
      o = de(n.breakpoints.down("sm")),
      [p, r] = a.useState(!1),
      [l, c] = a.useState(""),
      [d, h] = a.useState(""),
      u = C((y) => y.globalState.remoteDownloadDialogOpen),
      x = C((y) => y.globalState.remoteDownloadDialogFile),
      f = C((y) => y.fileManager[ne.main].pure_path);
    a.useEffect(() => {
      if (u) {
        const y = new ve(f ?? Pt),
          k = y.fs();
        c(k == Vs.shared_with_me || k == Vs.trash ? Pt : y.toString()), h("");
      }
    }, [u]);
    const m = a.useCallback(() => {
        s(Us());
      }, [s]),
      g = a.useCallback(() => {
        (!x && !d) ||
          (r(!0),
          s(
            Do({
              src_file: x ? me(x) : void 0,
              dst: l,
              src: d
                ? d.split(`
`)
                : void 0,
            }),
          )
            .then(() => {
              s(Us()), i({ message: t("modals.taskCreated"), variant: "success", action: xs("/downloads") });
            })
            .finally(() => {
              r(!1);
            }));
      }, [x, d, l]);
    return e.jsx(re, {
      title: t("application:modals.newRemoteDownloadTitle"),
      showActions: !0,
      loading: p,
      disabled: !x && !d,
      showCancel: !0,
      onAccept: g,
      dialogProps: { open: u ?? !1, onClose: m, fullWidth: !0, maxWidth: "sm", disableRestoreFocus: !0 },
      children: e.jsx(oe, {
        sx: { pt: 1 },
        children: e.jsxs(ie, {
          spacing: 3,
          children: [
            e.jsxs(ie, {
              spacing: 3,
              direction: o ? "column" : "row",
              children: [
                x && e.jsx(Xn, { file: x, label: t("modals.remoteDownloadURL") }),
                !x &&
                  e.jsx(Tn, {
                    icon: e.jsx(Ul, {}),
                    variant: "outlined",
                    value: d,
                    multiline: !0,
                    onChange: (y) => h(y.target.value),
                    placeholder: t("modals.remoteDownloadURLDescription"),
                    label: t("application:modals.remoteDownloadURL"),
                    fullWidth: !0,
                  }),
              ],
            }),
            e.jsx(ie, {
              spacing: 3,
              direction: o ? "column" : "row",
              children: e.jsx(ms, {
                onChange: c,
                path: l,
                variant: "downloadTo",
                label: t("modals.remoteDownloadDst"),
              }),
            }),
          ],
        }),
      }),
    });
  },
  ql = [
    {
      name: "application:modals.fileName",
      icon: e.jsx(zo, { fontSize: "small" }),
      condition: { type: $.name, case_folding: !0 },
    },
    {
      name: "application:navbar.fileType",
      icon: e.jsx(Po, { fontSize: "small" }),
      condition: { type: $.type, file_type: Se.file },
    },
    { name: "application:fileManager.tags", icon: e.jsx(Lo, { fontSize: "small" }), condition: { type: $.tag } },
    {
      name: "application:fileManager.metadata",
      icon: e.jsx(Fo, { fontSize: "small" }),
      condition: { type: $.metadata },
    },
    {
      name: "application:navbar.fileSize",
      icon: e.jsx(To, { fontSize: "small" }),
      condition: { type: $.size, size_lte: 0, size_gte: 0 },
    },
    {
      name: "application:fileManager.createDate",
      icon: e.jsx($s, { fontSize: "small" }),
      condition: { type: $.created, created_gte: fe().subtract(7, "d").unix(), created_lte: fe().unix() },
    },
    {
      name: "application:fileManager.updatedDate",
      icon: e.jsx($s, { fontSize: "small" }),
      condition: { type: $.modified, updated_gte: fe().subtract(7, "d").unix(), updated_lte: fe().unix() },
    },
  ],
  Gl = [
    {
      name: "application:fileManager.title",
      condition: { type: $.metadata, metadata_key_readonly: !0, metadata_key: W.music_title, id: W.music_title },
    },
    {
      name: "application:fileManager.artist",
      condition: { type: $.metadata, metadata_key_readonly: !0, metadata_key: W.music_artist, id: W.music_artist },
    },
    {
      name: "application:fileManager.album",
      condition: { type: $.metadata, metadata_key_readonly: !0, metadata_key: W.music_album, id: W.music_album },
    },
    null,
    {
      name: "application:fileManager.cameraMake",
      condition: { type: $.metadata, metadata_key_readonly: !0, metadata_key: W.camera_make, id: W.camera_make },
    },
    {
      name: "application:fileManager.cameraModel",
      condition: { type: $.metadata, metadata_key_readonly: !0, metadata_key: W.camera_model, id: W.camera_model },
    },
    {
      name: "application:fileManager.lensMake",
      condition: { type: $.metadata, metadata_key_readonly: !0, metadata_key: W.lens_make, id: W.lens_make },
    },
    {
      name: "application:fileManager.lensModel",
      condition: { type: $.metadata, metadata_key_readonly: !0, metadata_key: W.lens_model, id: W.lens_model },
    },
    null,
    {
      name: "application:fileManager.street",
      condition: { type: $.metadata, metadata_key_readonly: !0, metadata_key: W.street, id: W.street },
    },
    {
      name: "application:fileManager.locality",
      condition: { type: $.metadata, metadata_key_readonly: !0, metadata_key: W.locality, id: W.locality },
    },
    {
      name: "application:fileManager.place",
      condition: { type: $.metadata, metadata_key_readonly: !0, metadata_key: W.place, id: W.place },
    },
    {
      name: "application:fileManager.district",
      condition: { type: $.metadata, metadata_key_readonly: !0, metadata_key: W.district, id: W.district },
    },
    {
      name: "application:fileManager.region",
      condition: { type: $.metadata, metadata_key_readonly: !0, metadata_key: W.region, id: W.region },
    },
    {
      name: "application:fileManager.country",
      condition: { type: $.metadata, metadata_key_readonly: !0, metadata_key: W.country, id: W.country },
    },
  ],
  Jl = (t) => {
    const { t: s } = O(),
      i = C((l) => {
        var c, d;
        return (d = (c = l.siteConfig.explorer) == null ? void 0 : c.config) == null ? void 0 : d.custom_props;
      }),
      n = fs({ variant: "popover", popupId: "conditions" }),
      { onClose: o, ...p } = In(n),
      r = (l) => {
        t.onConditionAdd({ ...l, id: l.type == $.metadata && !l.id ? Math.random().toString() : l.id }), o();
      };
    return e.jsxs(e.Fragment, {
      children: [
        e.jsx(us, { ...gs(n), startIcon: e.jsx(it, {}), sx: { px: "15px" }, children: s("navbar.addCondition") }),
        e.jsxs(be, {
          onClose: o,
          anchorOrigin: { vertical: "top", horizontal: "left" },
          transformOrigin: { vertical: "bottom", horizontal: "left" },
          ...p,
          children: [
            ql.map((l, c) =>
              e.jsxs(
                Q,
                { dense: !0, onClick: () => r(l.condition), children: [e.jsx(pe, { children: l.icon }), s(l.name)] },
                c,
              ),
            ),
            e.jsx(He, {
              icon: e.jsx(Io, { fontSize: "small" }),
              popupId: "mediaInfo",
              title: s("application:fileManager.mediaInfo"),
              children: Gl.map((l, c) =>
                l
                  ? e.jsx(
                      Q,
                      {
                        dense: !0,
                        onClick: () => r(l.condition),
                        children: e.jsx(Y, { slotProps: { primary: { variant: "body2" } }, children: s(l.name) }),
                      },
                      c,
                    )
                  : e.jsx(xt, {}),
              ),
            }),
            i &&
              i.length > 0 &&
              e.jsx(He, {
                icon: e.jsx(Xi, { fontSize: "small" }),
                popupId: "customProps",
                title: s("application:fileManager.customProps"),
                children: i.map((l, c) =>
                  e.jsxs(
                    Q,
                    {
                      dense: !0,
                      onClick: () => r({ type: $.metadata, id: qs + l.id, metadata_key: qs + l.id }),
                      children: [l.icon && e.jsx(pe, { children: e.jsx(En, { icon: l.icon }) }), s(l.name)],
                    },
                    c,
                  ),
                ),
              }),
          ],
        }),
      ],
    });
  },
  Kl = (t, s) => {
    const i = [{ type: $.base, base_uri: s }];
    t.name && i.push({ type: $.name, names: t.name, name_op_or: t.name_op_or, case_folding: t.case_folding }),
      t.type != null && i.push({ type: $.type, file_type: t.type }),
      (t.size_gte != null || t.size_lte != null) &&
        i.push({ type: $.size, size_gte: t.size_gte, size_lte: t.size_lte }),
      (t.created_at_gte != null || t.created_at_lte != null) &&
        i.push({ type: $.created, created_gte: t.created_at_gte, created_lte: t.created_at_lte }),
      (t.updated_at_gte != null || t.updated_at_lte != null) &&
        i.push({ type: $.modified, updated_gte: t.updated_at_gte, updated_lte: t.updated_at_lte });
    const n = [];
    return (
      t.metadata &&
        Object.entries(t.metadata).forEach(([o, p]) => {
          o.startsWith(W.tag_prefix)
            ? n.push(o.slice(W.tag_prefix.length))
            : i.push({ type: $.metadata, metadata_key: o, metadata_value: p, id: o });
        }),
      t.metadata_strong_match &&
        Object.entries(t.metadata_strong_match).forEach(([o, p]) => {
          i.push({ type: $.metadata, metadata_key: o, metadata_value: p, id: o, metadata_strong_match: !0 });
        }),
      n.length > 0 && i.push({ type: $.tag, tags: n }),
      console.log(t),
      i
    );
  },
  Zl = () => {
    const { t } = O(),
      s = N(),
      { enqueueSnackbar: i } = Ie(),
      [n, o] = a.useState([]),
      p = C((m) => m.globalState.advanceSearchOpen),
      r = C((m) => m.globalState.advanceSearchBasePath),
      l = C((m) => m.globalState.advanceSearchInitialNameCondition),
      c = C((m) => m.fileManager[ne.main].search_params),
      d = C((m) => m.fileManager[ne.main].pure_path),
      h = a.useCallback(() => {
        s(Eo());
      }, [s]);
    a.useEffect(() => {
      if (p) {
        if (l && r) {
          o([
            { type: $.base, base_uri: r },
            { type: $.name, names: l, case_folding: !0 },
          ]);
          return;
        }
        if (c) {
          const m = Kl(c, d ?? Pt);
          m.length > 0 && o(m);
        }
      }
    }, [p]);
    const u = (m) => {
        o(n.filter((g) => g !== m));
      },
      x = (m) => {
        if (n.find((g) => g.type === m.type && g.id === m.id)) {
          i(t("application:navbar.conditionDuplicate"), { variant: "warning", action: On });
          return;
        }
        o([...n, m]);
      },
      f = a.useCallback(() => {
        s(Oo(ne.main, n));
      }, [s, n]);
    return e.jsx(re, {
      title: t("application:navbar.advancedSearch"),
      showActions: !0,
      onAccept: f,
      showCancel: !0,
      secondaryAction: e.jsx(Jl, { onConditionAdd: x }),
      dialogProps: { open: p ?? !1, onClose: h, fullWidth: !0, maxWidth: "xs" },
      children: e.jsx(oe, {
        children: e.jsx(Bi, {
          children: n.map((m, g) =>
            e.jsx(
              Re,
              {
                children: e.jsx(Wo, {
                  index: g,
                  onRemove: n.length > 2 && m.type != $.base ? u : void 0,
                  condition: m,
                  onChange: (y) => {
                    const k = [...n];
                    (k[g] = y), o(k);
                  },
                }),
              },
              `${m.type} ${m.id}`,
            ),
          ),
        }),
      }),
    });
  },
  Yl = [K.name, K.size, K.date_modified, K.date_created, K.parent],
  Ql = [K.recycle_restore_parent, K.recycle_expire],
  Xl = [
    K.aperture,
    K.exposure,
    K.iso,
    K.focal_length,
    K.exposure_bias,
    K.flash,
    null,
    K.camera_make,
    K.camera_model,
    K.lens_make,
    K.lens_model,
    null,
    K.software,
    K.taken_at,
    K.image_size,
    null,
    K.title,
    K.artist,
    K.album,
    K.duration,
    null,
    K.street,
    K.locality,
    K.place,
    K.district,
    K.region,
    K.country,
  ],
  ec = (t) => {
    const { t: s } = O(),
      i = C((l) => {
        var c, d;
        return (d = (c = l.siteConfig.explorer) == null ? void 0 : c.config) == null ? void 0 : d.custom_props;
      }),
      n = fs({ variant: "popover", popupId: "columns" }),
      { onClose: o, ...p } = In(n),
      r = (l, c) => {
        t.onColumnAdded({ type: l, props: c }), o();
      };
    return e.jsxs(e.Fragment, {
      children: [
        e.jsx(us, { ...gs(n), startIcon: e.jsx(it, {}), sx: { px: "15px" }, children: s("fileManager.addColumn") }),
        e.jsxs(be, {
          onClose: o,
          anchorOrigin: { vertical: "top", horizontal: "left" },
          transformOrigin: { vertical: "bottom", horizontal: "left" },
          ...p,
          children: [
            Yl.map((l, c) => e.jsx(Q, { dense: !0, onClick: () => r(l), children: s(kt({ type: l }).title) }, c)),
            e.jsx(He, {
              popupId: "mediaInfo",
              title: s("application:navbar.trash"),
              children: Ql.map((l, c) =>
                e.jsx(Q, { dense: !0, onClick: () => r(l), children: s(kt({ type: l }).title) }, c),
              ),
            }),
            e.jsx(He, {
              popupId: "mediaInfo",
              title: s("application:fileManager.mediaInfo"),
              children: Xl.map((l, c) =>
                l ? e.jsx(Q, { dense: !0, onClick: () => r(l), children: s(kt({ type: l }).title) }, c) : e.jsx(xt, {}),
              ),
            }),
            i &&
              i.length > 0 &&
              e.jsx(He, {
                popupId: "customProps",
                title: s("application:fileManager.customProps"),
                children: i.map((l, c) =>
                  e.jsxs(
                    Q,
                    {
                      dense: !0,
                      onClick: () => r(K.custom_props, { custom_props_id: l.id }),
                      children: [l.icon && e.jsx(pe, { children: e.jsx(En, { icon: l.icon }) }), s(l.name)],
                    },
                    c,
                  ),
                ),
              }),
          ],
        }),
      ],
    });
  },
  dn = "column-row",
  tc = ({ column: t, index: s, moveRow: i, columns: n, t: o, onDelete: p, isFirst: r, isLast: l }) => {
    const c = mt.useRef(null),
      d = C((f) => {
        var m, g;
        return (g = (m = f.siteConfig.explorer) == null ? void 0 : m.config) == null ? void 0 : g.custom_props;
      }),
      [, h] = $n({
        accept: dn,
        hover(f, m) {
          if (!c.current) return;
          const g = f.index,
            y = s;
          if (g === y) return;
          const k = c.current.getBoundingClientRect(),
            b = (k.bottom - k.top) / 2,
            v = m.getClientOffset();
          if (!v) return;
          const A = v.y - k.top;
          (g < y && A < b) || (g > y && A > b) || (i(g, y), (f.index = y));
        },
      }),
      [{ isDragging: u }, x] = Hi({ type: dn, item: { index: s }, collect: (f) => ({ isDragging: f.isDragging() }) });
    return (
      x(h(c)),
      e.jsxs(
        je,
        {
          ref: c,
          hover: !0,
          sx: { "&:last-child td, &:last-child th": { border: 0 }, opacity: u ? 0.5 : 1, cursor: "move" },
          children: [
            e.jsx(ue, { component: "th", scope: "row", children: o(kt(t, !1, d).title) }),
            e.jsx(ue, {
              children: e.jsxs(F, {
                sx: { display: "flex" },
                children: [
                  e.jsx(J, {
                    size: "small",
                    onClick: () => i(s, s - 1),
                    disabled: r,
                    children: e.jsx(en, { sx: { width: "18px", height: "18px", transform: "rotate(180deg)" } }),
                  }),
                  e.jsx(J, {
                    size: "small",
                    onClick: () => i(s, s + 1),
                    disabled: l,
                    children: e.jsx(en, { sx: { width: "18px", height: "18px" } }),
                  }),
                  e.jsx(J, {
                    size: "small",
                    onClick: () => p(s),
                    disabled: n.length <= 1,
                    children: e.jsx(ot, { sx: { width: "18px", height: "18px" } }),
                  }),
                ],
              }),
            }),
          ],
        },
        s,
      )
    );
  },
  sc = () => {
    const { t } = O(),
      s = N(),
      { enqueueSnackbar: i } = Ie(),
      [n, o] = a.useState([]),
      p = C((h) => h.globalState.listViewColumnSettingDialogOpen),
      r = C((h) => h.fileManager[ne.main].listViewColumns);
    a.useEffect(() => {
      p && o(r ?? []);
    }, [p]);
    const l = a.useCallback(() => {
        s(Gs(!1));
      }, [s]),
      c = a.useCallback(() => {
        n.length > 0 && s(Ro(ne.main, n)), s(Gs(!1));
      }, [s, n]),
      d = a.useCallback(
        (h) => {
          var x, f, m, g;
          const u = n.find((y) => y.type === h.type);
          !u ||
          ((x = u.props) == null ? void 0 : x.metadata_key) != ((f = h.props) == null ? void 0 : f.metadata_key) ||
          ((m = u.props) == null ? void 0 : m.custom_props_id) != ((g = h.props) == null ? void 0 : g.custom_props_id)
            ? o((y) => [...y, h])
            : i(t("application:fileManager.columnExisted"), { variant: "warning", action: On });
        },
        [n],
      );
    return e.jsx(re, {
      title: t("application:fileManager.listColumnSetting"),
      onAccept: c,
      showActions: !0,
      secondaryAction: e.jsx(ec, { onColumnAdded: d }),
      dialogProps: { open: p ?? !1, onClose: l, fullWidth: !0, maxWidth: "sm", disableRestoreFocus: !0 },
      children: e.jsx(oe, {
        sx: { pb: 0 },
        children: e.jsx(Fe, {
          children: e.jsx(Vn, {
            backend: Un,
            children: e.jsx(Ge, {
              component: Je,
              children: e.jsxs(Ke, {
                sx: { width: "100%" },
                size: "small",
                children: [
                  e.jsx(pt, {
                    children: e.jsxs(je, {
                      children: [
                        e.jsx(ue, { width: "50%", children: t("fileManager.column") }),
                        e.jsx(ue, { children: t("fileManager.actions") }),
                      ],
                    }),
                  }),
                  e.jsx(ut, {
                    children: n.map((h, u) =>
                      e.jsx(
                        tc,
                        {
                          column: h,
                          index: u,
                          moveRow: (x, f) => {
                            x === f ||
                              f < 0 ||
                              f >= n.length ||
                              o((m) => {
                                const g = [...m],
                                  [y] = g.splice(x, 1);
                                return g.splice(f, 0, y), g;
                              });
                          },
                          columns: n,
                          setColumns: o,
                          t,
                          onDelete: (x) => o((f) => f.filter((m, g) => g !== x)),
                          isFirst: u === 0,
                          isLast: u === n.length - 1,
                        },
                        u,
                      ),
                    ),
                  }),
                ],
              }),
            }),
          }),
        }),
      }),
    });
  },
  nc = () => {
    const { t } = O(),
      s = N(),
      i = X(),
      n = de(i.breakpoints.down("sm")),
      [o, p] = a.useState(!1),
      [r, l] = a.useState(!1),
      c = C((x) => x.globalState.directLinkDialogOpen),
      d = C((x) => x.globalState.directLinkRes),
      h = a.useMemo(
        () =>
          d
            ? d.map((x) => {
                let f = x.link;
                return r && (f = f.replace("/f/", "/f/d/")), o ? `[${new ve(x.file_url).elements().pop()}] ${f}` : f;
              }).join(`
`)
            : "",
        [d, o, r],
      ),
      u = a.useCallback(() => {
        s(Bo());
      }, [s]);
    return e.jsx(re, {
      title: t("application:modals.getSourceLinkTitle"),
      showActions: !0,
      hideOk: !0,
      secondaryAction: e.jsxs(ie, {
        direction: n ? "column" : "row",
        spacing: 1,
        children: [
          e.jsx(Xt, {
            sx: { ml: 0 },
            slotProps: { typography: { variant: "body2", pl: 1, color: "text.secondary" } },
            control: e.jsx(zt, {
              onChange: () => {
                p(!o);
              },
              disableRipple: !0,
              checked: o,
              size: "small",
            }),
            label: t("application:modals.showFileName"),
          }),
          e.jsx(Xt, {
            sx: { ml: 0 },
            slotProps: { typography: { variant: "body2", pl: 1, color: "text.secondary" } },
            control: e.jsx(zt, {
              onChange: () => {
                l(!r);
              },
              disableRipple: !0,
              checked: r,
              size: "small",
            }),
            label: t("application:modals.forceDownload"),
          }),
        ],
      }),
      dialogProps: { open: c ?? !1, onClose: u, fullWidth: !0, maxWidth: "sm" },
      children: e.jsx(oe, {
        sx: { pt: 2, pb: 0 },
        children: e.jsx(Mt, {
          autoFocus: !0,
          label: t("modals.sourceLink"),
          multiline: !0,
          value: h,
          variant: "outlined",
          fullWidth: !0,
          slotProps: { htmlInput: { readonly: !0 } },
        }),
      }),
    });
  },
  ac = () => {
    var y, k;
    const { t } = O(),
      s = N(),
      [i, n] = a.useState(void 0),
      [o, p] = a.useState(!1),
      [r, l] = a.useState(!1),
      c = C((b) => b.globalState.directLinkManagementDialogOpen),
      d = C((b) => b.globalState.directLinkManagementDialogFile),
      h = C((b) => b.globalState.directLinkHighlight),
      u = a.useMemo(() => {
        var b, v;
        return (
          h &&
          (i == null ? void 0 : i.extended_info) &&
          !(
            (v = (b = i == null ? void 0 : i.extended_info) == null ? void 0 : b.direct_links) != null &&
            v.some((A) => A.id == h)
          )
        );
      }, [h, (y = i == null ? void 0 : i.extended_info) == null ? void 0 : y.direct_links]),
      x = a.useCallback(() => {
        o || s(Ho());
      }, [s, o]);
    a.useEffect(() => {
      d && c && (n(void 0), s(It({ uri: d.path, extended: !0 })).then((b) => n(b)));
    }, [d, c]);
    const f = a.useMemo(() => {
      var b, v;
      return (v = (b = i == null ? void 0 : i.extended_info) == null ? void 0 : b.direct_links) == null
        ? void 0
        : v.map((A) => ({ ...A, url: r ? A.url.replace("/f/", "/f/d/") : A.url }));
    }, [(k = i == null ? void 0 : i.extended_info) == null ? void 0 : k.direct_links, r]);
    a.useCallback((b) => {
      window.open(b.url, "_blank");
    }, []);
    const m = a.useCallback((b) => {
        b && vt(b.url);
      }, []),
      g = a.useCallback(
        (b) => {
          !d ||
            !b ||
            s(ls(t("fileManager.deleteLinkConfirm"))).then(() => {
              p(!0),
                s(No(b.id))
                  .then(() => {
                    n((v) => {
                      var A;
                      return v
                        ? {
                            ...v,
                            extended_info: v.extended_info
                              ? {
                                  ...v.extended_info,
                                  direct_links:
                                    (A = v.extended_info.direct_links) == null
                                      ? void 0
                                      : A.filter((M) => M.id !== b.id),
                                }
                              : void 0,
                          }
                        : void 0;
                    });
                  })
                  .finally(() => {
                    p(!1);
                  });
            });
        },
        [t, d, s],
      );
    return e.jsx(re, {
      title: t("application:fileManager.manageDirectLinks"),
      loading: o,
      dialogProps: { open: c ?? !1, onClose: x, fullWidth: !0, maxWidth: "md" },
      children: e.jsxs(oe, {
        children: [
          e.jsxs(Fe, {
            children: [
              u &&
                e.jsx(os, {
                  severity: "warning",
                  sx: { mb: 2 },
                  children: t("application:fileManager.directLinkNotFound"),
                }),
              e.jsxs(Ge, {
                component: Je,
                children: [
                  e.jsxs(Ke, {
                    sx: { width: "100%" },
                    size: "small",
                    children: [
                      e.jsx(pt, {
                        children: e.jsxs(je, {
                          children: [
                            e.jsx(G, { children: t("fileManager.actions") }),
                            e.jsx(ue, { children: t("modals.sourceLink") }),
                            e.jsx(G, { children: t("setting.viewNumber") }),
                            e.jsx(G, { children: t("fileManager.createdAt") }),
                          ],
                        }),
                      }),
                      e.jsxs(ut, {
                        children: [
                          !i &&
                            e.jsxs(je, {
                              hover: !0,
                              sx: { "&:last-child td, &:last-child th": { border: 0 } },
                              children: [
                                e.jsx(G, {
                                  component: "th",
                                  scope: "row",
                                  children: e.jsx(_e, { variant: "text", width: 100 }),
                                }),
                                e.jsx(ue, { children: e.jsx(_e, { variant: "text", width: 200 }) }),
                                e.jsx(G, { children: e.jsx(_e, { variant: "text", width: 60 }) }),
                                e.jsx(G, { children: e.jsx(_e, { variant: "text", width: 100 }) }),
                              ],
                            }),
                          f &&
                            f.map((b) =>
                              e.jsxs(
                                je,
                                {
                                  hover: !0,
                                  selected: h == b.id,
                                  sx: {
                                    boxShadow: (v) =>
                                      h == b.id ? `inset 0 0 0 2px ${v.palette.primary.light}` : "none",
                                    "&:last-child td, &:last-child th": { border: 0 },
                                  },
                                  children: [
                                    e.jsxs(G, {
                                      component: "th",
                                      scope: "row",
                                      children: [
                                        e.jsx(J, {
                                          onClick: () => m(b),
                                          size: "small",
                                          children: e.jsx(_t, { fontSize: "small" }),
                                        }),
                                        e.jsx(J, {
                                          disabled: o,
                                          onClick: () => g(b),
                                          size: "small",
                                          children: e.jsx(js, { fontSize: "small" }),
                                        }),
                                      ],
                                    }),
                                    e.jsx(ue, {
                                      sx: {
                                        maxWidth: 300,
                                        overflow: "hidden",
                                        textOverflow: "ellipsis",
                                        whiteSpace: "nowrap",
                                      },
                                      onClick: (v) => v.stopPropagation(),
                                      children: e.jsx(ee, {
                                        variant: "body2",
                                        sx: { cursor: "text" },
                                        children: e.jsx(Qt, {
                                          href: b.url,
                                          target: "_blank",
                                          underline: "hover",
                                          children: b.url,
                                        }),
                                      }),
                                    }),
                                    e.jsx(G, { children: b.downloaded }),
                                    e.jsx(G, { children: e.jsx(Et, { variant: "body2", datetime: b.created_at }) }),
                                  ],
                                },
                                b.id,
                              ),
                            ),
                        ],
                      }),
                    ],
                  }),
                  !f &&
                    i &&
                    e.jsx(F, {
                      sx: { p: 1, width: "100%", textAlign: "center" },
                      children: e.jsx(ee, {
                        variant: "caption",
                        color: "text.secondary",
                        children: t("application:setting.listEmpty"),
                      }),
                    }),
                ],
              }),
            ],
          }),
          e.jsx(Xt, {
            sx: { ml: 0, mt: 2 },
            slotProps: { typography: { variant: "body2", pl: 1, color: "text.secondary" } },
            control: e.jsx(zt, {
              onChange: () => {
                l(!r);
              },
              disableRipple: !0,
              checked: r,
              size: "small",
            }),
            label: t("application:modals.forceDownload"),
          }),
        ],
      }),
    });
  },
  oc = () => {
    const t = C((d) => d.globalState.createArchiveDialogOpen),
      s = C((d) => d.globalState.extractArchiveDialogOpen),
      i = C((d) => d.globalState.remoteDownloadDialogOpen),
      n = C((d) => d.globalState.advanceSearchOpen),
      o = C((d) => d.globalState.listViewColumnSettingDialogOpen),
      p = C((d) => d.globalState.directLinkDialogOpen),
      r = C((d) => d.globalState.excalidrawViewer),
      l = C((d) => d.globalState.directLinkManagementDialogOpen),
      c = C((d) => d.globalState.archiveViewer);
    return e.jsxs(e.Fragment, {
      children: [
        e.jsx(Hl, {}),
        e.jsx(Vr, {}),
        e.jsx($r, {}),
        e.jsx(Zi, {}),
        e.jsx(qr, {}),
        e.jsx(Vo, {}),
        e.jsx(Uo, {}),
        e.jsx(Gr, {}),
        e.jsx(Qr, {}),
        e.jsx(Xr, {}),
        e.jsx(el, {}),
        e.jsx(tl, {}),
        e.jsx(sl, {}),
        e.jsx(pl, {}),
        e.jsx($o, {}),
        e.jsx(hl, {}),
        e.jsx(yl, {}),
        e.jsx(Sl, {}),
        e.jsx(Ml, {}),
        e.jsx(Ll, {}),
        e.jsx(Tl, {}),
        e.jsx(Il, {}),
        e.jsx(Ol, {}),
        t != null && e.jsx(Nl, {}),
        s != null && e.jsx(Vl, {}),
        i != null && e.jsx($l, {}),
        n != null && e.jsx(Zl, {}),
        o != null && e.jsx(sc, {}),
        p != null && e.jsx(nc, {}),
        r != null && e.jsx(Bl, {}),
        l != null && e.jsx(ac, {}),
        c != null && e.jsx(fl, {}),
      ],
    });
  },
  ic = () => {
    const [t, s] = $n(() => ({ accept: "file", drop: () => {} }));
    a.useEffect(
      () => (
        s(document.body),
        () => {
          s(null);
        }
      ),
      [],
    );
  },
  rc = ({ pointerOffset: t, files: s, ...i }) => {
    var p;
    const [n, o] = a.useState([0, 0]);
    if (
      (a.useEffect(() => {
        o([220, 48]);
      }, []),
      !(!s || s.length == 0))
    )
      return e.jsxs(Lt, {
        badgeContent: s.length <= 1 ? void 0 : s.length,
        color: "primary",
        sx: {
          "& .MuiBadge-badge": { zIndex: 1612 },
          transform: `translate(${t == null ? void 0 : t.x}px, ${t == null ? void 0 : t.y}px)`,
        },
        children: [
          e.jsx(Ct, {
            elevation: 3,
            sx: {
              width: n[0],
              height: n[1],
              zIndex: 1610,
              transition: (r) => r.transitions.create(["width", "height"]),
            },
            ...i,
            children: e.jsxs(qo, {
              children: [
                e.jsx(Go, { ignoreHovered: !0, selected: !1, file: s[0] }),
                e.jsx(Jo, { variant: "body2", children: (p = s[0]) == null ? void 0 : p.name }),
              ],
            }),
          }),
          [...Array(Math.min(2, s.length - 1)).keys()].map((r) =>
            e.jsx(Ct, {
              sx: {
                position: "absolute",
                width: n[0],
                height: n[1],
                zIndex: 1610 - r - 1,
                top: (r + 1) * 4,
                left: (r + 1) * 4,
                transition: (l) => l.transitions.create(["width", "height"]),
              },
              elevation: 3,
            }),
          ),
        ],
      });
  },
  lc = () => {
    ic();
    const {
        itemType: t,
        isDragging: s,
        item: i,
        pointerOffset: n,
      } = Ni((r) => ({
        item: r.getItem(),
        itemType: r.getItemType(),
        pointerOffset: r.getClientOffset(),
        isDragging: r.isDragging(),
      })),
      o = C((r) => r.fileManager[0].selected),
      p = a.useMemo(() => {
        if (i && i && i.target) {
          const r = i.includeSelected
            ? Object.keys(o)
                .map((l) => o[l])
                .filter((l) => l.path != i.target.path)
            : [];
          return [i.target, ...r];
        }
        return [];
      }, [o, i]);
    return s
      ? e.jsx(F, {
          sx: {
            position: "fixed",
            pointerEvents: "none",
            zIndex: 1600,
            left: 0,
            top: 0,
            width: "100%",
            height: "100%",
          },
          children: e.jsx(rc, { files: p, pointerOffset: n }),
        })
      : null;
  };
function cc(t) {
  return e.jsx(he, {
    ...t,
    children: e.jsx("path", {
      d: "M12 4.5a4.5 4.5 0 0 0-4.495 4.285a.75.75 0 0 1-.75.715H6.5a3 3 0 1 0 0 6h3.576a6.554 6.554 0 0 0-.057 1.5H6.5a4.5 4.5 0 0 1-.42-8.98a6.001 6.001 0 0 1 11.84 0a4.5 4.5 0 0 1 4.053 4.973a6.534 6.534 0 0 0-1.8-1.857A3 3 0 0 0 17.5 9.5h-.256a.75.75 0 0 1-.749-.715A4.5 4.5 0 0 0 12 4.5m10 12a5.5 5.5 0 1 1-11 0a5.5 5.5 0 0 1 11 0m-6 3a.5.5 0 0 0 1 0v-4.793l1.646 1.647a.5.5 0 0 0 .708-.708l-2.5-2.5a.5.5 0 0 0-.708 0l-2.5 2.5a.5.5 0 0 0 .708.708L16 14.707z",
    }),
  });
}
function dc({ open: t }) {
  const { t: s } = O();
  return e.jsxs(Ko, {
    sx: { zIndex: (i) => i.zIndex.drawer + 1, color: "#fff", flexDirection: "column" },
    open: t,
    children: [
      e.jsx("div", { children: e.jsx(cc, { style: { fontSize: 80 } }) }),
      e.jsx("div", { children: e.jsx(ee, { variant: "h4", children: s("uploader.dropFileHere") }) }),
    ],
  });
}
const pc = U(F)(({ theme: t }) => ({
    borderRadius: t.shape.borderRadius,
    backgroundColor: t.palette.mode == "light" ? "rgba(0, 0, 0, 0.06)" : "rgba(255, 255, 255, 0.09)",
    display: "flex",
    justifyContent: "center",
    alignItems: "center",
    flexDirection: "column",
    padding: t.spacing(2),
    color: t.palette.text.secondary,
  })),
  uc = ({ onFilePasted: t, onClose: s }) => {
    const { t: i } = O(),
      n = (o) => {
        var p;
        o.preventDefault(),
          (p = o.clipboardData) != null && p.files.length && (t(Array.from(o.clipboardData.files)), s());
      };
    return (
      a.useEffect(
        () => (
          window.addEventListener("paste", n),
          () => {
            window.removeEventListener("paste", n);
          }
        ),
        [],
      ),
      a.useCallback((o) => (o.preventDefault(), !1), []),
      e.jsxs(pc, {
        sx: { py: 5, mt: 0.5 },
        children: [
          e.jsx(Yo, { sx: { fontSize: 60 } }),
          e.jsx(ee, { sx: { pt: 1 }, children: i("uploader.pasteFilesHere") }),
        ],
      })
    );
  };
function hc({ onFilePasted: t }) {
  const { t: s } = O(),
    i = N(),
    n = C((p) => p.globalState.uploadFromClipboardDialogOpen),
    o = a.useCallback(() => {
      i(Zo(!1));
    }, []);
  return e.jsx(re, {
    title: s("uploader.uploadFromClipboard"),
    dialogProps: { fullWidth: !0, maxWidth: "xs", open: !!n, onClose: o },
    children: e.jsx(oe, { children: e.jsx(uc, { onClose: o, onFilePasted: t }) }),
  });
}
function xc(t) {
  return e.jsx(he, {
    ...t,
    children: e.jsx("path", {
      d: "M12 2v6a2 2 0 0 0 2 2h6v10a2 2 0 0 1-2 2h-6.81A6.5 6.5 0 0 0 4 11.498V4a2 2 0 0 1 2-2zm1.5.5V8a.5.5 0 0 0 .5.5h5.5zm-1.5 15a5.5 5.5 0 1 1-11 0a5.5 5.5 0 0 1 11 0m-5-3a.5.5 0 0 0-1 0v4.793l-1.646-1.647a.5.5 0 0 0-.708.708l2.5 2.5a.5.5 0 0 0 .708 0l2.5-2.5a.5.5 0 0 0-.708-.708L7 19.293z",
    }),
  });
}
function mc(t) {
  return e.jsx(he, {
    ...t,
    children: e.jsx("path", {
      d: "M5 5.274c0-1.707 1.826-2.792 3.325-1.977l12.362 6.727c1.566.852 1.566 3.1 0 3.952L8.325 20.702C6.826 21.518 5 20.432 5 18.726z",
    }),
  });
}
function fc(t) {
  return e.jsx(he, {
    ...t,
    children: e.jsx("path", {
      d: "M9.75 2h3.998a.75.75 0 0 1 .102 1.493l-.102.007H12.5v17h1.246a.75.75 0 0 1 .743.648l.007.102a.75.75 0 0 1-.648.743l-.102.007H9.75a.75.75 0 0 1-.102-1.493l.102-.007h1.249v-17H9.75a.75.75 0 0 1-.743-.648L9 2.75a.75.75 0 0 1 .648-.743zm8.496 2.997a3.253 3.253 0 0 1 3.25 3.25l.004 7.504a3.249 3.249 0 0 1-3.064 3.246l-.186.005h-4.745V4.996zm-8.249 0L9.992 19H5.25A3.25 3.25 0 0 1 2 15.751V8.247a3.25 3.25 0 0 1 3.25-3.25z",
    }),
  });
}
function gc(t) {
  const s = a.useRef(0),
    [i, n] = a.useState(t.status),
    [o, p] = a.useState(t.error),
    [r, l] = a.useState(t.progress),
    { enqueueSnackbar: c } = Ie();
  a.useEffect(() => {
    t.subscribe({
      onTransition: (x) => {
        n(x);
      },
      onError: (x) => {
        p(x), n(t.status);
      },
      onProgress: (x) => {
        l(x);
      },
      onMsg: (x, f) => {
        c(x, { variant: f });
      },
    });
  }, []);
  const [d, h] = mt.useMemo(() => {
    if (r == null || r.total == null || r.total.loaded == null) return [0, 0];
    const x = (Date.now() - (t.lastTime || 0)) / 1e3,
      f = (Date.now() - (t.startTime || 0)) / 1e3,
      m = r.total.loaded > s.current ? Math.floor((r.total.loaded - s.current) / x) : 0,
      g = r.total.loaded > 0 ? Math.floor(r.total.loaded / f) : 0;
    return (s.current = r.total.loaded), (t.lastTime = Date.now()), [m, g];
  }, [r == null ? void 0 : r.total.loaded]);
  return {
    status: i,
    error: o,
    progress: r,
    speed: d,
    speedAvg: h,
    retry: (x) => {
      t.retry(x);
    },
  };
}
function jc({ uploader: t, error: s }) {
  const { t: i } = O(),
    n = [
      { name: i("uploader.fileName"), value: t.task.name },
      {
        name: i("uploader.fileSize"),
        value: `${ze(t.task.size)} ${
          t.task.session && t.task.session.chunk_size > 0
            ? i("uploader.chunkDescription", {
                total: t.task.chunkProgress.length,
                size: ze(t.task.session.chunk_size),
              })
            : i("uploader.noChunks")
        }`,
      },
      { name: i("uploader.storagePolicy"), value: t.task.policy.name },
      {
        name: i("uploader.destination"),
        value: e.jsx(wt, {
          sx: { my: 0.5 },
          variant: "outlined",
          clickable: !0,
          simplifiedFile: { path: t.task.dst, type: Se.folder },
        }),
      },
      t.task.session
        ? {
            name: i("uploader.uploadSession"),
            value: e.jsx(e.Fragment, {
              children: e.jsx($e, {
                i18nKey: "uploader.sessionExpiredIn",
                components: [
                  e.jsx(
                    Qo,
                    {
                      datetime: t.task.session ? t.task.session.expires * 1e3 : 0,
                      locale: i("timeAgoLocaleCode", { ns: "common" }),
                    },
                    0,
                  ),
                ],
              }),
            }),
          }
        : null,
      t.status === Z.error ? { name: i("uploader.errorDetails"), value: s } : null,
    ];
  return e.jsx(jt, {
    container: !0,
    sx: { fontSize: (o) => o.typography.body2.fontSize },
    children: n.map((o) =>
      e.jsx(e.Fragment, {
        children:
          o &&
          e.jsxs(
            jt,
            {
              container: !0,
              xs: 12,
              children: [
                e.jsx(jt, { item: !0, xs: 3, sx: { fontWeight: 700 }, children: o.name }),
                e.jsx(jt, {
                  item: !0,
                  xs: 9,
                  sx: { color: (p) => p.palette.text.secondary, wordBreak: "break-all" },
                  children: o.value,
                }),
              ],
            },
            o.name,
          ),
      }),
    ),
  });
}
const bc = U(is)(() => ({
    maxWidth: "100%",
    boxShadow: "none",
    "&:not(:last-child)": { borderBottom: 0 },
    "&:before": { display: "none" },
    "& .Mui-expanded": { margin: "0!important" },
  })),
  yc = U(Sn)(() => ({
    minHeight: "56px",
    padding: 0,
    display: "block",
    "& .MuiAccordionSummary-content": { margin: 0, display: "block", "& .Mui-expanded": { margin: "0!important" } },
  })),
  vc = U(rs)(({ theme: t }) => ({
    "& .MuiAccordionActions-root": {
      paddingLeft: 16,
      paddingRight: 16,
      paddingTop: 8,
      paddingBottom: 8,
      display: "block",
      backgroundColor: t.palette.background.default,
    },
  })),
  kc = (t, s, i) => {
    let n = s;
    return i || (n = t), `${ze(n || 0)}/s`;
  },
  pn = (t) => {
    if (t) {
      let s = t.message;
      return t instanceof Bn && (s = t.Message()), s;
    }
  };
function Cc({ uploader: t, useAvgSpeed: s, onCancel: i, onClose: n, selectFile: o, onRefresh: p }) {
  const { t: r } = O("application", { keyPrefix: "uploader" }),
    l = X(),
    [c, d] = a.useState(!1),
    [h, u] = a.useState(!1),
    { status: x, error: f, progress: m, speed: g, speedAvg: y, retry: k } = gc(t),
    b = de(l.breakpoints.down("md")),
    [v, A] = a.useState(!1),
    M = (j, w) => {
      u(!!w);
    };
  a.useEffect(() => {
    x >= Z.finished && p();
  }, [x]);
  const S = a.useMemo(() => {
      switch (x) {
        case Z.added:
        case Z.initialized:
        case Z.queued:
          return e.jsx("div", { children: r("pendingInQueue") });
        case Z.preparing:
          return e.jsx("div", { children: r("preparing") });
        case Z.error:
          return e.jsxs(F, {
            sx: {
              color: l.palette.warning.main,
              wordBreak: "break-all",
              ...(l.breakpoints.up("sm") ? { whiteSpace: "nowrap", overflow: "hidden", textOverflow: "ellipsis" } : {}),
            },
            children: [pn(f), e.jsx("br", {})],
          });
        case Z.finishing:
          return e.jsx("div", { children: r("processing") });
        case Z.resumable:
          return (
            m &&
            e.jsx("div", {
              children: r("progressDescription", {
                uploaded: ze(m.total.loaded),
                total: ze(m.total.size),
                percentage: m.total.percent.toFixed(2),
              }),
            })
          );
        case Z.processing:
          return m
            ? e.jsx("div", {
                children: r("progressDescriptionFull", {
                  speed: kc(g, y, s),
                  uploaded: ze(m.total.loaded),
                  total: ze(m.total.size),
                  percentage: m.total.percent.toFixed(2),
                }),
              })
            : e.jsx("div", { children: r("progressDescriptionPlaceHolder") });
        case Z.finished:
          return e.jsxs(F, { sx: { color: l.palette.success.main }, children: [r("uploaded"), e.jsx("br", {})] });
        default:
          return e.jsx("div", { children: r("unknownStatus") });
      }
    }, [x, f, m, g, y, s]),
    I = a.useMemo(
      () =>
        t.task.resumed && !b ? e.jsx(Yt, { sx: { ml: 1, height: 18 }, size: "small", label: r("resumed") }) : null,
      [x, b],
    ),
    V = a.useMemo(
      () =>
        x === Z.resumable && !b
          ? e.jsx(Yt, {
              sx: { ml: 1, height: 18, fontSize: (j) => j.typography.caption.fontSize },
              size: "small",
              color: "secondary",
              label: r("resumable"),
            })
          : null,
      [x, b],
    ),
    P = a.useMemo(
      () =>
        (x === Z.processing || x === Z.finishing || x === Z.resumable) && m
          ? e.jsx(F, {
              sx: {
                backgroundColor:
                  l.palette.mode === "light" ? Wn(l.palette.primary.main, 0.8) : Rn(l.palette.primary.main, 0.18),
                width: m.total.percent + "%",
                transition: "width .4s linear",
                zIndex: 1,
                height: "100%",
                position: "absolute",
                left: 0,
                top: 0,
              },
            })
          : null,
      [x, m, l],
    ),
    D = a.useMemo(() => e.jsx(jc, { error: (f && pn(f)) ?? "", uploader: t }), [t, h]),
    z = () => {
      A(!0),
        t.cancel().then(() => {
          A(!1), i((j) => j.id != t.id);
        });
    },
    T = (j) => {
      j.stopPropagation();
    },
    R = a.useMemo(() => {
      if (!c && !b) return e.jsx(e.Fragment, {});
      const j = f instanceof Xo && f.IsConflictError(),
        w = [
          {
            show: x === Z.error && !j,
            title: r("retry"),
            click: () => k(),
            icon: e.jsx(Ki, { sx: { fontSize: "20px" } }),
            loading: !1,
          },
          {
            show: x === Z.error && j,
            title: r("rename"),
            click: () => k({ new_prefix: r("fileCopyName") }),
            icon: e.jsx(fc, { sx: { fontSize: "20px" } }),
            loading: !1,
          },
          {
            show: x === Z.error && j,
            title: r("overwrite"),
            click: () => k({ overwrite: !0 }),
            icon: e.jsx(xc, { sx: { fontSize: "20px" } }),
            loading: !1,
          },
          {
            show: !0,
            title: x === Z.finished ? r("deleteTask") : r("cancelAndDelete"),
            click: z,
            icon: e.jsx(ei, { sx: { fontSize: "20px" } }),
            loading: v,
          },
          {
            show: x === Z.resumable,
            title: r("selectAndResume"),
            click: () => o(t.task.dst, es.File, t),
            icon: e.jsx(mc, { sx: { fontSize: "20px" } }),
            loading: !1,
          },
        ];
      return e.jsx(e.Fragment, {
        children: w.map((L) =>
          e.jsx(e.Fragment, {
            children:
              L.show &&
              e.jsx(ti, {
                in: L.show,
                children: e.jsx(ae, {
                  title: L.title,
                  children: e.jsx(J, {
                    onMouseDown: T,
                    onTouchStart: T,
                    disabled: L.loading,
                    onClick: (B) => {
                      B.stopPropagation(), L.click();
                    },
                    size: "small",
                    children: L.icon,
                  }),
                }),
              }),
          }),
        ),
      });
    }, [x, v, c, b, t, r]),
    _ = a.useMemo(() => {
      if (!b) return e.jsx(si, { name: t.task.name, fileType: Se.file });
    }, [t, b]);
  return e.jsxs(e.Fragment, {
    children: [
      e.jsxs(bc, {
        disableGutters: !0,
        square: !0,
        expanded: h,
        onChange: M,
        children: [
          e.jsx(yc, {
            "aria-controls": "panel1d-content",
            id: "panel1d-header",
            children: e.jsxs(F, {
              sx: { position: "relative" },
              onMouseLeave: () => d(!1),
              onMouseOver: () => d(!0),
              children: [
                P,
                e.jsxs(wn, {
                  sx: { borderRadius: 0, position: "relative", zIndex: 9 },
                  children: [
                    _,
                    e.jsx(Y, {
                      sx: { marginLeft: "16px", marginRight: "20px", my: 0 },
                      primary: e.jsxs(F, {
                        sx: { display: "flex", alignItems: "center" },
                        children: [
                          e.jsx(Js, { sx: { overflow: "hidden" }, children: t.task.name }),
                          e.jsx("div", { children: I }),
                          e.jsx("div", { children: V }),
                        ],
                      }),
                      secondary: e.jsx(Js, { sx: { overflow: "hidden" }, children: S }),
                      slotProps: { primary: { variant: "body2" }, secondary: { variant: "caption" } },
                    }),
                    e.jsx(F, { sx: { display: "flex", gap: 1 }, children: R }),
                  ],
                }),
              ],
            }),
          }),
          e.jsx(vc, { children: D }),
        ],
      }),
      e.jsx(ht, {}),
    ],
  });
}
function Sc(t) {
  return e.jsx(he, {
    ...t,
    children: e.jsx("path", {
      d: "M12.546 17H2.75l-.102.007A.75.75 0 0 0 2.75 18.5h9.246c0-.211.046-.428.144-.638zm1.175-2.5H2.75a.75.75 0 0 1-.102-1.493L2.75 13h11.676zM21.25 9H2.75l-.102.007A.75.75 0 0 0 2.75 10.5h18.5l.102-.007A.75.75 0 0 0 21.25 9m0-4H2.75l-.102.007A.75.75 0 0 0 2.75 6.5h18.5l.102-.007A.75.75 0 0 0 21.25 5m-4.933 7h4.827a.5.5 0 0 1 .436.745L19.75 16h1.495a.75.75 0 0 1 .565 1.244l-4.824 5.508c-.505.576-1.443.085-1.258-.657L16.5 19h-3.002a.5.5 0 0 1-.453-.713l2.82-6a.5.5 0 0 1 .453-.287",
    }),
  });
}
function wc(t) {
  return e.jsx(he, {
    ...t,
    children: e.jsx("path", {
      d: "M12 4.5a7.5 7.5 0 1 0 7.419 6.392c-.067-.454.265-.892.724-.892c.37 0 .696.256.752.623A9 9 0 1 1 18 5.292V4.25a.75.75 0 0 1 1.5 0v3a.75.75 0 0 1-.75.75h-3a.75.75 0 0 1 0-1.5h1.35a7.474 7.474 0 0 0-5.1-2",
    }),
  });
}
function Mc({ open: t, onClose: s, onSave: i }) {
  const { t: n } = O(),
    [o, p] = a.useState(te.getWithFallback(le.ConcurrentLimit)),
    r = a.useCallback(() => {
      i(o);
    }, [o]);
  return e.jsx(re, {
    title: n("uploader.setConcurrent"),
    showActions: !0,
    showCancel: !0,
    onAccept: r,
    dialogProps: { fullWidth: !0, maxWidth: "xs", open: t, onClose: s },
    children: e.jsx(oe, {
      children: e.jsxs(Ve, {
        variant: "filled",
        fullWidth: !0,
        children: [
          e.jsx(ds, { htmlFor: "component-helper", children: n("uploader.concurrentTaskNumber") }),
          e.jsx(ni, {
            type: "number",
            inputProps: { min: 1, step: 1, max: 20 },
            value: o,
            onChange: (l) => p(l.target.value),
          }),
        ],
      }),
    }),
  });
}
function _c({
  anchorEl: t,
  onClose: s,
  uploadManager: i,
  useAvgSpeed: n,
  setUseAvgSpeed: o,
  filter: p,
  setFilter: r,
  sorter: l,
  setSorter: c,
  cleanFinished: d,
  retryFailed: h,
}) {
  const { t: u } = O("application", { keyPrefix: "uploader" }),
    [x, f] = a.useState(!1),
    [m, g] = a.useState(te.getWithFallback(le.UploadOverwrite)),
    y = (S) => () => {
      s(), S();
    },
    k = (S) => {
      te.set(le.UploadOverwrite, S), (i.overwrite = S), g(S);
    },
    b = !!t,
    v = b ? "uploader-action-popover" : void 0,
    A = a.useMemo(
      () => [
        {
          tooltip: u("overwriteTooltip"),
          onClick: () => k(!m),
          icon: m ? e.jsx(De, {}) : e.jsx(Oe, {}),
          text: u("overwrite"),
          divider: !0,
        },
        {
          tooltip: u("hideCompletedTooltip"),
          onClick: () => r(p === "default" ? "ongoing" : "default"),
          icon: p !== "default" ? e.jsx(De, {}) : e.jsx(Oe, {}),
          text: u("hideCompleted"),
          divider: !0,
        },
        {
          tooltip: u("addTimeAscTooltip"),
          onClick: () => c("default"),
          icon: l === "default" ? e.jsx(De, {}) : e.jsx(Oe, {}),
          text: u("addTimeAsc"),
          divider: !1,
        },
        {
          tooltip: u("addTimeDescTooltip"),
          onClick: () => c("reverse"),
          icon: l === "reverse" ? e.jsx(De, {}) : e.jsx(Oe, {}),
          text: u("addTimeDesc"),
          divider: !0,
        },
        {
          tooltip: u("showInstantSpeedTooltip"),
          onClick: () => o(!1),
          icon: n ? e.jsx(Oe, {}) : e.jsx(De, {}),
          text: u("showInstantSpeed"),
          divider: !1,
        },
        {
          tooltip: u("showAvgSpeedTooltip"),
          onClick: () => o(!0),
          icon: n ? e.jsx(De, {}) : e.jsx(Oe, {}),
          text: u("showAvgSpeed"),
          divider: !0,
        },
        {
          tooltip: u("cleanCompletedTooltip"),
          onClick: () => d(),
          icon: e.jsx(js, {}),
          text: u("cleanCompleted"),
          divider: !1,
        },
        {
          tooltip: u("retryFailedTasksTooltip"),
          onClick: () => h(),
          icon: e.jsx(wc, {}),
          text: u("retryFailedTasks"),
          divider: !0,
        },
        {
          tooltip: u("setConcurrentTooltip"),
          onClick: () => f(!0),
          icon: e.jsx(Sc, {}),
          text: u("setConcurrent"),
          divider: !1,
        },
      ],
      [n, o, l, c, p, r, d, m],
    ),
    M = (S) => {
      const I = parseInt(S);
      I > 0 && (te.set(le.ConcurrentLimit, I), i.changeConcurrentLimit(I)), f(!1);
    };
  return e.jsxs(e.Fragment, {
    children: [
      e.jsx(be, {
        id: v,
        open: b,
        anchorEl: t,
        onClose: s,
        children: A.map((S) => [
          e.jsx(
            ae,
            {
              enterNextDelay: 500,
              title: S.tooltip,
              children: e.jsxs(At, {
                dense: !0,
                onClick: y(S.onClick),
                children: [e.jsx(pe, { sx: { minWidth: 38 }, children: S.icon }), S.text],
              }),
            },
            S.text,
          ),
          S.divider && e.jsx(xt, {}),
        ]),
      }),
      e.jsx(Mc, { open: x, onClose: () => f(!1), onSave: M }),
    ],
  });
}
const Ac = mt.forwardRef(function (s, i) {
    return e.jsx(vn, { direction: "up", ref: i, ...s });
  }),
  Dc = U(Dn)(({ fullScreen: t, theme: s }) => ({
    "& .MuiDialog-container": { alignItems: "flex-end", justifyContent: "flex-end" },
    "& .MuiDialog-paper": { border: `1px solid ${s.palette.divider}` },
    ...(t
      ? { margin: 0, position: "fixed", inset: "-1!important" }
      : { top: "auto!important", left: "auto!important" }),
  })),
  zc = U(oe)(({ theme: t }) => ({
    [t.breakpoints.up("md")]: { width: 500, minHeight: 300, maxHeight: "calc(100vh - 140px)" },
    padding: 0,
    paddingTop: "0!important",
  })),
  Pc = U(er)(({ theme: t, expanded: s }) => ({
    transform: `rotate(${s ? 0 : 180}deg)`,
    transition: t.transitions.create("transform", {
      duration: t.transitions.duration.shortest,
      easing: t.transitions.easing.easeInOut,
    }),
  })),
  Lc = { default: (t, s) => t.id - s.id, reverse: (t, s) => s.id - t.id },
  un = { default: (t) => !0, ongoing: (t) => t.status < Z.finished };
function Fc({
  open: t,
  onClose: s,
  selectFile: i,
  taskList: n,
  onCancel: o,
  uploadManager: p,
  progress: r,
  setUploaders: l,
}) {
  const { t: c } = O("application", { keyPrefix: "uploader" }),
    d = X(),
    h = de(d.breakpoints.down("md")),
    u = C((w) => w.fileManager[0].pure_path),
    [x, f] = a.useState(!0),
    [m, g] = a.useState(te.getWithFallback(le.UseAvgSpeed)),
    [y, k] = a.useState(null),
    [b, v] = a.useState(te.getWithFallback(le.TaskFilter)),
    [A, M] = a.useState(te.getWithFallback(le.TaskSorter)),
    [S, I] = a.useState(!1),
    V = (w) => {
      k(w.currentTarget);
    },
    P = () => {
      k(null);
    },
    D = (w, L) => {
      L !== "backdropClick" ? s() : f(!1);
    },
    z = (w, L) => {
      f(L);
    };
  a.useMemo(() => {
    t && f(!0);
  }, [n]);
  const T = (w) => (L) => {
      L.stopPropagation(), w(L);
    },
    R = a.useMemo(
      () =>
        r && r.totalSize > 0
          ? e.jsx(hs, {
              in: r.totalSize > 0 && !x,
              children: e.jsx("div", {
                children: e.jsx(F, {
                  sx: {
                    backgroundColor:
                      d.palette.mode === "light" ? Wn(d.palette.primary.main, 0.8) : Rn(d.palette.primary.main, 0.18),
                    width: (r.processedSize / r.totalSize) * 100 + "%",
                    transition: "width .4s linear",
                    zIndex: -1,
                    height: "100%",
                    position: "absolute",
                    left: 0,
                    top: 0,
                  },
                }),
              }),
            })
          : null,
      [r, x, d],
    ),
    _ = a.useMemo(() => {
      const w = n.filter(un[b]).sort(Lc[A]);
      return w.length === 0
        ? e.jsx(ai, { size: 0.5, top: 63, primary: c("taskListEmpty") })
        : e.jsx(Vi, {
            style: {
              height: (h ? 500 : 66) * w.length,
              maxHeight: "calc(100vh - 56px)",
              ...(d.breakpoints.up("md") ? { minHeight: 300, maxHeight: "calc(100vh - 140px)" } : {}),
            },
            increaseViewportBy: 180,
            data: w,
            itemContent: (L, B) =>
              e.jsx(
                Cc,
                { selectFile: i, onClose: D, onCancel: o, useAvgSpeed: m, uploader: B, onRefresh: () => I((q) => !q) },
                B.id,
              ),
          });
    }, [n, m, h, b, A, S]),
    j = () => {
      n.forEach((w) => {
        w.status === Z.error && w.retry();
      });
    };
  return e.jsxs(e.Fragment, {
    children: [
      e.jsx(_c, {
        onClose: P,
        uploadManager: p,
        anchorEl: y,
        useAvgSpeed: m,
        setUseAvgSpeed: (w) => {
          te.set(le.UseAvgSpeed, w), g(w);
        },
        filter: b,
        sorter: A,
        setFilter: (w) => {
          te.set(le.TaskFilter, w), v(w);
        },
        setSorter: (w) => {
          te.set(le.TaskSorter, w), M(w);
        },
        retryFailed: j,
        cleanFinished: () => l((w) => w.filter(un.ongoing)),
      }),
      e.jsx(Dc, {
        fullScreen: h,
        open: t,
        onClose: D,
        TransitionComponent: Ac,
        disableEnforceFocus: !x,
        hideBackdrop: !x,
        disableScrollLock: !x,
        children: e.jsxs(is, {
          sx: h ? { boxShadow: "none" } : void 0,
          expanded: x || h,
          onChange: z,
          children: [
            e.jsxs(Gn, {
              color: "default",
              onClick: () => f(!x),
              sx: { boxShadow: "none", position: "relative", cursor: "pointer" },
              children: [
                R,
                e.jsxs(Zn, {
                  disableGutters: !0,
                  sx: { px: 1, minHeight: "52px!important" },
                  children: [
                    e.jsx(ae, {
                      title: c("hideTaskList"),
                      children: e.jsx(J, {
                        color: "inherit",
                        onClick: T(() => D(null, "")),
                        "aria-label": "Close",
                        children: e.jsx(ot, { fontSize: "small" }),
                      }),
                    }),
                    e.jsx(ee, {
                      variant: "subtitle1",
                      color: "inherit",
                      sx: { flex: "1", ml: 1, fontWeight: d.typography.h6.fontWeight },
                      children: c("uploadTasks"),
                    }),
                    e.jsxs(F, {
                      sx: { display: "flex", gap: 1 },
                      children: [
                        e.jsx(ae, {
                          title: c("moreActions"),
                          children: e.jsx(J, {
                            color: "inherit",
                            onClick: T(V),
                            children: e.jsx(ts, { fontSize: "small" }),
                          }),
                        }),
                        u &&
                          e.jsx(ae, {
                            title: c("addNewFiles"),
                            children: e.jsx(J, {
                              color: "inherit",
                              onClick: T(() => i(u ?? Pt)),
                              children: e.jsx(it, { fontSize: "small" }),
                            }),
                          }),
                        !h &&
                          e.jsx(ae, {
                            title: c("toggleTaskList"),
                            children: e.jsx(J, {
                              sx: { p: "6px" },
                              color: "inherit",
                              onClick: T(() => f(!x)),
                              children: e.jsx(Pc, { expanded: x }),
                            }),
                          }),
                      ],
                    }),
                  ],
                }),
              ],
            }),
            e.jsx(rs, { sx: { p: 0 }, children: e.jsx(zc, { children: _ }) }),
          ],
        }),
      }),
    ],
  });
}
let hn = null,
  xn = -1;
const Tc = "image.png",
  Ic = () => {
    const { t } = O(),
      s = N(),
      { enqueueSnackbar: i } = Ie(),
      [n, o] = a.useState([]),
      [p, r] = a.useState(!1),
      l = a.useRef(!1),
      c = C((D) => D.globalState.uploadProgress),
      d = C((D) => D.globalState.uploadTaskListOpen),
      h = C((D) => {
        var z;
        return (z = D.fileManager[ne.main].list) == null ? void 0 : z.parent;
      }),
      u = C((D) => D.fileManager[ne.main].pure_path),
      x = C((D) => {
        var z;
        return (z = D.fileManager[ne.main].list) == null ? void 0 : z.storage_policy;
      }),
      f = C((D) => D.globalState.uploadFileSignal),
      m = C((D) => D.globalState.uploadFolderSignal),
      g = C((D) => D.globalState.uploadRawPromiseId),
      y = C((D) => D.globalState.uploadRawFiles),
      k = Te([], Hn.empty, h, ne.main),
      b = C((D) => {
        var z;
        return (z = D.globalState.excalidrawViewer) == null ? void 0 : z.open;
      });
    a.useEffect(() => {
      if (!h || b) {
        l.current = !1;
        return;
      }
      l.current = k.showUpload ?? !1;
    }, [h, k.showUpload, b]);
    const v = a.useCallback(
        (D) => (z) => {
          if (D !== void 0 && (z.length !== 1 || z[0].key() !== D.key())) {
            i(t("uploader.fileNotMatchError"), { variant: "warning" });
            return;
          }
          z.forEach((T) => T.start()),
            s(ss()),
            o((T) => (D !== void 0 && (T = T.filter((R) => R.key() !== D.key())), [...T, ...z]));
        },
        [i, s, o],
      ),
      A = a.useMemo(
        () =>
          new oi({
            logLevel: "INFO",
            concurrentLimit: parseInt(te.getWithFallback(le.ConcurrentLimit)),
            overwrite: te.getWithFallback(le.UploadOverwrite),
            dropZone: document.querySelector("body"),
            onToast: (D, z) => {
              i(z, { variant: D });
            },
            onDropOver: (D) => {
              l.current && r((z) => !z);
            },
            onDropLeave: (D) => (l.current ? (r((z) => !z), !0) : !1),
            onProactiveFileAdded: v(),
            onPoolEmpty: () => {
              setTimeout(() => {
                s(ii(0)), s(ri(0));
              }, 1e3);
            },
          }),
        [i, v, s],
      );
    a.useEffect(() => {
      A.setPolicy(x, u);
    }, [x, u]);
    const M = a.useCallback(
        (D) => {
          D instanceof Bn
            ? i(D.Message(), { variant: "warning" })
            : i(t("uploader:unknownError", { msg: D.message }), { variant: "error" });
        },
        [i, t],
      ),
      S = a.useCallback(
        (D, z = es.File, T) => {
          s(ss()),
            A.select(D, z)
              .then(v(T))
              .catch((R) => {
                M(R);
              });
        },
        [A, v, M, s],
      ),
      I = a.useCallback(
        (D) =>
          D.type.startsWith("image") && D.name == Tc
            ? t("uploader.clipboardDefaultFileName", { date: fe().valueOf() })
            : D.name,
        [t],
      ),
      V = a.useCallback(
        (D) => {
          A.addRawFiles(D, I).catch((z) => {
            M(z);
          });
        },
        [A, v, M, s, I],
      );
    a.useEffect(() => {
      y &&
        y.length > 0 &&
        (A.addRawFiles(y, I, g).catch((D) => {
          M(D);
        }),
        s(li({ files: [], promiseId: [] })));
    }, [y, g, M, A]),
      a.useEffect(() => {
        const D = A.resumeTasks();
        return (
          o((z) => [...z, ...D.filter((T) => z.find((R) => R.key() === T.key()) === void 0)]),
          hn ||
            (hn = setInterval(() => {
              let z = 0,
                T = 0,
                R = 0,
                _ = 0;
              o(
                (j) => (
                  j.forEach((w) => {
                    w.id <= xn ||
                      ((z += w.task.size),
                      (R += 1),
                      (w.status === Z.finished || w.status === Z.canceled || w.status === Z.error) &&
                        ((T += w.task.size), (_ += 1)),
                      (w.status === Z.added ||
                        w.status === Z.initialized ||
                        w.status === Z.queued ||
                        w.status === Z.preparing ||
                        w.status === Z.processing ||
                        w.status === Z.finishing) &&
                        (T += w.progress ? w.progress.total.loaded : 0));
                  }),
                  R > 0 && _ === R && (xn = j[j.length - 1].id),
                  j
                ),
              ),
                s(ci({ progress: { totalSize: z, processedSize: T }, count: R }));
            }, 2e3)),
          () => {
            A && A.destroy();
          }
        );
      }, []),
      a.useEffect(() => {
        f && f > 0 && u && S(u);
      }, [f]),
      a.useEffect(() => {
        m && m > 0 && u && S(u, es.Directory);
      }, [m]);
    const P = a.useCallback((D) => {
      o((z) => z.filter(D));
    }, []);
    return e.jsxs(e.Fragment, {
      children: [
        e.jsx(hc, { onFilePasted: V }),
        e.jsx(dc, { open: p }),
        e.jsx(Fc, {
          progress: c,
          uploadManager: A,
          taskList: n,
          open: !!d,
          onCancel: P,
          selectFile: S,
          onClose: () => s(di()),
          setUploaders: o,
        }),
      ],
    });
  },
  ea = () => {
    const { sidebar_bottom: t } = C((l) => {
        var c, d;
        return ((d = (c = l.siteConfig.basic) == null ? void 0 : c.config) == null ? void 0 : d.custom_html) ?? {};
      }),
      s = a.useRef(),
      i = te.currentLoginOrNull(),
      n = X(),
      o = de(n.breakpoints.down("sm")),
      r = a.useContext(Vt) === Nt.dashboard;
    return e.jsxs(e.Fragment, {
      children: [
        e.jsx(tr, {}),
        e.jsxs(ie, {
          direction: "column",
          spacing: 2,
          ref: s,
          sx: { px: 1, pb: 1, flexGrow: 1, mx: 1, overflow: "auto" },
          children: [
            !r &&
              e.jsxs(e.Fragment, {
                children: [e.jsx(pi, { scrollRef: s, hideWithDrawer: !o }), e.jsx(sr, {}), i && e.jsx(nr, {})],
              }),
            r && e.jsx(ar, {}),
            t &&
              e.jsx(F, { sx: { width: "100%" }, children: e.jsx("div", { dangerouslySetInnerHTML: { __html: t } }) }),
          ],
        }),
      ],
    });
  },
  Ec = (t) => (
    N(),
    C((s) => s.globalState.drawerOpen),
    C((s) => s.globalState.drawerWidth),
    e.jsx(Ht, { ...t, children: e.jsx(F, { sx: { width: "70vw" }, children: e.jsx(ea, {}) }) })
  ),
  Oc = () => {
    const t = X(),
      s = C((o) => o.globalState.drawerOpen),
      i = C((o) => o.globalState.drawerWidth),
      n = t.palette.mode === "light" ? t.palette.grey[100] : t.palette.grey[900];
    return e.jsx(Dr, {
      sx: {
        width: i,
        flexShrink: 0,
        display: "flex",
        "& .MuiDrawer-paper": { width: i, boxSizing: "border-box", backgroundColor: n, borderRight: "initial" },
      },
      variant: "persistent",
      anchor: "left",
      open: s,
      children: e.jsx(ea, {}),
    });
  },
  Wc = U(F)(() => ({ display: "flex", alignItems: "center", justifyContent: "center", width: "100%", height: "100%" })),
  Rc = () => e.jsx(Wc, { children: e.jsx(An, {}) }),
  Bc = () => {
    var u, x;
    const t = C((f) => f.globalState.drawerOpen),
      s = C((f) => f.globalState.drawerWidth),
      [i, n] = a.useState(window.innerHeight);
    let o = Ui();
    const p = X(),
      r = de(p.breakpoints.down("sm")),
      c = a.useContext(Vt) == Nt.dashboard,
      d = te.currentLoginOrNull(),
      h = a.useMemo(
        () => Nn(d == null ? void 0 : d.user).enabled(as.is_admin),
        [(x = (u = d == null ? void 0 : d.user) == null ? void 0 : u.group) == null ? void 0 : x.permission],
      );
    return (
      a.useEffect(() => {
        const f = () => {
          n(window.innerHeight);
        };
        return window.addEventListener("resize", f), () => window.removeEventListener("resize", f);
      }, []),
      e.jsxs(F, {
        sx: (f) => ({
          flexGrow: 1,
          transition: f.transitions.create("margin", {
            easing: f.transitions.easing.sharp,
            duration: f.transitions.duration.leavingScreen,
          }),
          marginRight: r ? 0 : 2,
          marginLeft: r ? 0 : `-${s - 16}px`,
          ...(t && {
            transition: f.transitions.create("margin", {
              easing: f.transitions.easing.easeOut,
              duration: f.transitions.duration.enteringScreen,
            }),
            marginLeft: 0,
          }),
          height: r ? "100%" : window.innerHeight,
          minHeight: window.innerHeight,
          display: "flex",
          flexDirection: "column",
          width: "100%",
          overflow: "hidden",
        }),
        component: "main",
        children: [
          e.jsx(or, {}),
          e.jsx(bs, {
            children: e.jsx(
              ys,
              {
                addEndListener: (f, m) => f.addEventListener("transitionend", m, !1),
                classNames: "fade",
                children: o.state !== "idle" ? e.jsx(Rc, {}) : c && !h ? e.jsx($i, { to: "/home" }) : e.jsx(qi, {}),
              },
              o.state !== "idle" ? "loading" : "idle",
            ),
          }),
        ],
      })
    );
  },
  Hc = 236,
  Nc = (t) => {
    const s = N(),
      [i, n] = a.useState(!1),
      [o, p] = a.useState(0),
      r = a.useRef(0),
      l = C((h) => h.globalState.drawerWidth),
      c = C((h) => h.globalState.drawerOpen);
    a.useEffect(() => {
      p(l - 4), (r.current = l - 4);
    }, []);
    const d = () => {
      n(!0), (document.body.style.userSelect = "none");
      function h(x) {
        x.preventDefault();
        const f = x.clientX - document.body.offsetLeft,
          m = Math.max(Math.min(f, window.innerWidth / 2), Hc);
        p(m), (r.current = m);
      }
      function u() {
        document.body.removeEventListener("mousemove", h),
          n(!1),
          s(ui(r.current + 4)),
          te.set(le.DrawerWidth, r.current + 4),
          (document.body.style.userSelect = "initial");
      }
      document.body.addEventListener("mousemove", h), document.body.addEventListener("mouseup", u, { once: !0 });
    };
    return e.jsxs(e.Fragment, {
      children: [
        c &&
          e.jsx(F, {
            onMouseDown: d,
            sx: {
              cursor: "ew-resize",
              height: "100%",
              position: "fixed",
              width: 8,
              left: o,
              zIndex: (h) => h.zIndex.drawer + 2,
            },
          }),
        e.jsx(hs, {
          in: i,
          unmountOnExit: !0,
          children: e.jsx(F, {
            sx: {
              height: "100%",
              position: "fixed",
              width: 8,
              left: o,
              bgcolor: "divider",
              zIndex: (h) => h.zIndex.drawer + 1,
            },
          }),
        }),
      ],
    });
  },
  mn = () => {
    const { t } = O(),
      s = N(),
      i = X();
    return de(i.breakpoints.down("sm"))
      ? e.jsx(J, { onClick: (o) => s(Ks(ne.main, o)), children: e.jsx(it, {}) })
      : e.jsx(Pe, {
          variant: "contained",
          onClick: (o) => s(Ks(ne.main, o)),
          startIcon: e.jsx(it, {}),
          color: "primary",
          children: t("fileManager.new"),
        });
  };
function Vc(t) {
  return e.jsx(he, {
    ...t,
    children: e.jsx("path", {
      d: "M8.502 11.5a1.002 1.002 0 1 1 0 2.004a1.002 1.002 0 0 1 0-2.005M12 4.353v6.651h7.442L17.72 9.28a.75.75 0 0 1-.073-.977l.073-.084a.75.75 0 0 1 .976-.072l.084.072l2.997 2.998a.75.75 0 0 1 .073.976l-.073.084l-2.996 3.003a.75.75 0 0 1-1.134-.975l.072-.084l1.713-1.717h-7.431L12 19.25a.75.75 0 0 1-.88.738l-8.5-1.501a.75.75 0 0 1-.62-.739V5.75a.75.75 0 0 1 .628-.74l8.5-1.396a.75.75 0 0 1 .872.74m-1.5.883l-7 1.15v10.732l7 1.236zM13 18.5h.765l.102-.007a.75.75 0 0 0 .648-.744l-.007-4.25H13zm.002-8.5L13 8.725V5h.745a.75.75 0 0 1 .743.647l.007.101l.007 4.252z",
    }),
  });
}
const Kt = U(ee)(() => ({ lineHeight: 1 })),
  Uc = ({ open: t, onClose: s, ...i }) => {
    var m, g;
    const n = te.currentUser(),
      { t: o } = O(),
      p = vs(),
      r = N(),
      l = X(),
      c = de(l.breakpoints.down("sm"));
    if (!n) return null;
    const d = a.useMemo(() => Nn(n).enabled(as.is_admin), [(m = n.group) == null ? void 0 : m.permission]),
      h = a.useCallback(() => {
        r(fi()), s && s({}, "backdropClick");
      }, []),
      u = a.useCallback(() => {
        p(`/profile/${n == null ? void 0 : n.id}`), s && s({}, "backdropClick");
      }, [n == null ? void 0 : n.id]),
      x = a.useCallback(() => {
        p("/settings"), s && s({}, "backdropClick");
      }, [n == null ? void 0 : n.id]),
      f = a.useCallback(() => {
        p("/admin/home"), s && s({}, "backdropClick");
      }, [n == null ? void 0 : n.id]);
    return e.jsxs(Ht, {
      open: t,
      onClose: s,
      ...i,
      anchorOrigin: { vertical: "bottom", horizontal: "right" },
      transformOrigin: { vertical: "top", horizontal: "right" },
      children: [
        e.jsxs(F, {
          sx: {
            px: "12px",
            py: "10px",
            minWidth: "230px",
            display: "flex",
            maxWidth: "300px",
            width: "100%",
            flexDirection: "column",
            gap: "4px",
          },
          children: [
            e.jsxs(F, {
              sx: { display: "flex" },
              children: [
                e.jsx(Kt, { paragraph: !1, variant: "body2", fontWeight: 600, children: n.nickname }),
                e.jsx(Kt, {
                  variant: "body2",
                  paragraph: !1,
                  color: "textSecondary",
                  sx: { ml: 1 },
                  children: (g = n.group) == null ? void 0 : g.name,
                }),
              ],
            }),
            e.jsx(Kt, { variant: "caption", color: "textSecondary", children: n.email }),
          ],
        }),
        e.jsx(ht, {}),
        e.jsxs(gi, {
          dense: !0,
          sx: { mx: 0.5 },
          children: [
            d &&
              e.jsxs(Q, {
                onClick: f,
                children: [
                  e.jsx(pe, { children: e.jsx(ji, { fontSize: "small" }) }),
                  e.jsx(Y, { children: o("navbar.dashboard") }),
                ],
              }),
            c &&
              e.jsxs(Q, {
                onClick: x,
                children: [
                  e.jsx(pe, { children: e.jsx(ir, { fontSize: "small" }) }),
                  e.jsx(Y, { children: o("navbar.setting") }),
                ],
              }),
            e.jsxs(Q, {
              onClick: u,
              children: [
                e.jsx(pe, { children: e.jsx(bi, { fontSize: "small" }) }),
                e.jsx(Y, { children: o("navbar.myProfile") }),
              ],
            }),
            e.jsxs(Q, {
              onClick: h,
              children: [e.jsx(pe, { children: e.jsx(Vc, {}) }), e.jsx(Y, { children: o("login.logout") })],
            }),
          ],
        }),
      ],
    });
  },
  fn = () => {
    const t = vs(),
      [s, i] = a.useState(),
      n = fs({ variant: "popover", popupId: "user" });
    return (
      a.useEffect(() => {
        try {
          const o = te.currentLogin();
          o && i(o);
        } catch {}
      }, []),
      e.jsxs(e.Fragment, {
        children: [
          e.jsxs(J, {
            size: s ? "large" : void 0,
            ...(s ? gs(n) : {}),
            children: [
              !s && e.jsx(hi, { onClick: () => t("/session") }),
              s && e.jsx(xi, { sx: { width: 30, height: 30 }, user: s.user }),
            ],
          }),
          e.jsx(Uc, { ...mi(n) }),
        ],
      })
    );
  },
  $c = U(Me)(({ theme: t }) => ({
    "&.MuiButtonBase-root.Mui-disabled": {
      color: t.palette.text.primary,
      fontWeight: t.typography.fontWeightRegular,
      fontSize: t.typography.body2.fontSize,
    },
  })),
  Zt = U(yi)(({ theme: t }) => ({ backgroundColor: t.palette.background.default })),
  qc = a.forwardRef(({ targets: t }, s) => {
    const i = N(),
      n = X(),
      o = de(n.breakpoints.down("sm")),
      p = de(n.breakpoints.down("md")),
      { t: r } = O(),
      l = Te(t, Hn.file);
    return o
      ? e.jsxs(ie, {
          direction: "row",
          spacing: 1,
          sx: { height: "100%" },
          children: [
            e.jsx(J, {
              onClick: () => i(Zs({ index: ne.main, value: void 0 })),
              children: e.jsx(Lt, { badgeContent: t.length, color: "primary", children: e.jsx(ot, {}) }),
            }),
            e.jsx(J, {
              onClick: (c) => i(Ys(ne.main, t[0], !1, c)),
              children: e.jsx(Lt, { badgeContent: t.length, color: "primary", children: e.jsx(ts, {}) }),
            }),
          ],
        })
      : e.jsx(F, {
          ref: s,
          sx: { height: "100%" },
          children: e.jsxs(ie, {
            direction: "row",
            spacing: 1,
            sx: { height: "100%" },
            children: [
              e.jsxs(Zt, {
                variant: "outlined",
                children: [
                  e.jsx(Me, {
                    onClick: () => i(Zs({ index: ne.main, value: void 0 })),
                    children: e.jsx(ot, { fontSize: "small" }),
                  }),
                  e.jsx($c, {
                    disabled: !0,
                    sx: { color: (c) => c.palette.text.primary },
                    children: r("application:navbar.objectsSelected", { num: t.length }),
                  }),
                ],
              }),
              !p &&
                e.jsxs(Zt, {
                  variant: "outlined",
                  children: [
                    l.showOpen &&
                      e.jsx(ae, {
                        title: r("application:fileManager.open"),
                        children: e.jsx(Me, {
                          onClick: () => i(Mn(0, t[0])),
                          children: e.jsx(vi, { fontSize: "small" }),
                        }),
                      }),
                    l.showDownload &&
                      e.jsx(ae, {
                        title: r("application:fileManager.download"),
                        children: e.jsx(Me, { onClick: () => i(ki(0, t)), children: e.jsx(Ci, { fontSize: "small" }) }),
                      }),
                    l.showCopy &&
                      e.jsx(ae, {
                        title: r("application:fileManager.copy"),
                        children: e.jsx(Me, {
                          onClick: () => i(Qs(0, t, !0)),
                          children: e.jsx(_t, { fontSize: "small" }),
                        }),
                      }),
                    l.showMove &&
                      e.jsx(ae, {
                        title: r("application:fileManager.move"),
                        children: e.jsx(Me, {
                          onClick: () => i(Qs(0, t, !1)),
                          children: e.jsx(Si, { fontSize: "small" }),
                        }),
                      }),
                    l.showRename &&
                      e.jsx(ae, {
                        title: r("application:fileManager.rename"),
                        children: e.jsx(Me, {
                          onClick: () => i(wi(0, t[0])),
                          children: e.jsx(Mi, { fontSize: "small" }),
                        }),
                      }),
                    l.showShare &&
                      e.jsx(ae, {
                        title: r("application:fileManager.share"),
                        children: e.jsx(Me, {
                          onClick: () => i(Pn(0, t[0])),
                          children: e.jsx(_i, { fontSize: "small" }),
                        }),
                      }),
                    l.showDelete &&
                      e.jsx(ae, {
                        title: r("application:fileManager.delete"),
                        children: e.jsx(Me, { onClick: () => i(Ai(0, t)), children: e.jsx(js, { fontSize: "small" }) }),
                      }),
                  ],
                }),
              e.jsx(Zt, {
                variant: "outlined",
                children: e.jsx(Me, {
                  onClick: (c) => i(Ys(ne.main, t[0], !1, c)),
                  children: e.jsx(ts, { fontSize: "small" }),
                }),
              }),
            ],
          }),
        });
  }),
  gn = () => {
    const t = C((i) => i.fileManager[ne.main].selected),
      s = a.useMemo(() => Object.keys(t).map((i) => t[i]), [t]);
    return e.jsx(e.Fragment, {
      children: e.jsx(bs, {
        children: e.jsx(
          ys,
          {
            addEndListener: (i, n) => i.addEventListener("transitionend", n, !1),
            classNames: "fade",
            children: e.jsxs(F, {
              sx: { height: "100%" },
              children: [s.length == 0 && e.jsx(Di, {}), s.length > 0 && e.jsx(qc, { targets: s })],
            }),
          },
          `${s.length > 0}`,
        ),
      }),
    });
  };
function Gc(t) {
  return e.jsxs(he, {
    ...t,
    viewBox: "0 0 24 24",
    children: [
      e.jsx("path", {
        d: "M20 2.75a.75.75 0 0 0-.965-.718l-10 3a.75.75 0 0 0-.535.718v9.877a3.5 3.5 0 1 0 1.496 2.702a.756.756 0 0 0 .004-.079v-7.942l8.5-2.55v5.87a3.5 3.5 0 1 0 1.496 2.702a.764.764 0 0 0 .004-.08z",
      }),
      ",",
    ],
  });
}
function Jc(t) {
  return e.jsxs(he, {
    ...t,
    viewBox: "0 0 20 20",
    children: [
      e.jsx("path", {
        d: "M15.987 3.016a1 1 0 0 0-1.285-.79l-7 2.187A1 1 0 0 0 7 5.368V13.5a2.5 2.5 0 1 0 1 2V8.368l7-2.188v2.843c.343.03.678.093 1 .184V3.18c0-.056-.005-.11-.013-.164M19 14.5a4.5 4.5 0 1 1-9 0a4.5 4.5 0 0 1 9 0m-2.263-.435l-2.994-1.65a.5.5 0 0 0-.742.437v3.3a.5.5 0 0 0 .742.438l2.994-1.65a.5.5 0 0 0 0-.875",
      }),
      ",",
    ],
  });
}
const Kc = ({
  file: t,
  playing: s,
  duration: i,
  current: n,
  thumbSrc: o,
  onPlay: p,
  onPause: r,
  onPrevious: l,
  onNext: c,
  onSeek: d,
}) => {
  const h = a.useCallback(() => {
      var v, A, M;
      if (!("mediaSession" in navigator) || !t) return;
      const g = ((v = t.metadata) == null ? void 0 : v[W.music_title]) ?? t.name,
        y = ((A = t.metadata) == null ? void 0 : A[W.music_artist]) ?? "",
        k = ((M = t.metadata) == null ? void 0 : M[W.music_album]) ?? "",
        b = [];
      o &&
        b.push(
          { src: o, sizes: "96x96", type: "image/jpeg" },
          { src: o, sizes: "128x128", type: "image/jpeg" },
          { src: o, sizes: "192x192", type: "image/jpeg" },
          { src: o, sizes: "256x256", type: "image/jpeg" },
          { src: o, sizes: "384x384", type: "image/jpeg" },
          { src: o, sizes: "512x512", type: "image/jpeg" },
        ),
        (navigator.mediaSession.metadata = new MediaMetadata({ title: g, artist: y, album: k, artwork: b }));
    }, [t, o]),
    u = a.useCallback(() => {
      "mediaSession" in navigator && (navigator.mediaSession.playbackState = s ? "playing" : "paused");
    }, [s]),
    x = a.useCallback(() => {
      if (!(!("mediaSession" in navigator) || !i || i <= 0))
        try {
          navigator.mediaSession.setPositionState({ duration: i, playbackRate: 1, position: n });
        } catch (g) {
          console.debug("Media Session position state not supported:", g);
        }
    }, [i, n]),
    f = a.useCallback(() => {
      "mediaSession" in navigator &&
        (navigator.mediaSession.setActionHandler("play", () => {
          p();
        }),
        navigator.mediaSession.setActionHandler("pause", () => {
          r();
        }),
        navigator.mediaSession.setActionHandler("previoustrack", () => {
          l();
        }),
        navigator.mediaSession.setActionHandler("nexttrack", () => {
          c();
        }),
        navigator.mediaSession.setActionHandler("seekbackward", (g) => {
          if (d) {
            const y = Math.max(0, n - (g.seekOffset || 10));
            d(y);
          }
        }),
        navigator.mediaSession.setActionHandler("seekforward", (g) => {
          if (d) {
            const y = Math.min(i, n + (g.seekOffset || 10));
            d(y);
          }
        }),
        navigator.mediaSession.setActionHandler("seekto", (g) => {
          d && g.seekTime !== void 0 && d(g.seekTime);
        }),
        navigator.mediaSession.setActionHandler("stop", () => {
          r();
        }));
    }, [p, r, l, c, d, n, i]),
    m = a.useCallback(() => {
      if (!("mediaSession" in navigator)) return;
      ["play", "pause", "previoustrack", "nexttrack", "seekbackward", "seekforward", "seekto", "stop"].forEach((y) => {
        try {
          navigator.mediaSession.setActionHandler(y, null);
        } catch (k) {
          console.debug(`Media Session action ${y} not supported:`, k);
        }
      });
    }, []);
  return (
    a.useEffect(
      () => (
        f(),
        () => {
          m();
        }
      ),
      [f, m],
    ),
    a.useEffect(() => {
      h();
    }, [h]),
    a.useEffect(() => {
      u();
    }, [u]),
    a.useEffect(() => {
      x();
    }, [x]),
    {
      updateMetadata: h,
      updatePlaybackState: u,
      updatePositionState: x,
      setupActionHandlers: f,
      cleanupActionHandlers: m,
    }
  );
};
function ta(t) {
  return e.jsx(he, {
    ...t,
    children: e.jsx("path", {
      d: "m14.712 2.289l-.087-.078a1 1 0 0 0-1.327.078l-.078.087a.999.999 0 0 0 .078 1.326l1.299 1.297H8.999l-.24.004A6.997 6.997 0 0 0 2 11.993a6.94 6.94 0 0 0 1.189 3.899a.999.999 0 0 0 1.626-1.163l-.135-.218A4.997 4.997 0 0 1 9 6.998h5.595l-1.297 1.297l-.078.087a.999.999 0 0 0 1.492 1.326l3.006-3.003l.077-.087a.999.999 0 0 0-.078-1.326zm6.075 5.771A.999.999 0 0 0 19 8.677c0 .209.064.402.172.561a4.997 4.997 0 0 1-4.17 7.75H9.414l1.294-1.29l.083-.096a1 1 0 0 0-.006-1.23l-.077-.088l-.095-.084a1.001 1.001 0 0 0-1.232.006l-.088.078l-3.005 3.003l-.083.095a1 1 0 0 0 .006 1.231l.077.087l3.005 3.003l.095.084a1 1 0 0 0 1.397-1.41l-.077-.087l-1.304-1.303H15l.24-.003a6.997 6.997 0 0 0 5.546-10.927z",
    }),
  });
}
function sa(t) {
  return e.jsx(he, {
    ...t,
    children: e.jsx("path", {
      d: "m14.712 2.289l-.087-.078a1 1 0 0 0-1.327.078l-.078.087a.999.999 0 0 0 .078 1.326l1.299 1.297H8.999l-.24.004A6.997 6.997 0 0 0 2 11.993a6.94 6.94 0 0 0 1.189 3.899a.999.999 0 0 0 1.626-1.163l-.135-.218A4.997 4.997 0 0 1 9 6.998h5.595l-1.297 1.297l-.078.087a.999.999 0 0 0 1.492 1.326l3.006-3.003l.077-.087a.999.999 0 0 0-.078-1.326zm6.075 5.771A.999.999 0 0 0 19 8.677c0 .209.064.402.172.561c.435.658.72 1.424.803 2.25a6.48 6.48 0 0 1 1.982 1.281a6.958 6.958 0 0 0-1.17-4.712zM9.415 16.99h1.605a6.599 6.599 0 0 0 .151 1.998H9.405l1.304 1.303l.077.087a1 1 0 0 1-1.397 1.41l-.095-.084L6.29 18.7l-.077-.087a1 1 0 0 1-.006-1.231l.083-.095l3.005-3.003l.088-.078c.36-.284.87-.286 1.232-.006l.095.084l.077.087a1 1 0 0 1 .006 1.231l-.083.095zM23 17.5a5.5 5.5 0 1 1-11 0a5.5 5.5 0 0 1 11 0m-4.885-3.487a.5.5 0 0 0-.562.263a4.782 4.782 0 0 1-.613.828c-.334.373-.744.739-1.164.949a.5.5 0 1 0 .448.894c.489-.244.926-.616 1.276-.977v4.53a.5.5 0 0 0 1 0v-6a.5.5 0 0 0-.385-.487",
    }),
  });
}
function na(t) {
  return e.jsxs(he, {
    ...t,
    children: [
      e.jsx("path", {
        d: "m14.712 2.289l-.087-.078a1 1 0 0 0-1.327.078l-.078.087a.999.999 0 0 0 .078 1.326l1.299 1.297H8.999l-.24.004A6.997 6.997 0 0 0 2 11.993a6.94 6.94 0 0 0 1.189 3.899a.999.999 0 0 0 1.626-1.163l-.135-.218A4.997 4.997 0 0 1 9 6.998h5.595l-1.297 1.297l-.078.087a.999.999 0 0 0 1.492 1.326l3.006-3.003l.077-.087a.999.999 0 0 0-.078-1.326zm6.075 5.771A.999.999 0 0 0 19 8.677c0 .209.064.402.172.561a4.997 4.997 0 0 1-4.17 7.75H9.414l1.294-1.29l.083-.096a1 1 0 0 0-.006-1.23l-.077-.088l-.095-.084a1.001 1.001 0 0 0-1.232.006l-.088.078l-3.005 3.003l-.083.095a1 1 0 0 0 .006 1.231l.077.087l3.005 3.003l.095.084a1 1 0 0 0 1.397-1.41l-.077-.087l-1.304-1.303H15l.24-.003a6.997 6.997 0 0 0 5.546-10.927z",
      }),
      e.jsx("line", {
        x1: "3",
        y1: "3",
        x2: "21",
        y2: "21",
        stroke: "currentColor",
        strokeWidth: "2",
        strokeLinecap: "round",
      }),
    ],
  });
}
function aa(t) {
  return e.jsx(he, {
    ...t,
    children: e.jsx("path", {
      d: "M19.207 4.293a1 1 0 1 0-1.414 1.414l.801.802c-3.809.161-6.169 2.59-8.226 4.706l-.085.088C8.057 13.593 6.147 15.5 3 15.5a1 1 0 1 0 0 2c4.05 0 6.503-2.525 8.632-4.715l.085-.088c2.124-2.184 3.96-4.02 6.857-4.185l-.781.78a1 1 0 0 0 1.414 1.415l2.5-2.5a1 1 0 0 0 0-1.414zM3 6.5c3.229 0 5.443 1.605 7.287 3.366c-.197.2-.388.397-.574.588l-.147.152c-.233.24-.459.47-.68.693C7.186 9.68 5.476 8.5 3 8.5a1 1 0 1 1 0-2m15.594 10.991c-3.01-.128-5.115-1.671-6.881-3.357c.197-.2.388-.397.574-.589l.147-.151c.233-.24.459-.47.68-.693c1.601 1.524 3.21 2.66 5.46 2.787l-.781-.78a1 1 0 0 1 1.414-1.415l2.5 2.5a1 1 0 0 1 0 1.414l-2.5 2.5a1 1 0 0 1-1.414-1.414z",
    }),
  });
}
const Zc = ({ file: t, playlist: s, playIndex: i, onClose: n, ...o }) =>
    e.jsx(zi, {
      MenuListProps: { dense: !0 },
      anchorOrigin: { vertical: "bottom", horizontal: "right" },
      transformOrigin: { vertical: "top", horizontal: "right" },
      onClose: n,
      ...o,
      children: s.map((p, r) =>
        e.jsxs(
          Q,
          {
            onClick: () => i(r),
            selected: p.path == t.path,
            children: [
              e.jsx(pe, {
                children: e.jsx(cs, {
                  sx: { px: 0, py: 0, height: "20px" },
                  file: p,
                  variant: "small",
                  iconProps: { fontSize: "small" },
                }),
              }),
              e.jsx(Y, { children: p.name }),
            ],
          },
          p.id,
        ),
      ),
    }),
  yt = U(Ee)({ whiteSpace: "nowrap" }),
  Yc = ({
    open: t,
    anchorEl: s,
    onClose: i,
    loopMode: n,
    onLoopModeChange: o,
    playbackSpeed: p,
    onPlaybackSpeedChange: r,
  }) => {
    const { t: l } = O(),
      c = a.useMemo(() => {
        switch (n) {
          case ce.list_repeat:
            return "list_repeat";
          case ce.single_repeat:
            return "single_repeat";
          case ce.shuffle:
            return "shuffle";
          case ce.play_once:
            return "play_once";
          default:
            return "list_repeat";
        }
      }, [n]),
      d = a.useMemo(() => p.toString(), [p]),
      h = (x, f) => {
        if (!f) return;
        let m;
        switch (f) {
          case "list_repeat":
            m = ce.list_repeat;
            break;
          case "single_repeat":
            m = ce.single_repeat;
            break;
          case "shuffle":
            m = ce.shuffle;
            break;
          case "play_once":
            m = ce.play_once;
            break;
          default:
            return;
        }
        o(m);
      },
      u = (x, f) => {
        if (!f) return;
        const m = parseFloat(f);
        isNaN(m) || r(m);
      };
    return e.jsx(Ht, {
      open: !!t,
      anchorEl: s,
      onClose: i,
      anchorOrigin: { vertical: "bottom", horizontal: "center" },
      transformOrigin: { vertical: "top", horizontal: "center" },
      children: e.jsxs(F, {
        sx: { p: 2, minWidth: 300 },
        children: [
          e.jsx(ee, { variant: "subtitle2", sx: { mb: 1, fontWeight: 600 }, children: l("fileManager.repeatMode") }),
          e.jsxs(Xs, {
            color: "primary",
            value: c,
            exclusive: !0,
            onChange: h,
            size: "small",
            fullWidth: !0,
            sx: { mb: 2 },
            children: [
              e.jsxs(yt, {
                value: "list_repeat",
                children: [e.jsx(ta, { fontSize: "small", sx: { mr: 1 } }), l("fileManager.listRepeat")],
              }),
              e.jsxs(yt, {
                value: "single_repeat",
                children: [e.jsx(sa, { fontSize: "small", sx: { mr: 1 } }), l("fileManager.singleRepeat")],
              }),
              e.jsxs(yt, {
                value: "shuffle",
                children: [e.jsx(aa, { fontSize: "small", sx: { mr: 1 } }), l("fileManager.shuffle")],
              }),
              e.jsxs(yt, {
                value: "play_once",
                children: [e.jsx(na, { fontSize: "small", sx: { mr: 1 } }), l("fileManager.playOnce")],
              }),
            ],
          }),
          e.jsx(ht, { sx: { mb: 2 } }),
          e.jsx(ee, { variant: "subtitle2", sx: { mb: 1, fontWeight: 600 }, children: l("fileManager.playbackSpeed") }),
          e.jsxs(Xs, {
            color: "primary",
            value: d,
            exclusive: !0,
            onChange: u,
            size: "small",
            fullWidth: !0,
            children: [
              e.jsx(Ee, { value: "0.5", children: "0.5" }),
              e.jsx(Ee, { value: "0.75", children: "0.75" }),
              e.jsx(Ee, { value: "1", children: "1" }),
              e.jsx(Ee, { value: "1.25", children: "1.25" }),
              e.jsx(Ee, { value: "1.5", children: "1.5" }),
              e.jsx(Ee, { value: "2", children: "2" }),
            ],
          }),
        ],
      }),
    });
  };
U("div")({
  position: "absolute",
  width: "100%",
  height: "100%",
  top: 0,
  left: 0,
  overflow: "hidden",
  background: "linear-gradient(rgb(255, 38, 142) 0%, rgb(255, 105, 79) 100%)",
  transition: "all 500ms cubic-bezier(0.175, 0.885, 0.32, 1.275) 0s",
  "&::before": {
    content: '""',
    width: "140%",
    height: "140%",
    position: "absolute",
    top: "-40%",
    right: "-50%",
    background: "radial-gradient(at center center, rgb(62, 79, 249) 0%, rgba(62, 79, 249, 0) 64%)",
  },
  "&::after": {
    content: '""',
    width: "140%",
    height: "140%",
    position: "absolute",
    bottom: "-50%",
    left: "-30%",
    background: "radial-gradient(at center center, rgb(247, 237, 225) 0%, rgba(247, 237, 225, 0) 70%)",
    transform: "rotate(30deg)",
  },
});
const Qc = U("div")(({ theme: t }) => ({
    padding: 16,
    width: 343,
    maxWidth: "100%",
    margin: "auto",
    position: "relative",
    zIndex: 1,
    backgroundColor: t.palette.mode === "dark" ? "rgba(0,0,0,0.6)" : "rgba(255,255,255,0.4)",
    backdropFilter: "blur(40px)",
  })),
  Xc = U("div")({
    width: 100,
    height: 100,
    objectFit: "cover",
    overflow: "hidden",
    flexShrink: 0,
    backgroundColor: "rgba(0,0,0,0.08)",
    "& > img": { width: "100%" },
    display: "flex",
    alignItems: "center",
    justifyContent: "center",
  }),
  jn = U(ee)({ fontSize: "0.75rem", opacity: 0.38, fontWeight: 500, letterSpacing: 0.2 }),
  bn = ({ children: t, text: s, ...i }) => {
    const n = a.useRef(null),
      o = a.useRef(null),
      [p, r] = a.useState(!1),
      [l, c] = a.useState(15);
    return (
      a.useEffect(() => {
        const d = () => {
          if (n.current && o.current) {
            const h = o.current.scrollWidth > n.current.clientWidth;
            if ((r(h), h)) {
              const u = o.current.scrollWidth,
                x = Math.max(5, Math.min(10, u / 15));
              c(x);
            }
          }
        };
        r(!1),
          setTimeout(() => {
            d();
          }, 1e3);
      }, [s]),
      e.jsx(F, {
        ref: n,
        sx: { overflow: "hidden", whiteSpace: "nowrap", width: "100%", position: "relative" },
        ...i,
        children: p
          ? e.jsxs(F, {
              sx: {
                display: "flex",
                width: "100%",
                animation: `marquee ${l}s linear infinite`,
                "@keyframes marquee": {
                  "0%": { transform: "translateX(0%)" },
                  "100%": { transform: "translateX(-100%)" },
                },
              },
              children: [
                e.jsx(F, { ref: o, sx: { whiteSpace: "nowrap", paddingRight: "50px" }, children: t }),
                e.jsx(F, { sx: { whiteSpace: "nowrap", paddingRight: "50px" }, children: t }),
              ],
            })
          : e.jsx(F, { ref: o, children: t }),
      })
    );
  },
  ed = /iPad|iPhone/.test(navigator.userAgent),
  td = ({
    file: t,
    duration: s,
    current: i,
    onSeek: n,
    playing: o,
    togglePause: p,
    volume: r,
    setVolumeLevel: l,
    loopMode: c,
    loopProceed: d,
    manualNavigate: h,
    toggleLoopMode: u,
    setLoopMode: x,
    playbackSpeed: f,
    setPlaybackSpeed: m,
    playlist: g,
    playIndex: y,
    ...k
  }) => {
    var q, E;
    const b = X();
    de(b.breakpoints.down("md"));
    const v = N(),
      [A, M] = a.useState(null),
      [S, I] = a.useState(!1),
      [V, P] = a.useState(0),
      D = a.useRef(!1),
      [z, T] = a.useState(null),
      [R, _] = a.useState(null);
    function j(H) {
      const se = Math.floor(H / 60),
        Ce = H - se * 60;
      return `${se}:${Ce < 10 ? `0${Ce}` : Ce}`;
    }
    const w = b.palette.mode === "dark" ? "#fff" : "#000",
      L = b.palette.mode === "dark" ? "rgba(255,255,255,0.4)" : "rgba(0,0,0,0.4)";
    a.useEffect(() => {
      I(!1),
        t && (!t.metadata || t.metadata[W.thumbDisabled] === void 0)
          ? v(Pi(ne.main, t)).then((H) => {
              M(H);
            })
          : M(null);
    }, [t, v]),
      a.useEffect(() => {
        D.current || P(i);
      }, [i]);
    const B = (H) => {
      (D.current = !1), n(H);
    };
    return (
      Kc({
        file: t,
        playing: o,
        duration: s,
        current: i,
        thumbSrc: A,
        onPlay: p,
        onPause: p,
        onPrevious: () => h(!1),
        onNext: () => h(!0),
        onSeek: n,
      }),
      e.jsxs(Ht, {
        anchorOrigin: { vertical: "bottom", horizontal: "left" },
        transformOrigin: { vertical: "top", horizontal: "left" },
        ...k,
        children: [
          g && t && e.jsx(Zc, { playIndex: y, anchorEl: z, open: !!z, onClose: () => T(null), file: t, playlist: g }),
          e.jsx(Yc, {
            open: !!R,
            anchorEl: R,
            onClose: () => _(null),
            loopMode: c,
            onLoopModeChange: x,
            playbackSpeed: f,
            onPlaybackSpeedChange: m,
          }),
          e.jsxs(Qc, {
            children: [
              e.jsxs(F, {
                sx: { display: "flex", alignItems: "center" },
                children: [
                  e.jsxs(Xc, {
                    children: [
                      !A && e.jsx(Li, { fontSize: "large" }),
                      A && e.jsx("img", { src: A, onError: () => M(null), alt: "cover" }),
                    ],
                  }),
                  e.jsxs(F, {
                    sx: { ml: 1.5, minWidth: 0, maxWidth: "210px", width: "100%" },
                    children: [
                      t &&
                        t.metadata &&
                        t.metadata[W.music_artist] &&
                        e.jsx(ee, {
                          variant: "caption",
                          color: "text.secondary",
                          fontWeight: 500,
                          children: e.jsx(Gt, {
                            element: {
                              display: t.metadata[W.music_artist],
                              searchValue: t.metadata[W.music_artist],
                              searchKey: W.music_artist,
                            },
                          }),
                        }),
                      t &&
                        e.jsx(bn, {
                          text: ((q = t.metadata) == null ? void 0 : q[W.music_title]) ?? t.name,
                          children: e.jsx("b", {
                            children:
                              (E = t.metadata) != null && E[W.music_title]
                                ? e.jsx(Gt, {
                                    element: {
                                      display: t.metadata[W.music_title],
                                      searchValue: t.metadata[W.music_title],
                                      searchKey: W.music_title,
                                    },
                                  })
                                : t.name,
                          }),
                        }),
                      t &&
                        t.metadata &&
                        t.metadata[W.music_album] &&
                        e.jsx(bn, {
                          text: t.metadata[W.music_album],
                          children: e.jsx(ee, {
                            variant: "body2",
                            letterSpacing: -0.25,
                            children: e.jsx(Gt, {
                              element: {
                                display: t.metadata[W.music_album],
                                searchValue: t.metadata[W.music_album],
                                searchKey: W.music_album,
                              },
                            }),
                          }),
                        }),
                    ],
                  }),
                ],
              }),
              e.jsx(Dt, {
                "aria-label": "time-indicator",
                size: "small",
                value: V,
                onMouseDown: () => (D.current = !0),
                min: 0,
                step: 1,
                max: s,
                onChange: (H, se) => P(se),
                onChangeCommitted: (H, se) => B(se),
                sx: {
                  color: b.palette.mode === "dark" ? "#fff" : "rgba(0,0,0,0.87)",
                  height: 4,
                  "& .MuiSlider-thumb": {
                    width: 8,
                    height: 8,
                    transition: "0.3s cubic-bezier(.47,1.64,.41,.8)",
                    "&::before": { boxShadow: "0 2px 12px 0 rgba(0,0,0,0.4)" },
                    "&:hover, &.Mui-focusVisible": {
                      boxShadow: `0px 0px 0px 8px ${
                        b.palette.mode === "dark" ? "rgb(255 255 255 / 16%)" : "rgb(0 0 0 / 16%)"
                      }`,
                    },
                    "&.Mui-active": { width: 20, height: 20 },
                  },
                  "& .MuiSlider-rail": { opacity: 0.28 },
                },
              }),
              e.jsxs(F, {
                sx: { display: "flex", alignItems: "center", justifyContent: "space-between", mt: -2 },
                children: [e.jsx(jn, { children: j(i) }), e.jsxs(jn, { children: ["-", j(s - i)] })],
              }),
              e.jsxs(F, {
                sx: { display: "flex", alignItems: "center", justifyContent: "space-between", mt: -1 },
                children: [
                  e.jsxs(J, {
                    "aria-label": "loop mode",
                    onClick: (H) => _(H.currentTarget),
                    children: [
                      c == ce.list_repeat && e.jsx(ta, { fontSize: "medium", htmlColor: w }),
                      c == ce.single_repeat && e.jsx(sa, { fontSize: "medium", htmlColor: w }),
                      c == ce.shuffle && e.jsx(aa, { fontSize: "medium", htmlColor: w }),
                      c == ce.play_once && e.jsx(na, { fontSize: "medium", htmlColor: w }),
                    ],
                  }),
                  e.jsxs(F, {
                    sx: { display: "flex", alignItems: "center", justifyContent: "center" },
                    children: [
                      e.jsx(J, {
                        "aria-label": "previous song",
                        onClick: () => h(!1),
                        children: e.jsx(Or, { fontSize: "large", htmlColor: w }),
                      }),
                      e.jsx(J, {
                        "aria-label": o ? "pause" : "play",
                        onClick: p,
                        children: o
                          ? e.jsx(Rr, { sx: { fontSize: "3rem" }, htmlColor: w })
                          : e.jsx(Br, { sx: { fontSize: "3rem" }, htmlColor: w }),
                      }),
                      e.jsx(J, {
                        "aria-label": "next song",
                        onClick: () => h(!0),
                        children: e.jsx(Er, { fontSize: "large", htmlColor: w }),
                      }),
                    ],
                  }),
                  e.jsx(J, {
                    "aria-label": "play list",
                    onClick: (H) => T(H.currentTarget),
                    children: e.jsx(Fi, { fontSize: "medium", htmlColor: w }),
                  }),
                ],
              }),
              !ed &&
                e.jsxs(ie, {
                  spacing: 2,
                  direction: "row",
                  sx: { mb: 1, px: 1 },
                  alignItems: "center",
                  children: [
                    e.jsx(Hr, { htmlColor: L }),
                    e.jsx(Dt, {
                      "aria-label": "Volume",
                      value: r,
                      min: 0,
                      max: 1,
                      onChange: (H, se) => l(se),
                      onChangeCommitted: (H, se) => te.set(le.MusicVolume, se),
                      step: 0.01,
                      sx: {
                        color: b.palette.mode === "dark" ? "#fff" : "rgba(0,0,0,0.87)",
                        "& .MuiSlider-track": { border: "none" },
                        "& .MuiSlider-thumb": {
                          width: 24,
                          height: 24,
                          backgroundColor: "#fff",
                          "&::before": { boxShadow: "0 4px 8px rgba(0,0,0,0.4)" },
                          "&:hover, &.Mui-focusVisible, &.Mui-active": { boxShadow: "none" },
                        },
                      },
                    }),
                    e.jsx(Nr, { htmlColor: L }),
                  ],
                }),
            ],
          }),
          A &&
            e.jsx(F, {
              component: "img",
              onLoad: () => I(!0),
              sx: {
                transition: "opacity 0.3s cubic-bezier(.47,1.64,.41,.8) 0s",
                opacity: S ? 1 : 0,
                position: "absolute",
                height: "100%",
                width: "100%",
                top: 0,
                bottom: 0,
              },
              src: A,
            }),
        ],
      })
    );
  },
  ce = { list_repeat: 0, single_repeat: 1, shuffle: 2, play_once: 3 },
  sd = () => {
    var q;
    const t = N(),
      s = C((E) => E.globalState.musicPlayer),
      i = a.useRef(null),
      n = a.useRef(null),
      [o, p] = a.useState(!1),
      [r, l] = a.useState(0.2),
      [c, d] = a.useState(void 0);
    a.useState(!1);
    const [h, u] = a.useState(!1),
      [x, f] = a.useState(0),
      [m, g] = a.useState(0),
      [y, k] = a.useState(ce.list_repeat),
      [b, v] = a.useState(1),
      A = a.useRef([]);
    a.useEffect(() => {
      var E;
      if (s) {
        (A.current = []), p(!0), u(!0);
        const H = te.getWithFallback(le.MusicVolume);
        l(H), M(s.startIndex, H);
      }
      return (
        (E = i.current) == null || E.addEventListener("timeupdate", P),
        () => {
          var H;
          p(!1), (H = i.current) == null || H.removeEventListener("timeupdate", P);
        }
      );
    }, [s]);
    const M = a.useCallback(
        async (E, H) => {
          if (i.current && s) {
            i.current.pause(), d(E);
            try {
              const se = await t(Be({ uris: [me(s.files[E])], entity: s.version }));
              (i.current.src = se.urls[0].url),
                (i.current.currentTime = 0),
                i.current.play(),
                (i.current.volume = H ?? r),
                (i.current.playbackRate = b);
            } catch (se) {
              console.error(se);
            }
          }
        },
        [s, r, b],
      ),
      S = a.useCallback(
        (E) => {
          if (s)
            switch (y) {
              case ce.list_repeat:
              case ce.play_once:
                M(
                  E
                    ? ((c ?? 0) + 1) % (s == null ? void 0 : s.files.length)
                    : ((c ?? 0) - 1 + (s == null ? void 0 : s.files.length)) % (s == null ? void 0 : s.files.length),
                );
                break;
              case ce.single_repeat:
                M(c ?? 0);
                break;
              case ce.shuffle:
                if (E) {
                  A.current.push(c ?? 0);
                  const H = Math.floor(Math.random() * (s == null ? void 0 : s.files.length));
                  M(H);
                } else A.current.pop(), M(A.current.pop() ?? c ?? 0);
                break;
            }
        },
        [y, M, s, c],
      ),
      I = a.useCallback(
        (E) => {
          s &&
            (y === ce.single_repeat
              ? M(
                  E
                    ? ((c ?? 0) + 1) % (s == null ? void 0 : s.files.length)
                    : ((c ?? 0) - 1 + (s == null ? void 0 : s.files.length)) % (s == null ? void 0 : s.files.length),
                )
              : S(E));
        },
        [y, M, s, c, S],
      ),
      V = a.useCallback(() => {
        y !== ce.play_once && S(!0);
      }, [y, S]),
      P = a.useCallback(() => {
        var E, H;
        g(Math.floor(((E = i.current) == null ? void 0 : E.currentTime) || 0)),
          f(Math.floor(((H = i.current) == null ? void 0 : H.duration) || 0));
      }, []),
      D = a.useCallback((E) => {
        i.current && (i.current.currentTime = E);
      }, []),
      z = s
        ? `[${(c ?? 0) + 1}/${s.files.length}] ${(q = s == null ? void 0 : s.files[c ?? 0]) == null ? void 0 : q.name}`
        : "",
      T = a.useCallback(() => {
        u(!1);
      }, []),
      R = a.useCallback(() => {
        u(!0);
      }, []),
      _ = a.useCallback(() => {
        i.current && (i.current.paused ? (i.current.play(), p(!0)) : (i.current.pause(), p(!1)));
      }, []),
      j = a.useCallback((E) => {
        i.current && ((i.current.volume = E), l(E));
      }, []),
      w = a.useCallback(() => {
        k((E) => (E + 1) % 4);
      }, []),
      L = a.useCallback((E) => {
        k(E);
      }, []),
      B = a.useCallback((E) => {
        v(E), i.current && (i.current.playbackRate = E);
      }, []);
    return e.jsxs(e.Fragment, {
      children: [
        e.jsx("audio", { ref: i, onPause: () => p(!1), onPlay: () => p(!0), onEnded: V }),
        e.jsx(ae, {
          title: z,
          enterDelay: 0,
          children: e.jsx(J, { ref: n, onClick: R, size: "large", children: o ? e.jsx(Jc, {}) : e.jsx(Gc, {}) }),
        }),
        c !== void 0 &&
          e.jsx(td, {
            playIndex: M,
            loopProceed: S,
            manualNavigate: I,
            file: s == null ? void 0 : s.files[c],
            duration: x,
            current: m,
            open: h,
            setVolumeLevel: j,
            volume: r,
            onSeek: D,
            togglePause: _,
            playing: o,
            playlist: s == null ? void 0 : s.files,
            loopMode: y,
            toggleLoopMode: w,
            setLoopMode: L,
            playbackSpeed: b,
            setPlaybackSpeed: B,
            anchorEl: n.current,
            onClose: T,
          }),
      ],
    });
  };
function nd(t) {
  return e.jsx(he, {
    ...t,
    children: e.jsx("path", {
      d: "M5.25 20.5h13.498a.75.75 0 0 1 .101 1.493l-.101.007H5.25a.75.75 0 0 1-.102-1.493l.102-.007h13.498H5.25zM6.293 7.29l4.998-4.997a1 1 0 0 1 1.32-.084l.093.083l5.004 4.997a1 1 0 0 1-1.32 1.498l-.094-.083L13 5.413V18a1 1 0 0 1-.884.993L12 19a1 1 0 0 1-.993-.883L10.999 18L11 5.41L7.707 8.704a1 1 0 0 1-1.32.083l-.094-.083a1 1 0 0 1-.083-1.32l.083-.095l4.998-4.996l-4.998 4.996z",
      "fill-rule": "nonzero",
    }),
  });
}
const ad = () => {
    const t = N(),
      { t: s } = O(),
      i = C((o) => o.globalState.uploadTaskCount),
      n = a.useCallback(() => {
        t(ss());
      }, [t]);
    return i
      ? e.jsx(F, {
          sx: { position: "relative" },
          children: e.jsx(ae, {
            title: s("uploader.uploadList"),
            enterDelay: 0,
            children: e.jsx(J, {
              onClick: n,
              size: "large",
              children: e.jsx(Lt, {
                sx: { fontSize: (o) => o.typography.body2.fontSize },
                badgeContent: i,
                color: "secondary",
                children: e.jsx(nd, {}),
              }),
            }),
          }),
        })
      : null;
  },
  od = () => {
    const t = N(),
      s = X(),
      i = a.useContext(Vt),
      n = de(s.breakpoints.down("sm")),
      o = i == Nt.default,
      { t: p } = O(),
      r = vs(),
      l = C((k) => k.globalState.drawerOpen),
      c = C((k) => k.globalState.mobileDrawerOpen),
      d = C((k) => k.globalState.drawerWidth),
      h = C((k) => k.globalState.musicPlayer),
      [u, x] = a.useState(null),
      f = s.palette.mode === "light" ? s.palette.grey[100] : s.palette.grey[900],
      m = !!te.currentLoginOrNull(),
      g = (k) => {
        x(k.currentTarget), t(ns(!0));
      },
      y = () => {
        t(ns(!1));
      };
    return e.jsx(Gn, {
      elevation: 0,
      enableColorOnDark: !0,
      sx: (k) => ({
        transition: k.transitions.create(["margin", "width"], {
          easing: k.transitions.easing.sharp,
          duration: k.transitions.duration.leavingScreen,
        }),
        backgroundColor: f,
        color: k.palette.getContrastText(f),
        ...(l &&
          !n && {
            width: `calc(100% - ${d}px)`,
            marginLeft: `${d}px`,
            transition: k.transitions.create(["margin", "width"], {
              easing: k.transitions.easing.easeOut,
              duration: k.transitions.duration.enteringScreen,
            }),
          }),
      }),
      position: "fixed",
      children: e.jsxs(Zn, {
        sx: {
          "&.MuiToolbar-root.MuiToolbar-gutters": {
            paddingLeft: l && !n ? s.spacing(0) : s.spacing(n ? 2 : 3),
            transition: s.transitions.create("padding", {
              easing: s.transitions.easing.easeInOut,
              duration: s.transitions.duration.standard,
            }),
          },
        },
        children: [
          e.jsx(Re, {
            orientation: "horizontal",
            in: !l || n,
            children: e.jsx(J, {
              color: "inherit",
              "aria-label": "open drawer",
              onClick: n ? g : () => t(Ti(!0)),
              edge: "start",
              sx: { mr: n ? 1 : 2, ml: n ? -1 : -1.5 },
              children: e.jsx(Wr, {}),
            }),
          }),
          n && e.jsx(e.Fragment, { children: e.jsx(Ec, { open: !!c, anchorEl: u, onClose: y }) }),
          !n &&
            o &&
            e.jsxs(ie, { direction: "row", spacing: 1, sx: { height: 42 }, children: [e.jsx(mn, {}), e.jsx(gn, {})] }),
          e.jsx(F, { sx: { flexGrow: 1 } }),
          e.jsxs(ie, {
            direction: "row",
            sx: { alignItems: "center" },
            spacing: n ? 1 : 0,
            children: [
              !n && e.jsx(ad, {}),
              h && e.jsx(sd, {}),
              n
                ? e.jsxs(e.Fragment, { children: [o && e.jsx(gn, {}), o && e.jsx(mn, {}), e.jsx(fn, {})] })
                : e.jsxs(e.Fragment, {
                    children: [
                      e.jsx(Yi, {}),
                      m &&
                        e.jsx(ae, {
                          title: p("navbar.setting"),
                          children: e.jsx(J, { size: "large", onClick: () => r("/settings"), children: e.jsx(Ln, {}) }),
                        }),
                      e.jsx(fn, {}),
                    ],
                  }),
            ],
          }),
        ],
      }),
    });
  };
var Nt = ((t) => ((t[(t.default = 0)] = "default"), (t[(t.dashboard = 1)] = "dashboard"), t))(Nt || {});
const Vt = a.createContext(0),
  id = () => {
    const t = qn().pathname;
    return e.jsx(rd, { variant: t.startsWith("/admin") ? 1 : 0 });
  },
  rd = ({ variant: t }) => {
    const s = X(),
      i = N(),
      n = de("(pointer: coarse)"),
      o = de(s.breakpoints.down("sm")),
      p = qn();
    return (
      a.useEffect(() => {
        o && i(ns(!1));
      }, [p]),
      e.jsx(Vt.Provider, {
        value: t ?? 0,
        children: e.jsx(F, {
          sx: {
            bgcolor: (r) => (r.palette.mode === "light" ? r.palette.grey[100] : r.palette.grey[900]),
            display: "flex",
          },
          children: e.jsxs(Vn, {
            backend: Un,
            children: [
              !o && t != 1 && !n && e.jsx(lc, {}),
              !o && !n && e.jsx(Nc, {}),
              e.jsx(od, {}),
              !o && e.jsx(Oc, {}),
              t != 1 && e.jsx(Ii, { fmIndex: ne.main }),
              e.jsx(oc, {}),
              e.jsx(Ic, {}),
              t != 1 && e.jsx(Ei, {}),
              e.jsx(Bc, {}),
            ],
          }),
        }),
      })
    );
  },
  xd = Object.freeze(
    Object.defineProperty({ __proto__: null, AutoNavbarFrame: id, FileManager: Oi }, Symbol.toStringTag, {
      value: "Module",
    }),
  );
export { at as C, xd as F };
